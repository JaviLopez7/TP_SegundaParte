var hV=Object.defineProperty,fV=Object.defineProperties;var pV=Object.getOwnPropertyDescriptors;var sh=Object.getOwnPropertySymbols,gV=Object.getPrototypeOf,pT=Object.prototype.hasOwnProperty,gT=Object.prototype.propertyIsEnumerable,mV=Reflect.get;var fT=(n,e,t)=>e in n?hV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})pT.call(e,t)&&fT(n,t,e[t]);if(sh)for(var t of sh(e))gT.call(e,t)&&fT(n,t,e[t]);return n},te=(n,e)=>fV(n,pV(e));var Il=(n,e)=>{var t={};for(var r in n)pT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&sh)for(var r of sh(n))e.indexOf(r)<0&&gT.call(n,r)&&(t[r]=n[r]);return t};var Zi=(n,e,t)=>mV(gV(n),t,e);var M=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function Zy(n,e){return Object.is(n,e)}var Dt=null,ah=!1,ev=1,Bn=Symbol("SIGNAL");function De(n){let e=Dt;return Dt=n,e}function tv(){return Dt}var Dl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tl(n){if(ah)throw new Error("");if(Dt===null)return;Dt.consumerOnSignalRead(n);let e=Dt.nextProducerIndex++;if(dh(Dt),e<Dt.producerNode.length&&Dt.producerNode[e]!==n&&Cl(Dt)){let t=Dt.producerNode[e];uh(t,Dt.producerIndexOfThis[e])}Dt.producerNode[e]!==n&&(Dt.producerNode[e]=n,Dt.producerIndexOfThis[e]=Cl(Dt)?yT(n,Dt,e):0),Dt.producerLastReadVersion[e]=n.version}function mT(){ev++}function nv(n){if(!(Cl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ev)){if(!n.producerMustRecompute(n)&&!sv(n)){Jy(n);return}n.producerRecomputeValue(n),Jy(n)}}function rv(n){if(n.liveConsumerNode===void 0)return;let e=ah;ah=!0;try{for(let t of n.liveConsumerNode)t.dirty||yV(t)}finally{ah=e}}function iv(){return Dt?.consumerAllowSignalWrites!==!1}function yV(n){n.dirty=!0,rv(n),n.consumerMarkedDirty?.(n)}function Jy(n){n.dirty=!1,n.lastCleanEpoch=ev}function lh(n){return n&&(n.nextProducerIndex=0),De(n)}function ov(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Cl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)uh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function sv(n){dh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(nv(t),r!==t.version))return!0}return!1}function av(n){if(dh(n),Cl(n))for(let e=0;e<n.producerNode.length;e++)uh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function yT(n,e,t){if(vT(n),n.liveConsumerNode.length===0&&_T(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=yT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function uh(n,e){if(vT(n),n.liveConsumerNode.length===1&&_T(n))for(let r=0;r<n.producerNode.length;r++)uh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];dh(i),i.producerIndexOfThis[r]=e}}function Cl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function dh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function vT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function _T(n){return n.producerNode!==void 0}function cv(n,e){let t=Object.create(vV);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(nv(t),Tl(t),t.value===ch)throw t.error;return t.value};return r[Bn]=t,r}var Yy=Symbol("UNSET"),Xy=Symbol("COMPUTING"),ch=Symbol("ERRORED"),vV=te(j({},Dl),{value:Yy,dirty:!0,error:null,equal:Zy,kind:"computed",producerMustRecompute(n){return n.value===Yy||n.value===Xy},producerRecomputeValue(n){if(n.value===Xy)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Xy;let t=lh(n),r,i=!1;try{r=n.computation(),De(null),i=e!==Yy&&e!==ch&&r!==ch&&n.equal(e,r)}catch(o){r=ch,n.error=o}finally{ov(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function _V(){throw new Error}var bT=_V;function wT(n){bT(n)}function lv(n){bT=n}var bV=null;function uv(n,e){let t=Object.create(hh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Tl(t),t.value);return r[Bn]=t,r}function Sl(n,e){iv()||wT(n),n.equal(n.value,e)||(n.value=e,wV(n))}function dv(n,e){iv()||wT(n),Sl(n,e(n.value))}var hh=te(j({},Dl),{equal:Zy,value:void 0,kind:"signal"});function wV(n){n.version++,mT(),rv(n),bV?.()}function hv(n){let e=De(null);try{return n()}finally{De(e)}}var fv;function xl(){return fv}function ui(n){let e=fv;return fv=n,e}var fh=Symbol("NotFound");function de(n){return typeof n=="function"}function pa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ph=pa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Al(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(de(r))try{r()}catch(o){e=o instanceof ph?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ET(o)}catch(s){e=e??[],s instanceof ph?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ph(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ET(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Al(t,e)}remove(e){let{_finalizers:t}=this;t&&Al(t,e),e instanceof n&&e._removeParent(this)}};mt.EMPTY=(()=>{let n=new mt;return n.closed=!0,n})();var pv=mt.EMPTY;function gh(n){return n instanceof mt||n&&"closed"in n&&de(n.remove)&&de(n.add)&&de(n.unsubscribe)}function ET(n){de(n)?n():n.unsubscribe()}var ir={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ga={setTimeout(n,e,...t){let{delegate:r}=ga;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ga;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function mh(n){ga.setTimeout(()=>{let{onUnhandledError:e}=ir;if(e)e(n);else throw n})}function Ml(){}var IT=gv("C",void 0,void 0);function CT(n){return gv("E",void 0,n)}function DT(n){return gv("N",n,void 0)}function gv(n,e,t){return{kind:n,value:e,error:t}}var ns=null;function ma(n){if(ir.useDeprecatedSynchronousErrorHandling){let e=!ns;if(e&&(ns={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ns;if(ns=null,t)throw r}}else n()}function TT(n){ir.useDeprecatedSynchronousErrorHandling&&ns&&(ns.errorThrown=!0,ns.error=n)}var rs=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gh(e)&&e.add(this)):this.destination=SV}static create(e,t,r){return new ya(e,t,r)}next(e){this.isStopped?yv(DT(e),this):this._next(e)}error(e){this.isStopped?yv(CT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?yv(IT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DV=Function.prototype.bind;function mv(n,e){return DV.call(n,e)}var vv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yh(r)}else yh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yh(t)}}},ya=class extends rs{constructor(e,t,r){super();let i;if(de(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ir.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mv(e.next,o),error:e.error&&mv(e.error,o),complete:e.complete&&mv(e.complete,o)}):i=e}this.destination=new vv(i)}};function yh(n){ir.useDeprecatedSynchronousErrorHandling?TT(n):mh(n)}function TV(n){throw n}function yv(n,e){let{onStoppedNotification:t}=ir;t&&ga.setTimeout(()=>t(n,e))}var SV={closed:!0,next:Ml,error:TV,complete:Ml};var va=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rn(n){return n}function _v(...n){return bv(n)}function bv(n){return n.length===0?Rn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=AV(t)?t:new ya(t,r,i);return ma(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ST(r),new r((i,o)=>{let s=new ya({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[va](){return this}pipe(...t){return bv(t)(this)}toPromise(t){return t=ST(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function ST(n){var e;return(e=n??ir.Promise)!==null&&e!==void 0?e:Promise}function xV(n){return n&&de(n.next)&&de(n.error)&&de(n.complete)}function AV(n){return n&&n instanceof rs||xV(n)&&gh(n)}function wv(n){return de(n?.lift)}function Me(n){return e=>{if(wv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(n,e,t,r,i){return new Ev(n,e,t,r,i)}var Ev=class extends rs{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function _a(){return Me((n,e)=>{let t=null;n._refCount++;let r=Te(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ba=class extends Ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,wv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;let t=this.getSubject();e.add(this.source.subscribe(Te(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return _a()(this)}};var xT=pa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class n extends Ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new xT}next(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?pv:(this.currentObservers=null,o.push(t),new mt(()=>{this.currentObservers=null,Al(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ne;return t.source=this,t}}return n.create=(e,t)=>new vh(e,t),n})(),vh=class extends ht{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:pv}};var Bt=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hn=new Ne(n=>n.complete());function AT(n){return n&&de(n.schedule)}function MT(n){return n[n.length-1]}function _h(n){return de(MT(n))?n.pop():void 0}function eo(n){return AT(MT(n))?n.pop():void 0}function PT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{l(r.next(d))}catch(h){s(h)}}function c(d){try{l(r.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function RT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function is(n){return this instanceof is?(this.v=n,this):new is(n)}function NT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(y){return Promise.resolve(y).then(p,h)}}function a(p,y){r[p]&&(i[p]=function(v){return new Promise(function(_,T){o.push([p,v,_,T])>1||c(p,v)})},y&&(i[p]=y(i[p])))}function c(p,y){try{l(r[p](y))}catch(v){f(o[0][3],v)}}function l(p){p.value instanceof is?Promise.resolve(p.value.v).then(d,h):f(o[0][2],p)}function d(p){c("next",p)}function h(p){c("throw",p)}function f(p,y){p(y),o.shift(),o.length&&c(o[0][0],o[0][1])}}function kT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof RT=="function"?RT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var bh=n=>n&&typeof n.length=="number"&&typeof n!="function";function wh(n){return de(n?.then)}function Eh(n){return de(n[va])}function Ih(n){return Symbol.asyncIterator&&de(n?.[Symbol.asyncIterator])}function Ch(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Dh=MV();function Th(n){return de(n?.[Dh])}function Sh(n){return NT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield is(t.read());if(i)return yield is(void 0);yield yield is(r)}}finally{t.releaseLock()}})}function xh(n){return de(n?.getReader)}function yt(n){if(n instanceof Ne)return n;if(n!=null){if(Eh(n))return RV(n);if(bh(n))return PV(n);if(wh(n))return NV(n);if(Ih(n))return OT(n);if(Th(n))return kV(n);if(xh(n))return OV(n)}throw Ch(n)}function RV(n){return new Ne(e=>{let t=n[va]();if(de(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PV(n){return new Ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function NV(n){return new Ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mh)})}function kV(n){return new Ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function OT(n){return new Ne(e=>{FV(n,e).catch(t=>e.error(t))})}function OV(n){return OT(Sh(n))}function FV(n,e){var t,r,i,o;return PT(this,void 0,void 0,function*(){try{for(t=kT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function fn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ah(n,e=0){return Me((t,r)=>{t.subscribe(Te(r,i=>fn(r,n,()=>r.next(i),e),()=>fn(r,n,()=>r.complete(),e),i=>fn(r,n,()=>r.error(i),e)))})}function Mh(n,e=0){return Me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function FT(n,e){return yt(n).pipe(Mh(e),Ah(e))}function LT(n,e){return yt(n).pipe(Mh(e),Ah(e))}function VT(n,e){return new Ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function jT(n,e){return new Ne(t=>{let r;return fn(t,e,()=>{r=n[Dh](),fn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>de(r?.return)&&r.return()})}function Rh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ne(t=>{fn(t,e,()=>{let r=n[Symbol.asyncIterator]();fn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function UT(n,e){return Rh(Sh(n),e)}function BT(n,e){if(n!=null){if(Eh(n))return FT(n,e);if(bh(n))return VT(n,e);if(wh(n))return LT(n,e);if(Ih(n))return Rh(n,e);if(Th(n))return jT(n,e);if(xh(n))return UT(n,e)}throw Ch(n)}function Ke(n,e){return e?BT(n,e):yt(n)}function ie(...n){let e=eo(n);return Ke(n,e)}function wa(n,e){let t=de(n)?n:()=>n,r=i=>i.error(t());return new Ne(e?i=>e.schedule(r,0,i):r)}function Iv(n){return!!n&&(n instanceof Ne||de(n.lift)&&de(n.subscribe))}var di=pa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ge(n,e){return Me((t,r)=>{let i=0;t.subscribe(Te(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:LV}=Array;function VV(n,e){return LV(e)?n(...e):n(e)}function Ph(n){return ge(e=>VV(n,e))}var{isArray:jV}=Array,{getPrototypeOf:UV,prototype:BV,keys:HV}=Object;function Nh(n){if(n.length===1){let e=n[0];if(jV(e))return{args:e,keys:null};if($V(e)){let t=HV(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function $V(n){return n&&typeof n=="object"&&UV(n)===BV}function kh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Rl(...n){let e=eo(n),t=_h(n),{args:r,keys:i}=Nh(n);if(r.length===0)return Ke([],e);let o=new Ne(zV(r,e,i?s=>kh(i,s):Rn));return t?o.pipe(Ph(t)):o}function zV(n,e,t=Rn){return r=>{HT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)HT(e,()=>{let l=Ke(n[c],e),d=!1;l.subscribe(Te(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function HT(n,e,t){n?fn(t,n,e):e()}function $T(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,h=!1,f=()=>{h&&!c.length&&!l&&e.complete()},p=v=>l<r?y(v):c.push(v),y=v=>{o&&e.next(v),l++;let _=!1;yt(t(v,d++)).subscribe(Te(e,T=>{i?.(T),o?p(T):e.next(T)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){let T=c.shift();s?fn(e,s,()=>y(T)):y(T)}f()}catch(T){e.error(T)}}))};return n.subscribe(Te(e,p,()=>{h=!0,f()})),()=>{a?.()}}function ft(n,e,t=1/0){return de(e)?ft((r,i)=>ge((o,s)=>e(r,o,i,s))(yt(n(r,i))),t):(typeof e=="number"&&(t=e),Me((r,i)=>$T(r,i,n,t)))}function Ea(n=1/0){return ft(Rn,n)}function zT(){return Ea(1)}function Ia(...n){return zT()(Ke(n,eo(n)))}function Oh(n){return new Ne(e=>{yt(n()).subscribe(e)})}function Cv(...n){let e=_h(n),{args:t,keys:r}=Nh(n),i=new Ne(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let h=!1;yt(t[d]).subscribe(Te(o,f=>{h||(h=!0,l--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(r?kh(r,a):a),o.complete())}))}});return e?i.pipe(Ph(e)):i}function Ht(n,e){return Me((t,r)=>{let i=0;t.subscribe(Te(r,o=>n.call(e,o,i++)&&r.next(o)))})}function hi(n){return Me((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Te(t,void 0,void 0,s=>{o=yt(n(s,hi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function qT(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Te(s,d=>{let h=l++;c=a?n(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Cr(n,e){return de(e)?ft(n,e,1):ft(n,1)}function to(n){return Me((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function fi(n){return n<=0?()=>hn:Me((e,t)=>{let r=0;e.subscribe(Te(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fh(n=qV){return Me((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qV(){return new di}function no(n){return Me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function pi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ht((i,o)=>n(i,o,r)):Rn,fi(1),t?to(e):Fh(()=>new di))}function Ca(n){return n<=0?()=>hn:Me((e,t)=>{let r=[];e.subscribe(Te(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Dv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ht((i,o)=>n(i,o,r)):Rn,Ca(1),t?to(e):Fh(()=>new di))}function Tv(n,e){return Me(qT(n,e,arguments.length>=2,!0))}function Sv(...n){let e=eo(n);return Me((t,r)=>{(e?Ia(n,t,e):Ia(n,t)).subscribe(r)})}function pn(n,e){return Me((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Te(r,c=>{i?.unsubscribe();let l=0,d=o++;yt(n(c,d)).subscribe(i=Te(r,h=>r.next(e?e(c,h,d,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function xv(n){return Me((e,t)=>{yt(n).subscribe(Te(t,()=>t.complete(),Ml)),!t.closed&&e.subscribe(t)})}function $t(n,e,t){let r=de(n)||e||t?{next:n,error:e,complete:t}:n;return r?Me((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Te(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Rn}var OS="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Y=class extends Error{code;constructor(e,t){super(FS(e,t)),this.code=e}};function WV(n){return`NG0${Math.abs(n)}`}function FS(n,e){return`${WV(n)}${e?": "+e:""}`}var LS=Symbol("InputSignalNode#UNSET"),GV=te(j({},hh),{transformFn:void 0,applyValueToInputSignal(n,e){Sl(n,e)}});function VS(n,e){let t=Object.create(GV);t.value=n,t.transformFn=e?.transform;function r(){if(Tl(t),t.value===LS){let i=null;throw new Y(-950,i)}return t.value}return r[Bn]=t,r}function $l(n){return{toString:n}.toString()}var Lh="__parameters__";function KV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function jS(n,e,t){return $l(()=>{let r=KV(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let h=c.hasOwnProperty(Lh)?c[Lh]:Object.defineProperty(c,Lh,{value:[]})[Lh];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ss=globalThis;function qe(n){for(let e in n)if(n[e]===qe)return e;throw Error("Could not find renamed property on target object.")}function QV(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function mn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(mn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function WT(n,e){return n?e?`${n} ${e}`:n:e||""}var YV=qe({__forward_ref__:qe});function qn(n){return n.__forward_ref__=qn,n.toString=function(){return mn(this())},n}function ln(n){return US(n)?n():n}function US(n){return typeof n=="function"&&n.hasOwnProperty(YV)&&n.__forward_ref__===qn}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function _f(n){return GT(n,HS)||GT(n,$S)}function BS(n){return _f(n)!==null}function GT(n,e){return n.hasOwnProperty(e)?n[e]:null}function XV(n){let e=n&&(n[HS]||n[$S]);return e||null}function KT(n){return n&&(n.hasOwnProperty(QT)||n.hasOwnProperty(JV))?n[QT]:null}var HS=qe({\u0275prov:qe}),QT=qe({\u0275inj:qe}),$S=qe({ngInjectableDef:qe}),JV=qe({ngInjectorDef:qe}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zS(n){return n&&!!n.\u0275providers}var ZV=qe({\u0275cmp:qe}),e2=qe({\u0275dir:qe}),t2=qe({\u0275pipe:qe}),n2=qe({\u0275mod:qe}),Wh=qe({\u0275fac:qe}),Ol=qe({__NG_ELEMENT_ID__:qe}),YT=qe({__NG_ENV_ID__:qe});function bf(n){return typeof n=="string"?n:n==null?"":String(n)}function r2(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bf(n)}function qS(n,e){throw new Y(-200,n)}function L_(n,e){throw new Y(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),$v;function WS(){return $v}function gn(n){let e=$v;return $v=n,e}function GS(n,e,t){let r=_f(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;L_(n,"Injector")}var i2={},as=i2,zv="__NG_DI_FLAG__",Gh=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?fh:as,r)}},Kh="ngTempTokenPath",o2="ngTokenPath",s2=/\n/gm,a2="\u0275",XT="__source";function c2(n,e=pe.Default){if(xl()===void 0)throw new Y(-203,!1);if(xl()===null)return GS(n,void 0,e);{let t=xl(),r;return t instanceof Gh?r=t.injector:r=t,r.get(n,e&pe.Optional?null:void 0,e)}}function Z(n,e=pe.Default){return(WS()||c2)(ln(n),e)}function $(n,e=pe.Default){return Z(n,wf(e))}function wf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function qv(n){let e=[];for(let t=0;t<n.length;t++){let r=ln(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=l2(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Z(i,o))}else e.push(Z(r))}return e}function KS(n,e){return n[zv]=e,n.prototype[zv]=e,n}function l2(n){return n[zv]}function u2(n,e,t,r){let i=n[Kh];throw e[XT]&&i.unshift(e[XT]),n.message=d2(`
`+n.message,i,t,r),n[o2]=i,n[Kh]=null,n}function d2(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==a2?n.slice(2):n;let i=mn(e);if(Array.isArray(e))i=e.map(mn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):mn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(s2,`
  `)}`}var h2=KS(jS("Optional"),8);var f2=KS(jS("SkipSelf"),4);function ls(n,e){let t=n.hasOwnProperty(Wh);return t?n[Wh]:null}function p2(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function g2(n){return n.flat(Number.POSITIVE_INFINITY)}function V_(n,e){n.forEach(t=>Array.isArray(t)?V_(t,e):e(t))}function QS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function m2(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function y2(n,e,t){let r=zl(n,e);return r>=0?n[r|1]=t:(r=~r,m2(n,r,e,t)),r}function Av(n,e){let t=zl(n,e);if(t>=0)return n[t|1]}function zl(n,e){return v2(n,e,1)}function v2(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var us={},Hn=[],Fl=new X(""),YS=new X("",-1),XS=new X(""),Yh=class{get(e,t=as){if(t===as){let r=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw r.name="NullInjectorError",r}return t}};function JS(n,e){let t=n[n2]||null;if(!t&&e===!0)throw new Error(`Type ${mn(n)} does not have '\u0275mod' property.`);return t}function ds(n){return n[ZV]||null}function _2(n){return n[e2]||null}function b2(n){return n[t2]||null}function ja(n){return{\u0275providers:n}}function w2(...n){return{\u0275providers:ZS(!0,n),\u0275fromNgModule:!0}}function ZS(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return V_(e,s=>{let a=s;Wv(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ex(i,o),t}function ex(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];j_(i,o=>{e(o,r)})}}function Wv(n,e,t,r){if(n=ln(n),!n)return!1;let i=null,o=KT(n),s=!o&&ds(n);if(!o&&!s){let c=n.ngModule;if(o=KT(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Wv(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{V_(o.imports,d=>{Wv(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&ex(l,e)}if(!a){let l=ls(i)||(()=>new i);e({provide:i,useFactory:l,deps:Hn},i),e({provide:XS,useValue:i,multi:!0},i),e({provide:Fl,useValue:()=>Z(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;j_(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function j_(n,e){for(let t of n)zS(t)&&(t=t.\u0275providers),Array.isArray(t)?j_(t,e):e(t)}var E2=qe({provide:String,useValue:qe});function tx(n){return n!==null&&typeof n=="object"&&E2 in n}function I2(n){return!!(n&&n.useExisting)}function C2(n){return!!(n&&n.useFactory)}function Ra(n){return typeof n=="function"}function D2(n){return!!n.useClass}var Ef=new X(""),Uh={},JT={},Mv;function U_(){return Mv===void 0&&(Mv=new Yh),Mv}var Jt=class{},Ll=class extends Jt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Kv(e,s=>this.processProvider(s)),this.records.set(YS,Da(void 0,this)),i.has("environment")&&this.records.set(Jt,Da(void 0,this));let o=this.records.get(Ef);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(XS,Hn,pe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?fh:as,r)}destroy(){Nl(this),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return Nl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Nl(this);let t=ui(this),r=gn(void 0),i;try{return e()}finally{ui(t),gn(r)}}get(e,t=as,r=pe.Default){if(Nl(this),e.hasOwnProperty(YT))return e[YT](this);r=wf(r);let i,o=ui(this),s=gn(void 0);try{if(!(r&pe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=M2(e)&&_f(e);l&&this.injectableDefInScope(l)?c=Da(Gv(e),Uh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&pe.Self?U_():this.parent;return t=r&pe.Optional&&t===as?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Kh]=a[Kh]||[]).unshift(mn(e)),o)throw a;return u2(a,e,"R3InjectorError",this.source)}else throw a}finally{gn(s),ui(o)}}resolveInjectorInitializers(){let e=De(null),t=ui(this),r=gn(void 0),i;try{let o=this.get(Fl,Hn,pe.Self);for(let s of o)s()}finally{ui(t),gn(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(mn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ln(e);let t=Ra(e)?e:ln(e&&e.provide),r=S2(e);if(!Ra(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Da(void 0,Uh,!0),i.factory=()=>qv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=De(null);try{return t.value===JT?qS(mn(e)):t.value===Uh&&(t.value=JT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&A2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ln(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Gv(n){let e=_f(n),t=e!==null?e.factory:ls(n);if(t!==null)return t;if(n instanceof X)throw new Y(204,!1);if(n instanceof Function)return T2(n);throw new Y(204,!1)}function T2(n){if(n.length>0)throw new Y(204,!1);let t=XV(n);return t!==null?()=>t.factory(n):()=>new n}function S2(n){if(tx(n))return Da(void 0,n.useValue);{let e=nx(n);return Da(e,Uh)}}function nx(n,e,t){let r;if(Ra(n)){let i=ln(n);return ls(i)||Gv(i)}else if(tx(n))r=()=>ln(n.useValue);else if(C2(n))r=()=>n.useFactory(...qv(n.deps||[]));else if(I2(n))r=(i,o)=>Z(ln(n.useExisting),o!==void 0&&o&pe.Optional?pe.Optional:void 0);else{let i=ln(n&&(n.useClass||n.provide));if(x2(n))r=()=>new i(...qv(n.deps));else return ls(i)||Gv(i)}return r}function Nl(n){if(n.destroyed)throw new Y(205,!1)}function Da(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function x2(n){return!!n.deps}function A2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function M2(n){return typeof n=="function"||typeof n=="object"&&n instanceof X}function Kv(n,e){for(let t of n)Array.isArray(t)?Kv(t,e):t&&zS(t)?Kv(t.\u0275providers,e):e(t)}function vn(n,e){let t;n instanceof Ll?(Nl(n),t=n):t=new Gh(n);let r,i=ui(t),o=gn(void 0);try{return e()}finally{ui(i),gn(o)}}function rx(){return WS()!==void 0||xl()!=null}function R2(n){if(!rx())throw new Y(-203,!1)}function P2(n){return typeof n=="function"}var _i=0,ye=1,le=2,Zt=3,sr=4,ar=5,Xh=6,Jh=7,yn=8,Pa=9,gi=10,Tt=11,Vl=12,ZT=13,Ua=14,Tr=15,hs=16,Ta=17,mi=18,If=19,ix=20,ro=21,Rv=22,Zh=23,$n=24,Aa=25,Nn=26,ox=1;var fs=7,ef=8,Na=9,Pn=10;function io(n){return Array.isArray(n)&&typeof n[ox]=="object"}function bi(n){return Array.isArray(n)&&n[ox]===!0}function sx(n){return(n.flags&4)!==0}function Ba(n){return n.componentOffset>-1}function B_(n){return(n.flags&1)===1}function Sr(n){return!!n.template}function tf(n){return(n[le]&512)!==0}function Ha(n){return(n[le]&256)===256}var Qv=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ax(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Pr=(()=>{let n=()=>cx;return n.ngInherit=!0,n})();function cx(n){return n.type.prototype.ngOnChanges&&(n.setInput=k2),N2}function N2(){let n=ux(this),e=n?.current;if(e){let t=n.previous;if(t===us)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function k2(n,e,t,r,i){let o=this.declaredInputs[r],s=ux(n)||O2(n,{previous:us,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Qv(l&&l.currentValue,t,c===us),ax(n,e,i,t)}var lx="__ngSimpleChanges__";function ux(n){return n[lx]||null}function O2(n,e){return n[lx]=e}var eS=null;var He=function(n,e=null,t){eS?.(n,e,t)},F2="svg",L2="math";function xr(n){for(;Array.isArray(n);)n=n[_i];return n}function dx(n,e){return xr(e[n])}function Nr(n,e){return xr(e[n.index])}function hx(n,e){return n.data[e]}function H_(n,e){return n[e]}function V2(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ar(n,e){let t=e[n];return io(t)?t:t[_i]}function j2(n){return(n[le]&4)===4}function $_(n){return(n[le]&128)===128}function U2(n){return bi(n[Zt])}function nf(n,e){return e==null?null:n[e]}function fx(n){n[Ta]=0}function px(n){n[le]&1024||(n[le]|=1024,$_(n)&&ql(n))}function B2(n,e){for(;n>0;)e=e[Ua],n--;return e}function Cf(n){return!!(n[le]&9216||n[$n]?.dirty)}function Yv(n){n[gi].changeDetectionScheduler?.notify(8),n[le]&64&&(n[le]|=1024),Cf(n)&&ql(n)}function ql(n){n[gi].changeDetectionScheduler?.notify(0);let e=ps(n);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!$_(e)));)e=ps(e)}function gx(n,e){if(Ha(n))throw new Y(911,!1);n[ro]===null&&(n[ro]=[]),n[ro].push(e)}function H2(n,e){if(n[ro]===null)return;let t=n[ro].indexOf(e);t!==-1&&n[ro].splice(t,1)}function ps(n){let e=n[Zt];return bi(e)?e[Zt]:e}function z_(n){return n[Jh]??=[]}function q_(n){return n.cleanup??=[]}function $2(n,e,t,r){let i=z_(e);i.push(t),n.firstCreatePass&&q_(n).push(r,i.length-1)}var ve={lFrame:Ix(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Xv=!1;function z2(){return ve.lFrame.elementDepthCount}function q2(){ve.lFrame.elementDepthCount++}function W2(){ve.lFrame.elementDepthCount--}function mx(){return ve.bindingsEnabled}function G2(){return ve.skipHydrationRootTNode!==null}function K2(n){return ve.skipHydrationRootTNode===n}function Q2(){ve.skipHydrationRootTNode=null}function ke(){return ve.lFrame.lView}function en(){return ve.lFrame.tView}function _e(n){return ve.lFrame.contextLView=n,n[yn]}function be(n){return ve.lFrame.contextLView=null,n}function _n(){let n=yx();for(;n!==null&&n.type===64;)n=n.parent;return n}function yx(){return ve.lFrame.currentTNode}function Y2(){let n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Wl(n,e){let t=ve.lFrame;t.currentTNode=n,t.isParent=e}function vx(){return ve.lFrame.isParent}function X2(){ve.lFrame.isParent=!1}function J2(){return ve.lFrame.contextLView}function _x(){return Xv}function tS(n){let e=Xv;return Xv=n,e}function Df(){let n=ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Z2(n){return ve.lFrame.bindingIndex=n}function Tf(){return ve.lFrame.bindingIndex++}function ej(n){let e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function tj(){return ve.lFrame.inI18n}function nj(n,e){let t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,Jv(e)}function rj(){return ve.lFrame.currentDirectiveIndex}function Jv(n){ve.lFrame.currentDirectiveIndex=n}function ij(n){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function bx(){return ve.lFrame.currentQueryIndex}function W_(n){ve.lFrame.currentQueryIndex=n}function oj(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[ar]:null}function wx(n,e,t){if(t&pe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=oj(o),i===null||(o=o[Ua],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ve.lFrame=Ex();return r.currentTNode=e,r.lView=n,!0}function G_(n){let e=Ex(),t=n[ye];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ex(){let n=ve.lFrame,e=n===null?null:n.child;return e===null?Ix(n):e}function Ix(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Cx(){let n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Dx=Cx;function K_(){let n=Cx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function sj(n){return(ve.lFrame.contextLView=B2(n,ve.lFrame.contextLView))[yn]}function $a(){return ve.lFrame.selectedIndex}function gs(n){ve.lFrame.selectedIndex=n}function Q_(){let n=ve.lFrame;return hx(n.tView,n.selectedIndex)}function aj(){return ve.lFrame.currentNamespace}var Tx=!0;function Y_(){return Tx}function X_(n){Tx=n}function cj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cx(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Sx(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Bh(n,e,t){xx(n,e,3,t)}function Hh(n,e,t,r){(n[le]&3)===t&&xx(n,e,t,r)}function Pv(n,e){let t=n[le];(t&3)===e&&(t&=16383,t+=1,n[le]=t)}function xx(n,e,t,r){let i=r!==void 0?n[Ta]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ta]+=65536),(a<o||o==-1)&&(lj(n,t,e,c),n[Ta]=(n[Ta]&4294901760)+c+2),c++}function nS(n,e){He(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),He(5,n,e)}}function lj(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[le]>>14<n[Ta]>>16&&(n[le]&3)===e&&(n[le]+=16384,nS(a,o)):nS(a,o)}var Ma=-1,ms=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function uj(n){return(n.flags&8)!==0}function dj(n){return(n.flags&16)!==0}function hj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];fj(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Ax(n){return n===3||n===4||n===6}function fj(n){return n.charCodeAt(0)===64}function jl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?rS(n,t,i,null,e[++r]):rS(n,t,i,null,null))}}return n}function rS(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Mx(n){return n!==Ma}function rf(n){return n&32767}function pj(n){return n>>16}function of(n,e){let t=pj(n),r=e;for(;t>0;)r=r[Ua],t--;return r}var Zv=!0;function sf(n){let e=Zv;return Zv=n,e}var gj=256,Rx=gj-1,Px=5,mj=0,Dr={};function yj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ol)&&(r=t[Ol]),r==null&&(r=t[Ol]=mj++);let i=r&Rx,o=1<<i;e.data[n+(i>>Px)]|=o}function af(n,e){let t=Nx(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,Nv(r.data,n),Nv(e,null),Nv(r.blueprint,null));let i=J_(n,e),o=n.injectorIndex;if(Mx(i)){let s=rf(i),a=of(i,e),c=a[ye].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Nv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Nx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function J_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Vx(i),r===null)return Ma;if(t++,i=i[Ua],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ma}function e_(n,e,t){yj(n,e,t)}function vj(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Ax(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function kx(n,e,t){if(t&pe.Optional||n!==void 0)return n;L_(e,"NodeInjector")}function Ox(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),(t&(pe.Self|pe.Host))===0){let i=n[Pa],o=gn(void 0);try{return i?i.get(e,r,t&pe.Optional):GS(e,r,t&pe.Optional)}finally{gn(o)}}return kx(r,e,t)}function Fx(n,e,t,r=pe.Default,i){if(n!==null){if(e[le]&2048&&!(r&pe.Self)){let s=Ej(n,e,t,r,Dr);if(s!==Dr)return s}let o=Lx(n,e,t,r,Dr);if(o!==Dr)return o}return Ox(e,t,r,i)}function Lx(n,e,t,r,i){let o=bj(t);if(typeof o=="function"){if(!wx(e,n,r))return r&pe.Host?kx(i,t,r):Ox(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))L_(t);else return s}finally{Dx()}}else if(typeof o=="number"){let s=null,a=Nx(n,e),c=Ma,l=r&pe.Host?e[Tr][ar]:null;for((a===-1||r&pe.SkipSelf)&&(c=a===-1?J_(n,e):e[a+8],c===Ma||!oS(r,!1)?a=-1:(s=e[ye],a=rf(c),e=of(c,e)));a!==-1;){let d=e[ye];if(iS(o,a,d.data)){let h=_j(a,e,t,s,r,l);if(h!==Dr)return h}c=e[a+8],c!==Ma&&oS(r,e[ye].data[a+8]===l)&&iS(o,a,e)?(s=d,a=rf(c),e=of(c,e)):a=-1}}return i}function _j(n,e,t,r,i,o){let s=e[ye],a=s.data[n+8],c=r==null?Ba(a)&&Zv:r!=s&&(a.type&3)!==0,l=i&pe.Host&&o===a,d=$h(a,s,t,c,l);return d!==null?Ul(e,s,d,a,i):Dr}function $h(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,h=r?a:a+d,f=i?a+d:l;for(let p=h;p<f;p++){let y=s[p];if(p<c&&t===y||p>=c&&y.type===t)return p}if(i){let p=s[c];if(p&&Sr(p)&&p.type===t)return c}return null}function Ul(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ms){let a=o;a.resolving&&qS(r2(s[t]));let c=sf(a.canSeeViewProviders);a.resolving=!0;let l,d=a.injectImpl?gn(a.injectImpl):null,h=wx(n,r,pe.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&cj(t,s[t],e)}finally{d!==null&&gn(d),sf(c),a.resolving=!1,Dx()}}return o}function bj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ol)?n[Ol]:void 0;return typeof e=="number"?e>=0?e&Rx:wj:e}function iS(n,e,t){let r=1<<n;return!!(t[e+(n>>Px)]&r)}function oS(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var cs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Fx(this._tNode,this._lView,e,wf(r),t)}};function wj(){return new cs(_n(),ke())}function wi(n){return $l(()=>{let e=n.prototype.constructor,t=e[Wh]||t_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Wh]||t_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function t_(n){return US(n)?()=>{let e=t_(ln(n));return e&&e()}:ls(n)}function Ej(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[le]&2048&&!tf(s);){let a=Lx(o,s,t,r|pe.Self,Dr);if(a!==Dr)return a;let c=o.parent;if(!c){let l=s[ix];if(l){let d=l.get(t,Dr,r);if(d!==Dr)return d}c=Vx(s),s=s[Ua]}o=c}return i}function Vx(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[ar]:null}function Z_(n){return vj(_n(),n)}function sS(n,e=null,t=null,r){let i=jx(n,e,t,r);return i.resolveInjectorInitializers(),i}function jx(n,e=null,t=null,r,i=new Set){let o=[t||Hn,w2(n)];return r=r||(typeof n=="object"?void 0:mn(n)),new Ll(o,e||U_(),r||null,i)}var zn=class n{static THROW_IF_NOT_FOUND=as;static NULL=new Yh;static create(e,t){if(Array.isArray(e))return sS({name:""},t,e,"");{let r=e.name??"";return sS({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:n,providedIn:"any",factory:()=>Z(YS)});static __NG_ELEMENT_ID__=-1};var Ij=new X("");Ij.__NG_ELEMENT_ID__=n=>{let e=_n();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new Y(204,!1)};var Ux=!1,za=(()=>{class n{static __NG_ELEMENT_ID__=Cj;static __NG_ENV_ID__=t=>t}return n})(),n_=class extends za{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Ha(t)?(e(),()=>{}):(gx(t,e),()=>H2(t,e))}};function Cj(){return new n_(ke())}var ka=class{},eb=new X("",{providedIn:"root",factory:()=>!1});var Bx=new X(""),Hx=new X(""),Ei=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Bt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})();var r_=class extends ht{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,rx()&&(this.destroyRef=$(za,{optional:!0})??void 0,this.pendingTasks=$(Ei,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},it=r_;function cf(...n){}function $x(n){let e,t;function r(){n=cf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function aS(n){return queueMicrotask(()=>n()),()=>{n=cf}}var tb="isAngularZone",lf=tb+"_ID",Dj=0,ct=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new it(!1);onMicrotaskEmpty=new it(!1);onStable=new it(!1);onError=new it(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Ux}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,xj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tb)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Tj,cf,cf);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Tj={};function nb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Sj(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){$x(()=>{n.callbackScheduled=!1,i_(n),n.isCheckStableRunning=!0,nb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),i_(n)}function xj(n){let e=()=>{Sj(n)},t=Dj++;n._inner=n._inner.fork({name:"angular",properties:{[tb]:!0,[lf]:t,[lf+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Aj(c))return r.invokeTask(o,s,a,c);try{return cS(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),lS(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return cS(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Mj(c)&&e(),lS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,i_(n),nb(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function i_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function cS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lS(n){n._nesting--,nb(n)}var o_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new it;onMicrotaskEmpty=new it;onStable=new it;onError=new it;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Aj(n){return zx(n,"__ignore_ng_zone__")}function Mj(n){return zx(n,"__scheduler_tick__")}function zx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Mr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Rj=new X("",{providedIn:"root",factory:()=>{let n=$(ct),e=$(Mr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function uS(n,e){return VS(n,e)}function Pj(n){return VS(LS,n)}var qx=(uS.required=Pj,uS);function Nj(){return qa(_n(),ke())}function qa(n,e){return new Gn(Nr(n,e))}var Gn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Nj}return n})();function kj(n){return n instanceof Gn?n.nativeElement:n}function Oj(n){return typeof n=="function"&&n[Bn]!==void 0}function Wa(n,e){let t=uv(n,e?.equal),r=t[Bn];return t.set=i=>Sl(r,i),t.update=i=>dv(r,i),t.asReadonly=Fj.bind(t),t}function Fj(){let n=this[Bn];if(n.readonlyFn===void 0){let e=()=>this();e[Bn]=n,n.readonlyFn=e}return n.readonlyFn}function Wx(n){return Oj(n)&&typeof n.set=="function"}function Lj(){return this._results[Symbol.iterator]()}var s_=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ht}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=g2(e);(this._changesDetected=!p2(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Lj};function Gx(n){return(n.flags&128)===128}var Kx=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Kx||{}),Qx=new Map,Vj=0;function jj(){return Vj++}function Uj(n){Qx.set(n[If],n)}function a_(n){Qx.delete(n[If])}var dS="__ngContext__";function Gl(n,e){io(e)?(n[dS]=e[If],Uj(e)):n[dS]=e}function Yx(n){return Jx(n[Vl])}function Xx(n){return Jx(n[sr])}function Jx(n){for(;n!==null&&!bi(n);)n=n[sr];return n}var c_;function Zx(n){c_=n}function Bj(){if(c_!==void 0)return c_;if(typeof document<"u")return document;throw new Y(210,!1)}var rb=new X("",{providedIn:"root",factory:()=>Hj}),Hj="ng",ib=new X(""),Ga=new X("",{providedIn:"platform",factory:()=>"unknown"});var ob=new X("",{providedIn:"root",factory:()=>Bj().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $j="h",zj="b";var eA=!1,qj=new X("",{providedIn:"root",factory:()=>eA});var sb=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(sb||{}),Ka=new X(""),hS=new Set;function Qa(n){hS.has(n)||(hS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var tA=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Wj}return n})();function Wj(){return new tA(ke(),_n())}var Sa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Sa||{}),nA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),Gj=[Sa.EarlyRead,Sa.Write,Sa.MixedReadWrite,Sa.Read],Kj=(()=>{class n{ngZone=$(ct);scheduler=$(ka);errorHandler=$(Mr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){$(Ka,{optional:!0})}execute(){let t=this.sequences.size>0;t&&He(16),this.executing=!0;for(let r of Gj)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&He(17)}register(t){let{view:r}=t;r!==void 0?((r[Aa]??=[]).push(t),ql(r),r[le]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(sb.AFTER_NEXT_RENDER,t):t()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),l_=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Aa];e&&(this.view[Aa]=e.filter(t=>t!==this))}};function ab(n,e){!e?.injector&&R2(ab);let t=e?.injector??$(zn);return Qa("NgAfterNextRender"),Yj(n,t,e,!0)}function Qj(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Yj(n,e,t,r){let i=e.get(nA);i.impl??=e.get(Kj);let o=e.get(Ka,null,{optional:!0}),s=t?.phase??Sa.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(za):null,c=e.get(tA,null,{optional:!0}),l=new l_(i.impl,Qj(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var Xj=(n,e,t,r)=>{};function Jj(n,e,t,r){Xj(n,e,t,r)}var Zj=()=>null;function rA(n,e,t=!1){return Zj(n,e,t)}function iA(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];W_(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function u_(n,e,t){W_(0);let r=De(null);try{e(n,t)}finally{De(r)}}function oA(n,e,t){if(sx(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{De(r)}}}var Rr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Rr||{});var Vh;function eU(){if(Vh===void 0&&(Vh=null,ss.trustedTypes))try{Vh=ss.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vh}function fS(n){return eU()?.createScriptURL(n)||n}var uf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${OS})`}};function Sf(n){return n instanceof uf?n.changingThisBreaksApplicationSecurity:n}function sA(n,e){let t=tU(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${OS})`)}return t===e}function tU(n){return n instanceof uf&&n.getTypeName()||null}var nU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rU(n){return n=String(n),n.match(nU)?n:"unsafe:"+n}var cb=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(cb||{});function iU(n){let e=cA();return e?e.sanitize(cb.URL,n)||"":sA(n,"URL")?Sf(n):rU(bf(n))}function oU(n){let e=cA();if(e)return fS(e.sanitize(cb.RESOURCE_URL,n)||"");if(sA(n,"ResourceURL"))return fS(Sf(n));throw new Y(904,!1)}function sU(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?oU:iU}function aA(n,e,t){return sU(e,t)(n)}function cA(){let n=ke();return n&&n[gi].sanitizer}function lA(n){return n.ownerDocument}function uA(n){return n instanceof Function?n():n}function aU(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var dA="ng-template";function cU(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aU(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(lb(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function lb(n){return n.type===4&&n.value!==dA}function lU(n,e,t){let r=n.type===4&&!t?dA:n.value;return e===r}function uU(n,e,t){let r=4,i=n.attrs,o=i!==null?fU(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!or(r)&&!or(c))return!1;if(s&&or(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!lU(n,c,t)||c===""&&e.length===1){if(or(r))return!1;s=!0}}else if(r&8){if(i===null||!cU(n,i,c,t)){if(or(r))return!1;s=!0}}else{let l=e[++a],d=dU(c,i,lb(n),t);if(d===-1){if(or(r))return!1;s=!0;continue}if(l!==""){let h;if(d>o?h="":h=i[d+1].toLowerCase(),r&2&&l!==h){if(or(r))return!1;s=!0}}}}return or(r)||s}function or(n){return(n&1)===0}function dU(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return pU(e,n)}function hU(n,e,t=!1){for(let r=0;r<e.length;r++)if(uU(n,e[r],t))return!0;return!1}function fU(n){for(let e=0;e<n.length;e++){let t=n[e];if(Ax(t))return e}return n.length}function pU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function pS(n,e){return n?":not("+e.trim()+")":e}function gU(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!or(s)&&(e+=pS(o,i),i=""),r=s,o=o||!or(r);t++}return i!==""&&(e+=pS(o,i)),e}function mU(n){return n.map(gU).join(",")}function yU(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!or(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var bs={};function vU(n,e){return n.createText(e)}function _U(n,e,t){n.setValue(e,t)}function hA(n,e,t){return n.createElement(e,t)}function df(n,e,t,r,i){n.insertBefore(e,t,r,i)}function fA(n,e,t){n.appendChild(e,t)}function gS(n,e,t,r,i){r!==null?df(n,e,t,r,i):fA(n,e,t)}function bU(n,e,t){n.removeChild(null,e,t)}function wU(n,e,t){n.setAttribute(e,"style",t)}function EU(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function pA(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&hj(n,e,r),i!==null&&EU(n,e,i),o!==null&&wU(n,e,o)}function ub(n,e,t,r,i,o,s,a,c,l,d){let h=Nn+r,f=h+i,p=IU(h,f),y=typeof l=="function"?l():l;return p[ye]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:d}}function IU(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:bs);return t}function CU(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ub(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function db(n,e,t,r,i,o,s,a,c,l,d){let h=e.blueprint.slice();return h[_i]=i,h[le]=r|4|128|8|64|1024,(l!==null||n&&n[le]&2048)&&(h[le]|=2048),fx(h),h[Zt]=h[Ua]=n,h[yn]=t,h[gi]=s||n&&n[gi],h[Tt]=a||n&&n[Tt],h[Pa]=c||n&&n[Pa]||null,h[ar]=o,h[If]=jj(),h[Xh]=d,h[ix]=l,h[Tr]=e.type==2?n[Tr]:h,h}function DU(n,e,t){let r=Nr(e,n),i=CU(t),o=n[gi].rendererFactory,s=hb(n,db(n,i,null,gA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function gA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function mA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function hb(n,e){return n[Vl]?n[ZT][sr]=e:n[Vl]=e,n[ZT]=e,e}function V(n=1){yA(en(),ke(),$a()+n,!1)}function yA(n,e,t,r){if(!r)if((e[le]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Bh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Hh(e,o,0,t)}gs(t)}var xf=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(xf||{});function d_(n,e,t,r){let i=De(null);try{let[o,s,a]=n.inputs[t],c=null;(s&xf.SignalBased)!==0&&(c=e[o][Bn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):ax(e,c,o,r)}finally{De(i)}}function vA(n,e,t,r,i){let o=$a(),s=r&2;try{gs(-1),s&&e.length>Nn&&yA(n,e,Nn,!1),He(s?2:0,i),t(r,i)}finally{gs(o),He(s?3:1,i)}}function fb(n,e,t){RU(n,e,t),(t.flags&64)===64&&PU(n,e,t)}function _A(n,e,t=Nr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function TU(n,e,t,r){let o=r.get(qj,eA)||t===Rr.ShadowDom,s=n.selectRootElement(e,o);return SU(s),s}function SU(n){xU(n)}var xU=()=>null;function AU(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bA(n,e,t,r,i,o,s,a){if(!a&&pb(e,n,t,r,i)){Ba(e)&&MU(t,e.index);return}if(e.type&3){let c=Nr(e,t);r=AU(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function MU(n,e){let t=Ar(e,n);t[le]&16||(t[le]|=64)}function RU(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ba(t)&&DU(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||af(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Ul(e,n,s,t);if(Gl(c,e),o!==null&&FU(e,s-r,c,a,t,o),Sr(a)){let l=Ar(t.index,e);l[yn]=Ul(e,n,s,t)}}}function PU(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=rj();try{gs(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Jv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&NU(c,l)}}finally{gs(-1),Jv(s)}}function NU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function wA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];hU(e,o.selectors,!1)&&(r??=[],Sr(o)?r.unshift(o):r.push(o))}return r}function kU(n,e,t,r,i,o){let s=Nr(n,e);OU(e[Tt],s,o,n.value,t,r,i)}function OU(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?bf(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function FU(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];d_(r,t,c,l)}}function LU(n,e){let t=n[Pa],r=t?t.get(Mr,null):null;r&&r.handleError(e)}function pb(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],d=s[c+1],h=e.data[l];d_(h,t[l],d,i),a=!0}if(o)for(let c of o){let l=t[c],d=e.data[c];d_(d,l,r,i),a=!0}return a}function VU(n,e){let t=Ar(e,n),r=t[ye];jU(r,t);let i=t[_i];i!==null&&t[Xh]===null&&(t[Xh]=rA(i,t[Pa])),He(18),gb(r,t,t[yn]),He(19,t[yn])}function jU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function gb(n,e,t){G_(e);try{let r=n.viewQuery;r!==null&&u_(1,r,t);let i=n.template;i!==null&&vA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[mi]?.finishViewCreation(n),n.staticContentQueries&&iA(n,e),n.staticViewQueries&&u_(2,n.viewQuery,t);let o=n.components;o!==null&&UU(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[le]&=-5,K_()}}function UU(n,e){for(let t=0;t<e.length;t++)VU(n,e[t])}function BU(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[le]&4096?4096:16,c=db(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[hs]=l;let d=n[mi];return d!==null&&(c[mi]=d.createEmbeddedView(o)),gb(o,c,t),c}finally{De(i)}}function mS(n,e){return!e||e.firstChild===null||Gx(n)}var HU;function mb(n,e){return HU(n,e)}var yi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(yi||{});function EA(n){return(n.flags&32)===32}function xa(n,e,t,r,i){if(r!=null){let o,s=!1;bi(r)?o=r:io(r)&&(s=!0,r=r[_i]);let a=xr(r);n===0&&t!==null?i==null?fA(e,t,a):df(e,t,a,i||null,!0):n===1&&t!==null?df(e,t,a,i||null,!0):n===2?bU(e,a,s):n===3&&e.destroyNode(a),o!=null&&eB(e,n,o,t,i)}}function $U(n,e){IA(n,e),e[_i]=null,e[ar]=null}function zU(n,e,t,r,i,o){r[_i]=i,r[ar]=e,Af(n,r,t,1,i,o)}function IA(n,e){e[gi].changeDetectionScheduler?.notify(9),Af(n,e,e[Tt],2,null,null)}function qU(n){let e=n[Vl];if(!e)return kv(n[ye],n);for(;e;){let t=null;if(io(e))t=e[Vl];else{let r=e[Pn];r&&(t=r)}if(!t){for(;e&&!e[sr]&&e!==n;)io(e)&&kv(e[ye],e),e=e[Zt];e===null&&(e=n),io(e)&&kv(e[ye],e),t=e&&e[sr]}e=t}}function yb(n,e){let t=n[Na],r=t.indexOf(e);t.splice(r,1)}function CA(n,e){if(Ha(e))return;let t=e[Tt];t.destroyNode&&Af(n,e,t,3,null,null),qU(e)}function kv(n,e){if(Ha(e))return;let t=De(null);try{e[le]&=-129,e[le]|=256,e[$n]&&av(e[$n]),GU(n,e),WU(n,e),e[ye].type===1&&e[Tt].destroy();let r=e[hs];if(r!==null&&bi(e[Zt])){r!==e[Zt]&&yb(r,e);let i=e[mi];i!==null&&i.detachView(n)}a_(e)}finally{De(t)}}function WU(n,e){let t=n.cleanup,r=e[Jh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Jh]=null);let i=e[ro];if(i!==null){e[ro]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Zh];if(o!==null){e[Zh]=null;for(let s of o)s.destroy()}}function GU(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ms)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];He(4,a,c);try{c.call(a)}finally{He(5,a,c)}}else{He(4,i,o);try{o.call(i)}finally{He(5,i,o)}}}}}function KU(n,e,t){return QU(n,e.parent,t)}function QU(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[_i];if(Ba(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Rr.None||i===Rr.Emulated)return null}return Nr(r,t)}function YU(n,e,t){return JU(n,e,t)}function XU(n,e,t){return n.type&40?Nr(n,t):null}var JU=XU,yS;function vb(n,e,t,r){let i=KU(n,r,e),o=e[Tt],s=r.parent||e[ar],a=YU(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)gS(o,i,t[c],a,!1);else gS(o,i,t,a,!1);yS!==void 0&&yS(o,r,e,t,i)}function kl(n,e){if(e!==null){let t=e.type;if(t&3)return Nr(e,n);if(t&4)return h_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return kl(n,r);{let i=n[e.index];return bi(i)?h_(-1,i):xr(i)}}else{if(t&128)return kl(n,e.next);if(t&32)return mb(e,n)()||xr(n[e.index]);{let r=DA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ps(n[Tr]);return kl(i,r)}else return kl(n,e.next)}}}return null}function DA(n,e){if(e!==null){let r=n[Tr][ar],i=e.projection;return r.projection[i]}return null}function h_(n,e){let t=Pn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return kl(r,i)}return e[fs]}function _b(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Gl(xr(a),r),t.flags|=2),!EA(t))if(c&8)_b(n,e,t.child,r,i,o,!1),xa(e,n,i,a,o);else if(c&32){let l=mb(t,r),d;for(;d=l();)xa(e,n,i,d,o);xa(e,n,i,a,o)}else c&16?ZU(n,e,r,t,i,o):xa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Af(n,e,t,r,i,o){_b(t,r,n.firstChild,e,i,o,!1)}function ZU(n,e,t,r,i,o){let s=t[Tr],c=s[ar].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];xa(e,n,i,d,o)}else{let l=c,d=s[Zt];Gx(r)&&(l.flags|=128),_b(n,e,l,d,i,o,!0)}}function eB(n,e,t,r,i){let o=t[fs],s=xr(t);o!==s&&xa(e,n,r,o,i);for(let a=Pn;a<t.length;a++){let c=t[a];Af(c[ye],c,n,e,r,o)}}function tB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:yi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=yi.Important),n.setStyle(t,r,i,o))}}function hf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(xr(o)),bi(o)&&nB(o,r);let s=t.type;if(s&8)hf(n,e,t.child,r);else if(s&32){let a=mb(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=DA(e,t);if(Array.isArray(a))r.push(...a);else{let c=ps(e[Tr]);hf(c[ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function nB(n,e){for(let t=Pn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&hf(r[ye],r,i,e)}n[fs]!==n[_i]&&e.push(n[fs])}function TA(n){if(n[Aa]!==null){for(let e of n[Aa])e.impl.addSequence(e);n[Aa].length=0}}var SA=[];function rB(n){return n[$n]??iB(n)}function iB(n){let e=SA.pop()??Object.create(sB);return e.lView=n,e}function oB(n){n.lView[$n]!==n&&(n.lView=null,SA.push(n))}var sB=te(j({},Dl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ql(n.lView)},consumerOnSignalRead(){this.lView[$n]=this}});function aB(n){let e=n[$n]??Object.create(cB);return e.lView=n,e}var cB=te(j({},Dl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ps(n.lView);for(;e&&!xA(e[ye]);)e=ps(e);e&&px(e)},consumerOnSignalRead(){this.lView[$n]=this}});function xA(n){return n.type!==2}function AA(n){if(n[Zh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Zh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[le]&8192)}}var lB=100;function MA(n,e=!0,t=0){let i=n[gi].rendererFactory,o=!1;o||i.begin?.();try{uB(n,t)}catch(s){throw e&&LU(n,s),s}finally{o||i.end?.()}}function uB(n,e){let t=_x();try{tS(!0),f_(n,e);let r=0;for(;Cf(n);){if(r===lB)throw new Y(103,!1);r++,f_(n,1)}}finally{tS(t)}}function dB(n,e,t,r){if(Ha(e))return;let i=e[le],o=!1,s=!1;G_(e);let a=!0,c=null,l=null;o||(xA(n)?(l=rB(e),c=lh(l)):tv()===null?(a=!1,l=aB(e),c=lh(l)):e[$n]&&(av(e[$n]),e[$n]=null));try{fx(e),Z2(n.bindingStartIndex),t!==null&&vA(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let p=n.preOrderCheckHooks;p!==null&&Bh(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Hh(e,p,0,null),Pv(e,0)}if(s||hB(e),AA(e),RA(e,0),n.contentQueries!==null&&iA(n,e),!o)if(d){let p=n.contentCheckHooks;p!==null&&Bh(e,p)}else{let p=n.contentHooks;p!==null&&Hh(e,p,1),Pv(e,1)}pB(n,e);let h=n.components;h!==null&&NA(e,h,0);let f=n.viewQuery;if(f!==null&&u_(2,f,r),!o)if(d){let p=n.viewCheckHooks;p!==null&&Bh(e,p)}else{let p=n.viewHooks;p!==null&&Hh(e,p,2),Pv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Rv]){for(let p of e[Rv])p();e[Rv]=null}o||(TA(e),e[le]&=-73)}catch(d){throw o||ql(e),d}finally{l!==null&&(ov(l,c),a&&oB(l)),K_()}}function RA(n,e){for(let t=Yx(n);t!==null;t=Xx(t))for(let r=Pn;r<t.length;r++){let i=t[r];PA(i,e)}}function hB(n){for(let e=Yx(n);e!==null;e=Xx(e)){if(!(e[le]&2))continue;let t=e[Na];for(let r=0;r<t.length;r++){let i=t[r];px(i)}}}function fB(n,e,t){He(18);let r=Ar(e,n);PA(r,t),He(19,r[yn])}function PA(n,e){$_(n)&&f_(n,e)}function f_(n,e){let r=n[ye],i=n[le],o=n[$n],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&sv(o)),s||=!1,o&&(o.dirty=!1),n[le]&=-9217,s)dB(r,n,r.template,n[yn]);else if(i&8192){AA(n),RA(n,1);let a=r.components;a!==null&&NA(n,a,1),TA(n)}}function NA(n,e,t){for(let r=0;r<e.length;r++)fB(n,e[r],t)}function pB(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)gs(~i);else{let o=i,s=t[++r],a=t[++r];nj(s,o);let c=e[o];He(24,c),a(2,c),He(25,c)}}}finally{gs(-1)}}function bb(n,e){let t=_x()?64:1088;for(n[gi].changeDetectionScheduler?.notify(e);n;){n[le]|=t;let r=ps(n);if(tf(n)&&!r)return n;n=r}return null}function kA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function gB(n,e,t,r=!0){let i=e[ye];if(mB(i,e,n,t),r){let s=h_(t,n),a=e[Tt],c=a.parentNode(n[fs]);c!==null&&zU(i,n[ar],a,e,c,s)}let o=e[Xh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function p_(n,e){if(n.length<=Pn)return;let t=Pn+e,r=n[t];if(r){let i=r[hs];i!==null&&i!==n&&yb(i,r),e>0&&(n[t-1][sr]=r[sr]);let o=Qh(n,Pn+e);$U(r[ye],r);let s=o[mi];s!==null&&s.detachView(o[ye]),r[Zt]=null,r[sr]=null,r[le]&=-129}return r}function mB(n,e,t,r){let i=Pn+r,o=t.length;r>0&&(t[i-1][sr]=e),r<o-Pn?(e[sr]=t[i],QS(t,Pn+r,e)):(t.push(e),e[sr]=null),e[Zt]=t;let s=e[hs];s!==null&&t!==s&&OA(s,e);let a=e[mi];a!==null&&a.insertView(n),Yv(e),e[le]|=128}function OA(n,e){let t=n[Na],r=e[Zt];if(io(r))n[le]|=2;else{let i=r[Zt][Tr];e[Tr]!==i&&(n[le]|=2)}t===null?n[Na]=[e]:t.push(e)}var Bl=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ye];return hf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return Ha(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Zt];if(bi(e)){let t=e[ef],r=t?t.indexOf(this):-1;r>-1&&(p_(e,r),Qh(t,r))}this._attachedToViewContainer=!1}CA(this._lView[ye],this._lView)}onDestroy(e){gx(this._lView,e)}markForCheck(){bb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){Yv(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,MA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=tf(this._lView),t=this._lView[hs];t!==null&&!e&&yb(t,this._lView),IA(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=tf(this._lView),r=this._lView[hs];r!==null&&!t&&OA(r,this._lView),Yv(this._lView)}};var ys=(()=>{class n{static __NG_ELEMENT_ID__=_B}return n})(),yB=ys,vB=class extends yB{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=BU(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Bl(i)}};function _B(){return wb(_n(),ke())}function wb(n,e){return n.type&4?new vB(e,n,qa(n,e)):null}function Eb(n,e,t,r,i){let o=n.data[e];if(o===null)o=bB(n,e,t,r,i),tj()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Y2();o.injectorIndex=s===null?-1:s.injectorIndex}return Wl(o,!0),o}function bB(n,e,t,r,i){let o=yx(),s=vx(),a=s?o:o&&o.parent,c=n.data[e]=EB(n,a,t,e,r,i);return wB(n,c,o,s),c}function wB(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function EB(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return G2()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Kne=new RegExp(`^(\\d+)*(${zj}|${$j})*(.*)`);var IB=()=>null;function vS(n,e){return IB(n,e)}var CB=class{},FA=class{},g_=class{resolveComponentFactory(e){throw Error(`No component factory found for ${mn(e)}.`)}},Mf=class{static NULL=new g_},Oa=class{},oo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>DB()}return n})();function DB(){let n=ke(),e=_n(),t=Ar(e.index,n);return(io(t)?t:n)[Tt]}var TB=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>null})}return n})();var Ov={},m_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=wf(r);let i=this.injector.get(e,Ov,r);return i!==Ov||t===Ov?i:this.parentInjector.get(e,t,r)}};function _S(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=WT(i,a);else if(o==2){let c=a,l=e[++s];r=WT(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function q(n,e=pe.Default){let t=ke();if(t===null)return Z(n,e);let r=_n();return Fx(r,t,ln(n),e)}function LA(){let n="invalid";throw new Error(n)}function VA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,l=null,d=xB(s);d===null?a=s:[a,c,l]=d,RB(n,e,t,a,o,c,l)}o!==null&&r!==null&&SB(t,r,o)}function SB(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}function xB(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Sr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,AB(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function AB(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function MB(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function RB(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let p=r[f];!c&&Sr(p)&&(c=!0,MB(n,t,f)),e_(af(t,e),n,p.type)}LB(t,n.data.length,a);for(let f=0;f<a;f++){let p=r[f];p.providersResolver&&p.providersResolver(p)}let l=!1,d=!1,h=mA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let p=r[f];if(t.mergedAttrs=jl(t.mergedAttrs,p.hostAttrs),NB(n,t,e,h,p),FB(h,p,i),s!==null&&s.has(p)){let[v,_]=s.get(p);t.directiveToIndex.set(p.type,[h,v+t.directiveStart,_+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,h);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let y=p.type.prototype;!l&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),h++}PB(n,t,o)}function PB(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))bS(0,e,i,r),bS(1,e,i,r),ES(e,r,!1);else{let o=t.get(i);wS(0,e,o,r),wS(1,e,o,r),ES(e,r,!0)}}}function bS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),jA(e,o)}}function wS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),jA(e,s)}}function jA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ES(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||lb(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let d of l)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let d=0;d<l.length;d+=2)if(l[d]===e){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function NB(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ls(i.type,!0)),s=new ms(o,Sr(i),q);n.blueprint[r]=s,t[r]=s,kB(n,e,r,mA(n,t,i.hostVars,bs),i)}function kB(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;OB(s)!=a&&s.push(a),s.push(t,r,o)}}function OB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function FB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Sr(e)&&(t[""]=n)}}function LB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function UA(n,e,t,r,i,o,s,a){let c=e.consts,l=nf(c,s),d=Eb(e,n,2,r,l);return o&&VA(e,t,d,nf(c,a),i),d.mergedAttrs=jl(d.mergedAttrs,d.attrs),d.attrs!==null&&_S(d,d.attrs,!1),d.mergedAttrs!==null&&_S(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function BA(n,e){Sx(n,e),sx(e)&&n.queries.elementEnd(e)}var ff=class extends Mf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ds(e);return new Fa(t,this.ngModule)}};function VB(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&xf.SignalBased)!==0};return i&&(o.transform=i),o})}function jB(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function UB(n,e,t){let r=e instanceof Jt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new m_(t,r):t}function BB(n){let e=n.get(Oa,null);if(e===null)throw new Y(407,!1);let t=n.get(TB,null),r=n.get(ka,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function HB(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return hA(e,t,t==="svg"?F2:t==="math"?L2:null)}var Fa=class extends FA{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=VB(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=jB(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=mU(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){He(22);let o=De(null);try{let s=this.componentDef,a=r?["ng-version","19.2.14"]:yU(this.componentDef.selectors[0]),c=ub(0,null,null,1,0,null,null,null,null,[a],null),l=UB(s,i||this.ngModule,e),d=BB(l),h=d.rendererFactory.createRenderer(null,s),f=r?TU(h,r,s.encapsulation,l):HB(s,h),p=db(null,c,null,512|gA(s),null,null,d,h,l,null,rA(f,l,!0));p[Nn]=f,G_(p);let y=null;try{let v=UA(Nn,c,p,"#host",()=>[this.componentDef],!0,0);f&&(pA(h,f,v),Gl(f,p)),fb(c,p,v),oA(c,v,p),BA(c,v),t!==void 0&&$B(v,this.ngContentSelectors,t),y=Ar(v.index,p),p[yn]=y[yn],gb(c,p,null)}catch(v){throw y!==null&&a_(y),a_(p),v}finally{He(23),K_()}return new y_(this.componentType,p)}finally{De(o)}}},y_=class extends CB{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=hx(t[ye],Nn),this.location=qa(this._tNode,t),this.instance=Ar(this._tNode.index,t)[yn],this.hostView=this.changeDetectorRef=new Bl(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=pb(r,i[ye],i,e,t);this.previousInputValues.set(e,t);let s=Ar(r.index,i);bb(s,1)}get injector(){return new cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $B(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var so=(()=>{class n{static __NG_ELEMENT_ID__=zB}return n})();function zB(){let n=_n();return $A(n,ke())}var qB=so,HA=class extends qB{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return qa(this._hostTNode,this._hostLView)}get injector(){return new cs(this._hostTNode,this._hostLView)}get parentInjector(){let e=J_(this._hostTNode,this._hostLView);if(Mx(e)){let t=of(e,this._hostLView),r=rf(e),i=t[ye].data[r+8];return new cs(i,t)}else return new cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=IS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Pn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=vS(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,mS(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!P2(e),a;if(s)a=t;else{let y=t||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let c=s?e:new Fa(ds(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let v=(s?l:this.parentInjector).get(Jt,null);v&&(o=v)}let d=ds(c.componentType??{}),h=vS(this._lContainer,d?.id??null),f=h?.firstChild??null,p=c.create(l,i,f,o);return this.insertImpl(p.hostView,a,mS(this._hostTNode,h)),p}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(U2(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Zt],l=new HA(c,c[ar],c[Zt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return gB(s,i,o,r),e.attachToViewContainerRef(),QS(Fv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=IS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=p_(this._lContainer,t);r&&(Qh(Fv(this._lContainer),t),CA(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=p_(this._lContainer,t);return r&&Qh(Fv(this._lContainer),t)!=null?new Bl(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function IS(n){return n[ef]}function Fv(n){return n[ef]||(n[ef]=[])}function $A(n,e){let t,r=e[n.index];return bi(r)?t=r:(t=kA(r,e,null,n),e[n.index]=t,hb(e,t)),GB(t,e,n,r),new HA(t,n,e)}function WB(n,e){let t=n[Tt],r=t.createComment(""),i=Nr(e,n),o=t.parentNode(i);return df(t,o,r,t.nextSibling(i),!1),r}var GB=YB,KB=()=>!1;function QB(n,e,t){return KB(n,e,t)}function YB(n,e,t,r){if(n[fs])return;let i;t.type&8?i=xr(r):i=WB(e,t),n[fs]=i}var v_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},__=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ib(e,t).matches!==null&&this.queries[t].setDirty()}},b_=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=iH(e):this.predicate=e}},w_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},E_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,XB(t,o)),this.matchTNodeWithReadOption(e,t,$h(t,e,o,!1,!1))}else r===ys?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,$h(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Gn||i===so||i===ys&&t.type&4)this.addMatch(t.index,-2);else{let o=$h(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function XB(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function JB(n,e){return n.type&11?qa(n,e):n.type&4?wb(n,e):null}function ZB(n,e,t,r){return t===-1?JB(e,n):t===-2?eH(n,e,r):Ul(n,n[ye],t,e)}function eH(n,e,t){if(t===Gn)return qa(e,n);if(t===ys)return wb(e,n);if(t===so)return $A(e,n)}function zA(n,e,t,r){let i=e[mi].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(ZB(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function I_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=zA(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let h=Pn;h<d.length;h++){let f=d[h];f[hs]===f[Zt]&&I_(f[ye],f,l,r)}if(d[Na]!==null){let h=d[Na];for(let f=0;f<h.length;f++){let p=h[f];I_(p[ye],p,l,r)}}}}}return r}function tH(n,e){return n[mi].queries[e].queryList}function nH(n,e,t){let r=new s_((t&4)===4);return $2(n,e,r,r.destroy),(e[mi]??=new __).queries.push(new v_(r))-1}function rH(n,e,t){let r=en();return r.firstCreatePass&&(oH(r,new b_(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),nH(r,ke(),e)}function iH(n){return n.split(",").map(e=>e.trim())}function oH(n,e,t){n.queries===null&&(n.queries=new w_),n.queries.track(new E_(e,t))}function Ib(n,e){return n.queries.getByIndex(e)}function sH(n,e){let t=n[ye],r=Ib(t,e);return r.crossesNgTemplate?I_(t,n,e,[]):zA(t,n,r,e)}var La=class{},Cb=class{};var C_=class extends La{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ff(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=JS(e);this._bootstrapComponents=uA(o.bootstrap),this._r3Injector=jx(e,t,[{provide:La,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver},...r],mn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},D_=class extends Cb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new C_(this.moduleType,e,[])}};var pf=class extends La{injector;componentFactoryResolver=new ff(this);instance=null;constructor(e){super();let t=new Ll([...e.providers,{provide:La,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver}],e.parent||U_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kl(n,e,t=null){return new pf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var aH=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ZS(!1,t.type),i=r.length>0?Kl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(Z(Jt))})}return n})();function we(n){return $l(()=>{let e=WA(n),t=te(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Kx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(aH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rr.Emulated,styles:n.styles||Hn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Qa("NgStandalone"),GA(t);let r=n.dependencies;return t.directiveDefs=CS(r,!1),t.pipeDefs=CS(r,!0),t.id=hH(t),t})}function cH(n){return ds(n)||_2(n)}function lH(n){return n!==null}function Kn(n){return $l(()=>({type:n.type,bootstrap:n.bootstrap||Hn,declarations:n.declarations||Hn,imports:n.imports||Hn,exports:n.exports||Hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uH(n,e){if(n==null)return us;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=xf.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function dH(n){if(n==null)return us;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function et(n){return $l(()=>{let e=WA(n);return GA(e),e})}function qA(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function WA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||us,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Hn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uH(n.inputs,e),outputs:dH(n.outputs),debugInfo:null}}function GA(n){n.features?.forEach(e=>e(n))}function CS(n,e){if(!n)return null;let t=e?b2:cH;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(lH)}function hH(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fH(n){return Object.getPrototypeOf(n.prototype).constructor}function bn(n){let e=fH(n.type),t=!0,r=[n];for(;e;){let i;if(Sr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Lv(n.inputs),s.declaredInputs=Lv(n.declaredInputs),s.outputs=Lv(n.outputs);let a=i.hostBindings;a&&vH(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&mH(n,c),l&&yH(n,l),pH(n,i),QV(n.outputs,i.outputs),Sr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===bn&&(t=!1)}}e=Object.getPrototypeOf(e)}gH(r)}function pH(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function gH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=jl(i.hostAttrs,t=jl(t,i.hostAttrs))}}function Lv(n){return n===us?{}:n===Hn?[]:n}function mH(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function yH(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function vH(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function KA(n){return bH(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function _H(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bH(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Rf(n,e,t){return n[e]=t}function vi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function gf(n,e,t,r){let i=vi(n,e,t);return vi(n,e+1,r)||i}function wH(n,e,t,r,i){let o=gf(n,e,t,r);return vi(n,e+2,i)||o}function EH(n,e,t,r,i,o){let s=gf(n,e,t,r);return gf(n,e+2,i,o)||s}function IH(n,e,t,r,i,o,s,a,c){let l=e.consts,d=Eb(e,n,4,s||null,a||null);mx()&&VA(e,t,d,nf(l,c),wA),d.mergedAttrs=jl(d.mergedAttrs,d.attrs),Sx(e,d);let h=d.tView=ub(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function CH(n,e,t,r,i,o,s,a,c,l){let d=t+Nn,h=e.firstCreatePass?IH(d,e,n,r,i,o,s,a,c):e.data[d];Wl(h,!1);let f=DH(e,n,h,t);Y_()&&vb(e,n,f,h),Gl(f,n);let p=kA(f,n,f,h);return n[d]=p,hb(n,p),QB(p,h,n),B_(h)&&fb(e,n,h),c!=null&&_A(n,h,l),h}function ne(n,e,t,r,i,o,s,a){let c=ke(),l=en(),d=nf(l.consts,o);return CH(c,l,n,e,t,r,i,d,s,a),ne}var DH=TH;function TH(n,e,t,r){return X_(!0),e[Tt].createComment("")}var QA=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var YA=new X("");var SH=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new T_})}return n})(),T_=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function ws(n){return!!n&&typeof n.then=="function"}function XA(n){return!!n&&typeof n.subscribe=="function"}var JA=new X("");function Db(n){return ja([{provide:JA,multi:!0,useValue:n}])}var ZA=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=$(JA,{optional:!0})??[];injector=$(zn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=vn(this.injector,i);if(ws(o))t.push(o);else if(XA(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pf=new X("");function xH(){lv(()=>{throw new Y(600,!1)})}function AH(n){return n.isBoundToModule}var MH=10;var vs=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=$(Rj);afterRenderManager=$(nA);zonelessEnabled=$(eb);rootEffectScheduler=$(SH);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ht;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=$(Ei).hasPendingTasks.pipe(ge(t=>!t));constructor(){$(Ka,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=$(Jt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=zn.NULL){He(10);let o=t instanceof FA;if(!this._injector.get(ZA).done){let p="";throw new Y(405,p)}let a;o?a=t:a=this._injector.get(Mf).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=AH(a)?void 0:this._injector.get(La),l=r||a.selector,d=a.create(i,[],l,c),h=d.location.nativeElement,f=d.injector.get(YA,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),zh(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),He(11,d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){He(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(sb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Y(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,De(t),this.afterTick.next(),He(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Oa,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<MH;)He(14),this.synchronizeOnce(),He(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)RH(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Cf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;zh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Pf,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function RH(n,e,t,r){if(!t&&!Cf(n))return;MA(n,e,t&&!r?0:1)}function Ya(n,e,t,r){let i=ke(),o=Tf();if(vi(i,o,e)){let s=en(),a=Q_();kU(a,i,n,e,t,r)}return Ya}function PH(n,e,t,r){return vi(n,Tf(),t)?e+bf(t)+r:bs}function jh(n,e){return n<<17|e<<2}function _s(n){return n>>17&32767}function NH(n){return(n&2)==2}function kH(n,e){return n&131071|e<<17}function S_(n){return n|2}function Va(n){return(n&131068)>>2}function Vv(n,e){return n&-131069|e<<2}function OH(n){return(n&1)===1}function x_(n){return n|1}function FH(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_s(s),c=Va(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||zl(h,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let f=_s(n[a+1]);n[r+1]=jh(f,a),f!==0&&(n[f+1]=Vv(n[f+1],r)),n[a+1]=kH(n[a+1],r)}else n[r+1]=jh(a,0),a!==0&&(n[a+1]=Vv(n[a+1],r)),a=r;else n[r+1]=jh(c,0),a===0?a=r:n[c+1]=Vv(n[c+1],r),c=r;l&&(n[r+1]=S_(n[r+1])),DS(n,d,r,!0),DS(n,d,r,!1),LH(e,d,n,r,o),s=jh(a,c),o?e.classBindings=s:e.styleBindings=s}function LH(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&zl(o,e)>=0&&(t[r+1]=x_(t[r+1]))}function DS(n,e,t,r){let i=n[t+1],o=e===null,s=r?_s(i):Va(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];VH(c,e)&&(a=!0,n[s+1]=r?x_(l):S_(l)),s=r?_s(l):Va(l)}a&&(n[t+1]=r?S_(i):x_(i))}function VH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?zl(n,e)>=0:!1}function W(n,e,t){let r=ke(),i=Tf();if(vi(r,i,e)){let o=en(),s=Q_();bA(o,s,r,n,e,r[Tt],t,!1)}return W}function TS(n,e,t,r,i){pb(e,n,t,i?"class":"style",r)}function Nf(n,e){return jH(n,e,null,!0),Nf}function jH(n,e,t,r){let i=ke(),o=en(),s=ej(2);if(o.firstUpdatePass&&BH(o,n,s,r),e!==bs&&vi(i,s,e)){let a=o.data[$a()];WH(o,a,i,i[Tt],n,i[s+1]=GH(e,t),r,s)}}function UH(n,e){return e>=n.expandoStartIndex}function BH(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[$a()],s=UH(n,t);KH(o,r)&&e===null&&!s&&(e=!1),e=HH(i,o,e,r),FH(i,o,e,t,s,r)}}function HH(n,e,t,r){let i=ij(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=jv(null,n,e,t,r),t=Hl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=jv(i,n,e,t,r),o===null){let c=$H(n,e,r);c!==void 0&&Array.isArray(c)&&(c=jv(null,n,e,c[1],r),c=Hl(c,e.attrs,r),zH(n,e,r,c))}else o=qH(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function $H(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Va(r)!==0)return n[_s(r)]}function zH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[_s(i)]=r}function qH(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Hl(r,s,t)}return Hl(r,e.attrs,t)}function jv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Hl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Hl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),y2(n,s,t?!0:e[++o]))}return n===void 0?null:n}function WH(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=OH(l)?SS(c,e,t,i,Va(l),s):void 0;if(!mf(d)){mf(o)||NH(l)&&(o=SS(c,null,t,i,a,s));let h=dx($a(),t);tB(r,s,h,i,o)}}function SS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,h=d===null,f=t[i+1];f===bs&&(f=h?Hn:void 0);let p=h?Av(f,r):d===r?f:void 0;if(l&&!mf(p)&&(p=Av(c,r)),mf(p)&&(a=p,s))return a;let y=n[i+1];i=s?_s(y):Va(y)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Av(c,r))}return a}function mf(n){return n!==void 0}function GH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=mn(Sf(n)))),n}function KH(n,e){return(n.flags&(e?8:16))!==0}function A(n,e,t,r){let i=ke(),o=en(),s=Nn+n,a=i[Tt],c=o.firstCreatePass?UA(s,o,i,e,wA,mx(),t,r):o.data[s],l=QH(o,i,c,a,e,n);i[s]=l;let d=B_(c);return Wl(c,!0),pA(a,l,c),!EA(c)&&Y_()&&vb(o,i,l,c),(z2()===0||d)&&Gl(l,i),q2(),d&&(fb(o,i,c),oA(o,c,i)),r!==null&&_A(i,c),A}function S(){let n=_n();vx()?X2():(n=n.parent,Wl(n,!1));let e=n;K2(e)&&Q2(),W2();let t=en();return t.firstCreatePass&&BA(t,e),e.classesWithoutHost!=null&&uj(e)&&TS(t,e,ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&dj(e)&&TS(t,e,ke(),e.stylesWithoutHost,!1),S}function se(n,e,t,r){return A(n,e,t,r),S(),se}var QH=(n,e,t,r,i,o)=>(X_(!0),hA(r,i,aj()));function St(){return ke()}var os=void 0;function YH(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var XH=["en",[["a","p"],["AM","PM"],os],[["AM","PM"],os,os],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],os,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],os,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",os,"{1} 'at' {0}",os],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",YH],Uv={};function kf(n){let e=JH(n),t=xS(e);if(t)return t;let r=e.split("-")[0];if(t=xS(r),t)return t;if(r==="en")return XH;throw new Y(701,!1)}function xS(n){return n in Uv||(Uv[n]=ss.ng&&ss.ng.common&&ss.ng.common.locales&&ss.ng.common.locales[n]),Uv[n]}var Es=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Es||{});function JH(n){return n.toLowerCase().replace(/_/g,"-")}var yf="en-US",ZH="USD";var e4=yf;function t4(n){typeof n=="string"&&(e4=n.toLowerCase().replace(/_/g,"-"))}function AS(n,e,t){return function r(i){if(i===Function)return t;let o=Ba(n)?Ar(n.index,e):e;bb(o,5);let s=e[yn],a=MS(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=MS(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function MS(n,e,t,r){let i=De(null);try{return He(6,e,t),t(r)!==!1}catch(o){return n4(n,o),!1}finally{He(7,e,t),De(i)}}function n4(n,e){let t=n[Pa],r=t?t.get(Mr,null):null;r&&r.handleError(e)}function RS(n,e,t,r,i,o){let s=e[t],a=e[ye],l=a.data[t].outputs[r],d=s[l],h=a.firstCreatePass?q_(a):null,f=z_(e),p=d.subscribe(o),y=f.length;f.push(o,p),h&&h.push(i,n.index,y,-(y+1))}function ee(n,e,t,r){let i=ke(),o=en(),s=_n();return eM(o,i,i[Tt],s,n,e,r),ee}function r4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Jh],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function eM(n,e,t,r,i,o,s){let a=B_(r),l=n.firstCreatePass?q_(n):null,d=z_(e),h=!0;if(r.type&3||s){let f=Nr(r,e),p=s?s(f):f,y=d.length,v=s?T=>s(xr(T[r.index])):r.index,_=null;if(!s&&a&&(_=r4(n,e,i,r.index)),_!==null){let T=_.__ngLastListenerFn__||_;T.__ngNextListenerFn__=o,_.__ngLastListenerFn__=o,h=!1}else{o=AS(r,e,o),Jj(e,p,i,o);let T=t.listen(p,i,o);d.push(o,T),l&&l.push(i,v,y,y+1)}}else o=AS(r,e,o);if(h){let f=r.outputs?.[i],p=r.hostDirectiveOutputs?.[i];if(p&&p.length)for(let y=0;y<p.length;y+=2){let v=p[y],_=p[y+1];RS(r,e,v,_,i,o)}if(f&&f.length)for(let y of f)RS(r,e,y,i,i,o)}}function me(n=1){return sj(n)}function ao(n,e,t){rH(n,e,t)}function Ii(n){let e=ke(),t=en(),r=bx();W_(r+1);let i=Ib(t,r);if(n.dirty&&j2(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=sH(e,r);n.reset(o,kj),n.notifyOnChanges()}return!0}return!1}function Ci(){return tH(ke(),bx())}function Of(n){let e=J2();return H_(e,Nn+n)}function k(n,e=""){let t=ke(),r=en(),i=n+Nn,o=r.firstCreatePass?Eb(r,i,1,e,null):r.data[i],s=i4(r,t,o,e,n);t[i]=s,Y_()&&vb(r,t,s,o),Wl(o,!1)}var i4=(n,e,t,r,i)=>(X_(!0),vU(e[Tt],r));function je(n){return lt("",n,""),je}function lt(n,e,t){let r=ke(),i=PH(r,n,e,t);return i!==bs&&o4(r,$a(),i),lt}function o4(n,e,t){let r=dx(e,n);_U(n[Tt],r,t)}function Rt(n,e,t){Wx(e)&&(e=e());let r=ke(),i=Tf();if(vi(r,i,e)){let o=en(),s=Q_();bA(o,s,r,n,e,r[Tt],t,!1)}return Rt}function zt(n,e){let t=Wx(n);return t&&n.set(e),t}function Pt(n,e){let t=ke(),r=en(),i=_n();return eM(r,t,t[Tt],i,n,e),Pt}function s4(n,e,t){let r=en();if(r.firstCreatePass){let i=Sr(n);A_(t,r.data,r.blueprint,i,!0),A_(e,r.data,r.blueprint,i,!1)}}function A_(n,e,t,r,i){if(n=ln(n),Array.isArray(n))for(let o=0;o<n.length;o++)A_(n[o],e,t,r,i);else{let o=en(),s=ke(),a=_n(),c=Ra(n)?n:ln(n.provide),l=nx(n),d=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(Ra(n)||!n.multi){let p=new ms(l,i,q),y=Hv(c,e,i?d:d+f,h);y===-1?(e_(af(a,s),o,c),Bv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[y]=p,s[y]=p)}else{let p=Hv(c,e,d+f,h),y=Hv(c,e,d,d+f),v=p>=0&&t[p],_=y>=0&&t[y];if(i&&!_||!i&&!v){e_(af(a,s),o,c);let T=l4(i?c4:a4,t.length,i,r,l);!i&&_&&(t[y].providerFactory=T),Bv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(T),s.push(T)}else{let T=tM(t[i?y:p],l,!i&&r);Bv(o,n,p>-1?p:y,T)}!i&&r&&_&&t[y].componentProviders++}}}function Bv(n,e,t,r){let i=Ra(e),o=D2(e);if(i||o){let c=(o?ln(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function tM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Hv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function a4(n,e,t,r,i){return M_(this.multi,[])}function c4(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Ul(r,r[ye],this.providerFactory.index,i);s=c.slice(0,a),M_(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],M_(o,s);return s}function M_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function l4(n,e,t,r,i){let o=new ms(n,t,q);return o.multi=[],o.index=e,o.componentProviders=0,tM(o,i,r&&!t),o}function kr(n,e=[]){return t=>{t.providersResolver=(r,i)=>s4(r,i?i(n):n,e)}}function co(n,e,t,r){return u4(ke(),Df(),n,e,t,r)}function lo(n,e,t,r,i,o){return h4(ke(),Df(),n,e,t,r,i,o)}function Ff(n,e){let t=n[e];return t===bs?void 0:t}function u4(n,e,t,r,i,o){let s=e+t;return vi(n,s,i)?Rf(n,s+1,o?r.call(o,i):r(i)):Ff(n,s+1)}function d4(n,e,t,r,i,o,s){let a=e+t;return gf(n,a,i,o)?Rf(n,a+2,s?r.call(s,i,o):r(i,o)):Ff(n,a+2)}function h4(n,e,t,r,i,o,s,a){let c=e+t;return wH(n,c,i,o,s)?Rf(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):Ff(n,c+3)}function f4(n,e,t,r,i,o,s,a,c){let l=e+t;return EH(n,l,i,o,s,a)?Rf(n,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):Ff(n,l+4)}function kn(n,e){let t=en(),r,i=n+Nn;t.firstCreatePass?(r=p4(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ls(r.type,!0)),s,a=gn(q);try{let c=sf(!1),l=o();return sf(c),V2(t,ke(),i,l),l}finally{gn(a)}}function p4(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Xa(n,e,t,r){let i=n+Nn,o=ke(),s=H_(o,i);return nM(o,i)?d4(o,Df(),e,s.transform,t,r,s):s.transform(t,r)}function Is(n,e,t,r,i,o){let s=n+Nn,a=ke(),c=H_(a,s);return nM(a,s)?f4(a,Df(),e,c.transform,t,r,i,o,c):c.transform(t,r,i,o)}function nM(n,e){return n[ye].data[e].pure}var R_=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},rM=(()=>{class n{compileModuleSync(t){return new D_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=JS(t),o=uA(i.declarations).reduce((s,a)=>{let c=ds(a);return c&&s.push(new Fa(c)),s},[]);return new R_(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g4=(()=>{class n{zone=$(ct);changeDetectionScheduler=$(ka);applicationRef=$(vs);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),m4=new X("",{factory:()=>!1});function iM({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ct(te(j({},sM()),{scheduleInRootZone:t})),[{provide:ct,useFactory:n},{provide:Fl,multi:!0,useFactory:()=>{let r=$(g4,{optional:!0});return()=>r.initialize()}},{provide:Fl,multi:!0,useFactory:()=>{let r=$(y4);return()=>{r.initialize()}}},e===!0?{provide:Bx,useValue:!0}:[],{provide:Hx,useValue:t??Ux}]}function oM(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=iM({ngZoneFactory:()=>{let i=sM(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Qa("NgZone_CoalesceEvent"),new ct(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return ja([{provide:m4,useValue:!0},{provide:eb,useValue:!1},r])}function sM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var y4=(()=>{class n{subscription=new mt;initialized=!1;zone=$(ct);pendingTasks=$(Ei);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ct.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ct.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var v4=(()=>{class n{appRef=$(vs);taskService=$(Ei);ngZone=$(ct);zonelessEnabled=$(eb);tracing=$(Ka,{optional:!0});disableScheduling=$(Bx,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(lf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(Hx,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof o_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?aS:$x;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(lf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _4(){return typeof $localize<"u"&&$localize.locale||yf}var Lf=new X("",{providedIn:"root",factory:()=>$(Lf,pe.Optional|pe.SkipSelf)||_4()}),aM=new X("",{providedIn:"root",factory:()=>ZH});var P_=new X(""),b4=new X("");function Pl(n){return!n.moduleRef}function w4(n){let e=Pl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ct);return t.run(()=>{Pl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Mr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Pl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(P_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(P_);s.add(o),n.moduleRef.onDestroy(()=>{zh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return I4(r,t,()=>{let o=e.get(ZA);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Lf,yf);if(t4(s||yf),!e.get(b4,!0))return Pl(n)?e.get(vs):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pl(n)){let c=e.get(vs);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return E4(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function E4(n,e){let t=n.injector.get(vs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}function I4(n,e,t){try{let r=t();return ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var qh=null;function C4(n=[],e){return zn.create({name:e,providers:[{provide:Ef,useValue:"platform"},{provide:P_,useValue:new Set([()=>qh=null])},...n]})}function D4(n=[]){if(qh)return qh;let e=C4(n);return qh=e,xH(),T4(e),e}function T4(n){let e=n.get(ib,null);vn(n,()=>{e?.forEach(t=>t())})}var cr=(()=>{class n{static __NG_ELEMENT_ID__=S4}return n})();function S4(n){return x4(_n(),ke(),(n&16)===16)}function x4(n,e,t){if(Ba(n)&&!t){let r=Ar(n.index,e);return new Bl(r,r)}else if(n.type&175){let r=e[Tr];return new Bl(r,e)}return null}var N_=class{constructor(){}supports(e){return KA(e)}create(e){return new k_(e)}},A4=(n,e)=>e,k_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||A4}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<PS(r,i,o)?t:r,a=PS(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let f=0;f<l;f++){let p=f<o.length?o[f]:o[f]=0,y=p+f;d<=y&&y<l&&(o[f]=p+1)}let h=s.previousIndex;o[h]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!KA(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,_H(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new O_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},O_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},F_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},vf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new F_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function PS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function NS(){return new Tb([new N_])}var Tb=(()=>{class n{factories;static \u0275prov=K({token:n,providedIn:"root",factory:NS});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||NS()),deps:[[n,new f2,new h2]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();function cM(n){He(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=D4(r),o=[iM({}),{provide:ka,useExisting:v4},...t||[]],s=new pf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return w4({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{He(9)}}function uo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Or(n){return hv(n)}function Ja(n,e){return cv(n,e?.equal)}var kS=class{[Bn];constructor(e){this[Bn]=e}destroy(){this[Bn].destroy()}};function lM(n){let e=ds(n);if(!e)return null;let t=new Fa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var vt=new X("");var hM=null;function Qn(){return hM}function Sb(n){hM??=n}var Ql=class{},Yl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>$(fM),providedIn:"platform"})}return n})(),xb=new X(""),fM=(()=>{class n extends Yl{_location;_history;_doc=$(vt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qn().getBaseHref(this._doc)}onPopState(t){let r=Qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Vf(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function uM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function lr(n){return n&&n[0]!=="?"?`?${n}`:n}var ur=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>$(Uf),providedIn:"root"})}return n})(),jf=new X(""),Uf=(()=>{class n extends ur{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vf(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+lr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+lr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+lr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(Yl),Z(jf,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fr=(()=>{class n{_subject=new ht;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=P4(uM(dM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+lr(r))}normalize(t){return n.stripTrailingSlash(R4(this._basePath,dM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=lr;static joinWithSlash=Vf;static stripTrailingSlash=uM;static \u0275fac=function(r){return new(r||n)(Z(ur))};static \u0275prov=K({token:n,factory:()=>M4(),providedIn:"root"})}return n})();function M4(){return new Fr(Z(ur))}function R4(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function dM(n){return n.replace(/\/index.html$/,"")}function P4(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Pb=(()=>{class n extends ur{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Vf(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+lr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+lr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(Yl),Z(jf,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),_M={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Nb=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Nb||{});var Lr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Za(n,e){let t=kf(n),r=t[Es.NumberSymbols][e];if(typeof r>"u"){if(e===Lr.CurrencyDecimal)return t[Es.NumberSymbols][Lr.Decimal];if(e===Lr.CurrencyGroup)return t[Es.NumberSymbols][Lr.Group]}return r}function bM(n,e){return kf(n)[Es.NumberFormats][e]}function N4(n){return kf(n)[Es.Currencies]}function wM(n,e,t="en"){let r=N4(t)[n]||_M[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var k4=2;function EM(n){let e,t=_M[n];return t&&(e=t[2]),typeof e=="number"?e:k4}var O4=/^(\d+)?\.((\d+)(-(\d+))?)?$/,pM=22,Bf=".",Xl="0",F4=";",L4=",",Ab="#",gM="\xA4";function V4(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Za(t,Lr.Infinity);else{let l=B4(n);s&&(l=U4(l));let d=e.minInt,h=e.minFrac,f=e.maxFrac;if(o){let P=o.match(O4);if(P===null)throw new Error(`${o} is not a valid digit info`);let O=P[1],U=P[3],L=P[5];O!=null&&(d=Mb(O)),U!=null&&(h=Mb(U)),L!=null?f=Mb(L):U!=null&&h>f&&(f=h)}H4(l,h,f);let p=l.digits,y=l.integerLen,v=l.exponent,_=[];for(c=p.every(P=>!P);y<d;y++)p.unshift(0);for(;y<0;y++)p.unshift(0);y>0?_=p.splice(y,p.length):(_=p,p=[0]);let T=[];for(p.length>=e.lgSize&&T.unshift(p.splice(-e.lgSize,p.length).join(""));p.length>e.gSize;)T.unshift(p.splice(-e.gSize,p.length).join(""));p.length&&T.unshift(p.join("")),a=T.join(Za(t,r)),_.length&&(a+=Za(t,i)+_.join("")),v&&(a+=Za(t,Lr.Exponential)+"+"+v)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function IM(n,e,t,r,i){let o=bM(e,Nb.Currency),s=j4(o,Za(e,Lr.MinusSign));return s.minFrac=EM(r),s.maxFrac=s.minFrac,V4(n,s,e,Lr.CurrencyGroup,Lr.CurrencyDecimal,i).replace(gM,t).replace(gM,"").trim()}function j4(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(F4),i=r[0],o=r[1],s=i.indexOf(Bf)!==-1?i.split(Bf):[i.substring(0,i.lastIndexOf(Xl)+1),i.substring(i.lastIndexOf(Xl)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(Ab));for(let d=0;d<c.length;d++){let h=c.charAt(d);h===Xl?t.minFrac=t.maxFrac=d+1:h===Ab?t.maxFrac=d+1:t.posSuf+=h}let l=a.split(L4);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,h=o.indexOf(Ab);t.negPre=o.substring(0,h).replace(/'/g,""),t.negSuf=o.slice(h+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function U4(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function B4(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Bf))>-1&&(e=e.replace(Bf,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Xl;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Xl;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>pM&&(r=r.splice(0,pM-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function H4(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,d=r.reduceRight(function(h,f,p,y){return f=f+h,y[p]=f<10?f:f-10,c&&(y[p]===0&&p>=l?y.pop():c=!1),f>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function Mb(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Rb=/\s+/,mM=[],Di=(()=>{class n{_ngEl;_renderer;initialClasses=mM;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Rb):mM}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Rb):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Rb).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(q(Gn),q(oo))};static \u0275dir=et({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Hf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Hf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),yM(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);yM(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(q(so),q(ys),q(Tb))};static \u0275dir=et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function yM(n,e){n.context.$implicit=e.item}var pt=(()=>{class n{_viewContainer;_context=new $f;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vM(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vM(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(q(so),q(ys))};static \u0275dir=et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),$f=class{$implicit=null;ngIf=null};function vM(n,e){if(n&&!n.createEmbeddedView)throw new Y(2020,!1)}function $4(n,e){return new Y(2100,!1)}var Ti=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!z4(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=wM(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=q4(t);return IM(c,s,a,r,o)}catch(c){throw $4(n,c.message)}}static \u0275fac=function(r){return new(r||n)(q(Lf,16),q(aM,16))};static \u0275pipe=qA({name:"currency",type:n,pure:!0})}return n})();function z4(n){return!(n==null||n===""||n!==n)}function q4(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Le=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=Wn({})}return n})();function Jl(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var kb="browser",CM="server";function zf(n){return n===CM}var Cs=class{};var DM=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new Ob($(vt),window)})}return n})(),Ob=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=G4(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function G4(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Gf=new X(""),jb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Z(Gf),Z(ct))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Zl=class{_doc;constructor(e){this._doc=e}manager},qf="ng-app-id";function TM(n){for(let e of n)e.remove()}function SM(n,e){let t=e.createElement("style");return t.textContent=n,t}function K4(n,e,t,r){let i=n.head?.querySelectorAll(`style[${qf}="${e}"],link[${qf}="${e}"]`);if(i)for(let o of i)o.removeAttribute(qf),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Lb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Ub=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=zf(o),K4(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,SM);r?.forEach(i=>this.addUsage(i,this.external,Lb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(TM(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])TM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,SM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Lb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(qf,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Z(vt),Z(rb),Z(ob,8),Z(Ga))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Fb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bb=/%COMP%/g;var AM="%COMP%",Q4=`_nghost-${AM}`,Y4=`_ngcontent-${AM}`,X4=!0,J4=new X("",{providedIn:"root",factory:()=>X4});function Z4(n){return Y4.replace(Bb,n)}function e$(n){return Q4.replace(Bb,n)}function MM(n,e){return e.map(t=>t.replace(Bb,n))}var Hb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,l=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=d,this.platformIsServer=zf(a),this.defaultRenderer=new eu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rr.ShadowDom&&(r=te(j({},r),{encapsulation:Rr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Wf?i.applyToHost(t):i instanceof tu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Rr.Emulated:o=new Wf(c,l,r,this.appId,d,s,a,h,f);break;case Rr.ShadowDom:return new Vb(c,l,t,r,s,a,this.nonce,h,f);default:o=new tu(c,l,r,d,s,a,h,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Z(jb),Z(Ub),Z(rb),Z(J4),Z(vt),Z(Ga),Z(ct),Z(ob),Z(Ka,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),eu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Fb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Fb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Fb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(yi.DashCase|yi.Important)?e.style.setProperty(t,r,i&yi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&yi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Qn().getGlobalEventTarget(this.doc,e),!e))throw new Y(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function xM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vb=class extends eu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=MM(i.id,d);for(let f of d){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=f,this.shadowRoot.appendChild(p)}let h=i.getExternalStyles?.();if(h)for(let f of h){let p=Lb(f,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},tu=class extends eu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=l?MM(l,d):d,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Wf=class extends tu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,l,d),this.contentAttr=Z4(d),this.hostAttr=e$(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Kf=class n extends Ql{supportsDOMEvents=!0;static makeCurrent(){Sb(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=t$();return t==null?null:n$(t)}resetBaseElement(){nu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Jl(document.cookie,e)}},nu=null;function t$(){return nu=nu||document.head.querySelector("base"),nu?nu.getAttribute("href"):null}function n$(n){return new URL(n,document.baseURI).pathname}var r$=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),PM=(()=>{class n extends Zl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Z(vt))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),RM=["alt","control","meta","shift"],i$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},o$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},NM=(()=>{class n extends Zl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),RM.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=i$[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),RM.forEach(s=>{if(s!==i){let a=o$[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Z(vt))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function $b(n,e){return cM(j({rootComponent:n},s$(e)))}function s$(n){return{appProviders:[...d$,...n?.providers??[]],platformProviders:u$}}function a$(){Kf.makeCurrent()}function c$(){return new Mr}function l$(){return Zx(document),document}var u$=[{provide:Ga,useValue:kb},{provide:ib,useValue:a$,multi:!0},{provide:vt,useFactory:l$}];var d$=[{provide:Ef,useValue:"root"},{provide:Mr,useFactory:c$},{provide:Gf,useClass:PM,multi:!0,deps:[vt]},{provide:Gf,useClass:NM,multi:!0,deps:[vt]},Hb,Ub,jb,{provide:Oa,useExisting:Hb},{provide:Cs,useClass:r$},[]];var tc=class{},ru=class{},ho=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Yf=class{encodeKey(e){return kM(e)}encodeValue(e){return kM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function h$(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var f$=/%(\d[a-f0-9])/gi,p$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kM(n){return encodeURIComponent(n).replace(f$,(e,t)=>p$[t]??e)}function Qf(n){return`${n}`}var Si=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Yf,e.fromString){if(e.fromObject)throw new Y(2805,!1);this.map=h$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Qf):[Qf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Qf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Qf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Xf=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function g$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function OM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function FM(n){return typeof Blob<"u"&&n instanceof Blob}function LM(n){return typeof FormData<"u"&&n instanceof FormData}function m$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var VM="Content-Type",jM="Accept",BM="X-Request-URL",HM="text/plain",$M="application/json",y$=`${$M}, ${HM}, */*`,ec=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(g$(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ho,this.context??=new Xf,!this.params)this.params=new Si,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||OM(this.body)||FM(this.body)||LM(this.body)||m$(this.body)?this.body:this.body instanceof Si?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||LM(this.body)?null:FM(this.body)?this.body.type||null:OM(this.body)?null:typeof this.body=="string"?HM:this.body instanceof Si?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?$M:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),d)),new n(t,r,s,{params:d,headers:l,context:h,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Ds=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ds||{}),nc=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new ho,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Jf=class n extends nc{constructor(e={}){super(e)}type=Ds.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},iu=class n extends nc{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ds.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ou=class extends nc{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},v$=200,_$=204;function zb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Nt=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof ec)o=t;else{let c;i.headers instanceof ho?c=i.headers:c=new ho(i.headers);let l;i.params&&(i.params instanceof Si?l=i.params:l=new Si({fromObject:i.params})),o=new ec(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ie(o).pipe(Cr(c=>this.handler.handle(c)));if(t instanceof ec||i.observe==="events")return s;let a=s.pipe(Ht(c=>c instanceof iu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ge(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Y(2806,!1);return c.body}));case"blob":return a.pipe(ge(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Y(2807,!1);return c.body}));case"text":return a.pipe(ge(c=>{if(c.body!==null&&typeof c.body!="string")throw new Y(2808,!1);return c.body}));case"json":default:return a.pipe(ge(c=>c.body))}case"response":return a;default:throw new Y(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Si().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,zb(i,r))}post(t,r,i={}){return this.request("POST",t,zb(i,r))}put(t,r,i={}){return this.request("PUT",t,zb(i,r))}static \u0275fac=function(r){return new(r||n)(Z(tc))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var b$=new X("");function zM(n,e){return e(n)}function w$(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function E$(n,e,t){return(r,i)=>vn(t,()=>e(r,o=>n(o,i)))}var qM=new X(""),Wb=new X(""),WM=new X(""),Gb=new X("",{providedIn:"root",factory:()=>!0});function I$(){let n=null;return(e,t)=>{n===null&&(n=($(qM,{optional:!0})??[]).reduceRight(w$,zM));let r=$(Ei);if($(Gb)){let o=r.add();return n(e,t).pipe(no(()=>r.remove(o)))}else return n(e,t)}}var Zf=(()=>{class n extends tc{backend;injector;chain=null;pendingTasks=$(Ei);contributeToStability=$(Gb);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Wb),...this.injector.get(WM,[])]));this.chain=r.reduceRight((i,o)=>E$(i,o,this.injector),zM)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(no(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(Z(ru),Z(Jt))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var C$=/^\)\]\}',?\n/,D$=RegExp(`^${BM}:`,"m");function T$(n){return"responseURL"in n&&n.responseURL?n.responseURL:D$.test(n.getAllResponseHeaders())?n.getResponseHeader(BM):null}var qb=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Y(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ke(r.\u0275loadImpl()):ie(null)).pipe(pn(()=>new Ne(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((v,_)=>s.setRequestHeader(v,_.join(","))),t.headers.has(jM)||s.setRequestHeader(jM,y$),!t.headers.has(VM)){let v=t.detectContentTypeHeader();v!==null&&s.setRequestHeader(VM,v)}if(t.responseType){let v=t.responseType.toLowerCase();s.responseType=v!=="json"?v:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let v=s.statusText||"OK",_=new ho(s.getAllResponseHeaders()),T=T$(s)||t.url;return c=new Jf({headers:_,status:s.status,statusText:v,url:T}),c},d=()=>{let{headers:v,status:_,statusText:T,url:P}=l(),O=null;_!==_$&&(O=typeof s.response>"u"?s.responseText:s.response),_===0&&(_=O?v$:0);let U=_>=200&&_<300;if(t.responseType==="json"&&typeof O=="string"){let L=O;O=O.replace(C$,"");try{O=O!==""?JSON.parse(O):null}catch(B){O=L,U&&(U=!1,O={error:B,text:O})}}U?(o.next(new iu({body:O,headers:v,status:_,statusText:T,url:P||void 0})),o.complete()):o.error(new ou({error:O,headers:v,status:_,statusText:T,url:P||void 0}))},h=v=>{let{url:_}=l(),T=new ou({error:v,status:s.status||0,statusText:s.statusText||"Unknown Error",url:_||void 0});o.error(T)},f=!1,p=v=>{f||(o.next(l()),f=!0);let _={type:Ds.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(_.total=v.total),t.responseType==="text"&&s.responseText&&(_.partialText=s.responseText),o.next(_)},y=v=>{let _={type:Ds.UploadProgress,loaded:v.loaded};v.lengthComputable&&(_.total=v.total),o.next(_)};return s.addEventListener("load",d),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:Ds.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",d),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(Z(Cs))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),GM=new X(""),S$="XSRF-TOKEN",x$=new X("",{providedIn:"root",factory:()=>S$}),A$="X-XSRF-TOKEN",M$=new X("",{providedIn:"root",factory:()=>A$}),su=class{},R$=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Jl(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(Z(vt),Z(x$))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function P$(n,e){let t=n.url.toLowerCase();if(!$(GM)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=$(su).getToken(),i=$(M$);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Kb=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Kb||{});function N$(n,e){return{\u0275kind:n,\u0275providers:e}}function ep(...n){let e=[Nt,qb,Zf,{provide:tc,useExisting:Zf},{provide:ru,useFactory:()=>$(b$,{optional:!0})??$(qb)},{provide:Wb,useValue:P$,multi:!0},{provide:GM,useValue:!0},{provide:su,useClass:R$}];for(let t of n)e.push(...t.\u0275providers);return ja(e)}var UM=new X("");function KM(){return N$(Kb.LegacyInterceptors,[{provide:UM,useFactory:I$},{provide:Wb,useExisting:UM,multi:!0}])}var dr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=Wn({providers:[ep(KM())]})}return n})();var QM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Z(vt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fe="primary",_u=Symbol("RouteTitle"),Zb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xs(n){return new Zb(n)}function rR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function O$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vr(n[t],e[t]))return!1;return!0}function Vr(n,e){let t=n?e0(n):void 0,r=e?e0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!iR(n[i],e[i]))return!1;return!0}function e0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function iR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function oR(n){return n.length>0?n[n.length-1]:null}function vo(n){return Iv(n)?n:ws(n)?Ke(Promise.resolve(n)):ie(n)}var F$={exact:aR,subset:cR},sR={exact:L$,subset:V$,ignored:()=>!0};function YM(n,e,t){return F$[t.paths](n.root,e.root,t.matrixParams)&&sR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function L$(n,e){return Vr(n,e)}function aR(n,e,t){if(!Ts(n.segments,e.segments)||!rp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!aR(n.children[r],e.children[r],t))return!1;return!0}function V$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>iR(n[t],e[t]))}function cR(n,e,t){return lR(n,e,e.segments,t)}function lR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ts(i,t)||e.hasChildren()||!rp(i,t,r))}else if(n.segments.length===t.length){if(!Ts(n.segments,t)||!rp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!cR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ts(n.segments,i)||!rp(n.segments,i,r)||!n.children[fe]?!1:lR(n.children[fe],e,o,r)}}function rp(n,e,t){return e.every((r,i)=>sR[t](n[i].parameters,r.parameters))}var Ur=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){return B$.serialize(this)}},Ve=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ip(this)}},po=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xs(this.parameters),this._parameterMap}toString(){return dR(this)}};function j$(n,e){return Ts(n,e)&&n.every((t,r)=>Vr(t.parameters,e[r].parameters))}function Ts(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function U$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var As=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new go,providedIn:"root"})}return n})(),go=class{parse(e){let t=new n0(e);return new Ur(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${au(e.root,!0)}`,r=z$(e.queryParams),i=typeof e.fragment=="string"?`#${H$(e.fragment)}`:"";return`${t}${r}${i}`}},B$=new go;function ip(n){return n.segments.map(e=>dR(e)).join("/")}function au(n,e){if(!n.hasChildren())return ip(n);if(e){let t=n.children[fe]?au(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${au(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=U$(n,(r,i)=>i===fe?[au(n.children[fe],!1)]:[`${i}:${au(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${ip(n)}/${t[0]}`:`${ip(n)}/(${t.join("//")})`}}function uR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tp(n){return uR(n).replace(/%3B/gi,";")}function H$(n){return encodeURI(n)}function t0(n){return uR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function op(n){return decodeURIComponent(n)}function XM(n){return op(n.replace(/\+/g,"%20"))}function dR(n){return`${t0(n.path)}${$$(n.parameters)}`}function $$(n){return Object.entries(n).map(([e,t])=>`;${t0(e)}=${t0(t)}`).join("")}function z$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${tp(t)}=${tp(i)}`).join("&"):`${tp(t)}=${tp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var q$=/^[^\/()?;#]+/;function Qb(n){let e=n.match(q$);return e?e[0]:""}var W$=/^[^\/()?;=#]+/;function G$(n){let e=n.match(W$);return e?e[0]:""}var K$=/^[^=?&#]+/;function Q$(n){let e=n.match(K$);return e?e[0]:""}var Y$=/^[^&#]+/;function X$(n){let e=n.match(Y$);return e?e[0]:""}var n0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ve([],{}):new Ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Ve(e,t)),r}parseSegment(){let e=Qb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new po(op(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=G$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Qb(this.remaining);i&&(r=i,this.capture(r))}e[op(t)]=op(r)}parseQueryParam(e){let t=Q$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=X$(this.remaining);s&&(r=s,this.capture(r))}let i=XM(t),o=XM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[fe]:new Ve([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function hR(n){return n.segments.length>0?new Ve([],{[fe]:n}):n}function fR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=fR(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ve(n.segments,e);return J$(t)}function J$(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Ve(n.segments.concat(e.segments),e.children)}return n}function mo(n){return n instanceof Ur}function pR(n,e,t=null,r=null){let i=gR(n);return mR(i,e,t,r)}function gR(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Ve(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=hR(r);return e??i}function mR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Yb(i,i,i,t,r);let o=Z$(e);if(o.toRoot())return Yb(i,i,new Ve([],{}),t,r);let s=ez(o,i,n),a=s.processChildren?lu(s.segmentGroup,s.index,o.commands):vR(s.segmentGroup,s.index,o.commands);return Yb(i,s.segmentGroup,a,t,r)}function ap(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function du(n){return typeof n=="object"&&n!=null&&n.outlets}function Yb(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=yR(n,e,t);let a=hR(fR(s));return new Ur(a,o,i)}function yR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=yR(o,e,t)}),new Ve(n.segments,r)}var cp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ap(r[0]))throw new Y(4003,!1);let i=r.find(du);if(i&&i!==oR(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Z$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new cp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new cp(t,e,r)}var oc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function ez(n,e,t){if(n.isAbsolute)return new oc(e,!0,0);if(!t)return new oc(e,!1,NaN);if(t.parent===null)return new oc(t,!0,0);let r=ap(n.commands[0])?0:1,i=t.segments.length-1+r;return tz(t,i,n.numberOfDoubleDots)}function tz(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new oc(r,!1,i-o)}function nz(n){return du(n[0])?n[0].outlets:{[fe]:n}}function vR(n,e,t){if(n??=new Ve([],{}),n.segments.length===0&&n.hasChildren())return lu(n,e,t);let r=rz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ve(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new Ve(n.segments.slice(r.pathIndex),n.children),lu(o,0,i)}else return r.match&&i.length===0?new Ve(n.segments,{}):r.match&&!n.hasChildren()?r0(n,e,t):r.match?lu(n,0,i):r0(n,e,t)}function lu(n,e,t){if(t.length===0)return new Ve(n.segments,{});{let r=nz(t),i={};if(Object.keys(r).some(o=>o!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let o=lu(n.children[fe],e,t);return new Ve(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=vR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ve(n.segments,i)}}function rz(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(du(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ZM(c,l,s))return o;r+=2}else{if(!ZM(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function r0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(du(o)){let c=iz(o.outlets);return new Ve(r,c)}if(i===0&&ap(t[0])){let c=n.segments[e];r.push(new po(c.path,JM(t[0]))),i++;continue}let s=du(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ap(a)?(r.push(new po(s,JM(a))),i+=2):(r.push(new po(s,{})),i++)}return new Ve(r,{})}function iz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=r0(new Ve([],{}),0,r))}),e}function JM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ZM(n,e,t){return n==t.path&&Vr(e,t.parameters)}var sp="imperative",xt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(xt||{}),Fn=class{id;url;constructor(e,t){this.id=e,this.url=t}},yo=class extends Fn{type=xt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},In=class extends Fn{urlAfterRedirects;type=xt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},En=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(En||{}),ac=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ac||{}),jr=class extends Fn{reason;code;type=xt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Br=class extends Fn{reason;code;type=xt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},cc=class extends Fn{error;target;type=xt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hu=class extends Fn{urlAfterRedirects;state;type=xt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lp=class extends Fn{urlAfterRedirects;state;type=xt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},up=class extends Fn{urlAfterRedirects;state;shouldActivate;type=xt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dp=class extends Fn{urlAfterRedirects;state;type=xt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends Fn{urlAfterRedirects;state;type=xt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fp=class{route;type=xt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pp=class{route;type=xt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gp=class{snapshot;type=xt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mp=class{snapshot;type=xt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yp=class{snapshot;type=xt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vp=class{snapshot;type=xt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lc=class{routerEvent;position;anchor;type=xt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},fu=class{},uc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function oz(n,e){return n.providers&&!n._injector&&(n._injector=Kl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hr(n){return n.outlet||fe}function sz(n,e){let t=n.filter(r=>hr(r)===e);return t.push(...n.filter(r=>hr(r)!==e)),t}function bu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var _p=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return bu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ms(this.rootInjector)}},Ms=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new _p(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Z(Jt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=i0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=i0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=o0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return o0(e,this._root).map(t=>t.value)}};function i0(n,e){if(n===e.value)return e;for(let t of e.children){let r=i0(n,t);if(r)return r}return null}function o0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=o0(n,t);if(r.length)return r.unshift(e),r}return[]}var On=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ic(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var pu=class extends bp{snapshot;constructor(e,t){super(e),this.snapshot=t,f0(this,e)}toString(){return this.snapshot.toString()}};function _R(n){let e=az(n),t=new Bt([new po("",{})]),r=new Bt({}),i=new Bt({}),o=new Bt({}),s=new Bt(""),a=new Yn(t,r,o,s,i,fe,n,e.root);return a.snapshot=e.root,new pu(new On(a,[]),e)}function az(n){let e={},t={},r={},i="",o=new Ss([],e,r,i,t,fe,n,null,{});return new gu("",new On(o,[]))}var Yn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ge(l=>l[_u]))??ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>xs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>xs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&wR(i)&&(r.resolve[_u]=i.title),r}var Ss=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[_u]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},gu=class extends bp{url;constructor(e,t){super(t),this.url=e,f0(this,t)}toString(){return bR(this._root)}};function f0(n,e){e.value._routerState=n,e.children.forEach(t=>f0(n,t))}function bR(n){let e=n.children.length>0?` { ${n.children.map(bR).join(", ")} } `:"";return`${n.value}${e}`}function Xb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vr(e.params,t.params)||n.paramsSubject.next(t.params),O$(e.url,t.url)||n.urlSubject.next(t.url),Vr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function s0(n,e){let t=Vr(n.params,e.params)&&j$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||s0(n.parent,e.parent))}function wR(n){return typeof n.title=="string"||n.title===null}var ER=new X(""),wu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=fe;activateEvents=new it;deactivateEvents=new it;attachEvents=new it;detachEvents=new it;routerOutletData=qx(void 0);parentContexts=$(Ms);location=$(so);changeDetector=$(cr);inputBinder=$(Eu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new a0(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=et({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Pr]})}return n})(),a0=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Yn?this.route:e===Ms?this.childContexts:e===ER?this.outletData:this.parent.get(e,t)}},Eu=new X(""),p0=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Rl([r.queryParams,r.params,r.data]).pipe(pn(([o,s,a],c)=>(a=j(j(j({},o),s),a),c===0?ie(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=lM(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),g0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&se(0,"router-outlet")},dependencies:[wu],encapsulation:2})}return n})();function m0(n){let e=n.children&&n.children.map(m0),t=e?te(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=g0),t}function cz(n,e,t){let r=mu(n,e._root,t?t._root:void 0);return new pu(r,e)}function mu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=lz(n,e,t);return new On(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>mu(n,a)),s}}let r=uz(e.value),i=e.children.map(o=>mu(n,o));return new On(r,i)}}function lz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return mu(n,r,i);return mu(n,r)})}function uz(n){return new Yn(new Bt(n.url),new Bt(n.params),new Bt(n.queryParams),new Bt(n.fragment),new Bt(n.data),n.outlet,n.component,n)}var dc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},IR="ngNavigationCancelingError";function Ep(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=mo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CR(!1,En.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function CR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[IR]=!0,t.cancellationCode=e,t}function dz(n){return DR(n)&&mo(n.url)}function DR(n){return!!n&&n[IR]}var hz=(n,e,t,r)=>ge(i=>(new c0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),c0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ic(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ic(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ic(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ic(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new vp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new mp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Xb(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Xb(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ip=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},sc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function fz(n,e,t){let r=n._root,i=e?e._root:null;return cu(r,i,t,[r.value])}function pz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function fc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!BS(n)?n:e.get(n):r}function cu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ic(e);return n.children.forEach(s=>{gz(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>uu(a,t.getContext(s),i)),i}function gz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=mz(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ip(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?cu(n,e,a?a.children:null,r,i):cu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new sc(a.outlet.component,s))}else s&&uu(e,a,i),i.canActivateChecks.push(new Ip(r)),o.component?cu(n,null,a?a.children:null,r,i):cu(n,null,t,r,i);return i}function mz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ts(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ts(n.url,e.url)||!Vr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!s0(n,e)||!Vr(n.queryParams,e.queryParams);case"paramsChange":default:return!s0(n,e)}}function uu(n,e,t){let r=ic(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?uu(s,e.children.getContext(o),t):uu(s,null,t):uu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new sc(e.outlet.component,i)):t.canDeactivateChecks.push(new sc(null,i)):t.canDeactivateChecks.push(new sc(null,i))}function Iu(n){return typeof n=="function"}function yz(n){return typeof n=="boolean"}function vz(n){return n&&Iu(n.canLoad)}function _z(n){return n&&Iu(n.canActivate)}function bz(n){return n&&Iu(n.canActivateChild)}function wz(n){return n&&Iu(n.canDeactivate)}function Ez(n){return n&&Iu(n.canMatch)}function TR(n){return n instanceof di||n?.name==="EmptyError"}var np=Symbol("INITIAL_VALUE");function hc(){return pn(n=>Rl(n.map(e=>e.pipe(fi(1),Sv(np)))).pipe(ge(e=>{for(let t of e)if(t!==!0){if(t===np)return np;if(t===!1||Iz(t))return t}return!0}),Ht(e=>e!==np),fi(1)))}function Iz(n){return mo(n)||n instanceof dc}function Cz(n,e){return ft(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ie(te(j({},t),{guardsResult:!0})):Dz(s,r,i,n).pipe(ft(a=>a&&yz(a)?Tz(r,o,n,e):ie(a)),ge(a=>te(j({},t),{guardsResult:a})))})}function Dz(n,e,t,r){return Ke(n).pipe(ft(i=>Rz(i.component,i.route,t,e,r)),pi(i=>i!==!0,!0))}function Tz(n,e,t,r){return Ke(e).pipe(Cr(i=>Ia(xz(i.route.parent,r),Sz(i.route,r),Mz(n,i.path,t),Az(n,i.route,t))),pi(i=>i!==!0,!0))}function Sz(n,e){return n!==null&&e&&e(new yp(n)),ie(!0)}function xz(n,e){return n!==null&&e&&e(new gp(n)),ie(!0)}function Az(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(o=>Oh(()=>{let s=bu(e)??t,a=fc(o,s),c=_z(a)?a.canActivate(e,n):vn(s,()=>a(e,n));return vo(c).pipe(pi())}));return ie(i).pipe(hc())}function Mz(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>pz(s)).filter(s=>s!==null).map(s=>Oh(()=>{let a=s.guards.map(c=>{let l=bu(s.node)??t,d=fc(c,l),h=bz(d)?d.canActivateChild(r,n):vn(l,()=>d(r,n));return vo(h).pipe(pi())});return ie(a).pipe(hc())}));return ie(o).pipe(hc())}function Rz(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ie(!0);let s=o.map(a=>{let c=bu(e)??i,l=fc(a,c),d=wz(l)?l.canDeactivate(n,e,t,r):vn(c,()=>l(n,e,t,r));return vo(d).pipe(pi())});return ie(s).pipe(hc())}function Pz(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let o=i.map(s=>{let a=fc(s,n),c=vz(a)?a.canLoad(e,t):vn(n,()=>a(e,t));return vo(c)});return ie(o).pipe(hc(),SR(r))}function SR(n){return _v($t(e=>{if(typeof e!="boolean")throw Ep(n,e)}),ge(e=>e===!0))}function Nz(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let o=i.map(s=>{let a=fc(s,n),c=Ez(a)?a.canMatch(e,t):vn(n,()=>a(e,t));return vo(c)});return ie(o).pipe(hc(),SR(r))}var yu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},vu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function rc(n){return wa(new yu(n))}function kz(n){return wa(new Y(4e3,!1))}function Oz(n){return wa(CR(!1,En.GuardRejected))}var l0=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[fe])return kz(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:h,outlet:f,params:p,data:y,title:v}=i,_=vn(o,()=>a({params:p,data:y,queryParams:c,fragment:l,routeConfig:d,url:h,outlet:f,title:v}));if(_ instanceof Ur)throw new vu(_);t=_}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new vu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ur(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ve(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},u0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fz(n,e,t,r,i){let o=xR(n,e,t);return o.matched?(r=oz(e,r),Nz(r,e,t,i).pipe(ge(s=>s===!0?o:j({},u0)))):ie(o)}function xR(n,e,t){if(e.path==="**")return Lz(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},u0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||rR)(t,n,e);if(!i)return j({},u0);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Lz(n){return{matched:!0,parameters:n.length>0?oR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function eR(n,e,t,r){return t.length>0&&Uz(n,t,r)?{segmentGroup:new Ve(e,jz(r,new Ve(t,n.children))),slicedSegments:[]}:t.length===0&&Bz(n,t,r)?{segmentGroup:new Ve(n.segments,Vz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ve(n.segments,n.children),slicedSegments:t}}function Vz(n,e,t,r){let i={};for(let o of t)if(Dp(n,e,o)&&!r[hr(o)]){let s=new Ve([],{});i[hr(o)]=s}return j(j({},r),i)}function jz(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&hr(r)!==fe){let i=new Ve([],{});t[hr(r)]=i}return t}function Uz(n,e,t){return t.some(r=>Dp(n,e,r)&&hr(r)!==fe)}function Bz(n,e,t){return t.some(r=>Dp(n,e,r))}function Dp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Hz(n,e,t){return e.length===0&&!n.children[t]}var d0=class{};function $z(n,e,t,r,i,o,s="emptyOnly"){return new h0(n,e,t,r,i,s,o).recognize()}var zz=31,h0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new l0(this.urlSerializer,this.urlTree)}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=eR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(({children:t,rootSnapshot:r})=>{let i=new On(r,t),o=new gu("",i),s=pR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ss([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(ge(r=>({children:r,rootSnapshot:t})),hi(r=>{if(r instanceof vu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof yu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ge(s=>s instanceof On?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ke(o).pipe(Cr(s=>{let a=r.children[s],c=sz(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Tv((s,a)=>(s.push(...a),s)),to(null),Dv(),ft(s=>{if(s===null)return rc(r);let a=AR(s);return qz(a),ie(a)}))}processSegment(e,t,r,i,o,s,a){return Ke(t).pipe(Cr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(hi(l=>{if(l instanceof yu)return ie(null);throw l}))),pi(c=>!!c),hi(c=>{if(TR(c))return Hz(r,i,o)?ie(new d0):rc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return hr(r)!==s&&(s===fe||!Dp(i,o,r))?rc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):rc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=xR(t,i,o);if(!c)return rc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>zz&&(this.allowRedirects=!1));let p=new Ss(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,tR(i),hr(i),i.component??i._loadedComponent??null,i,nR(i)),y=wp(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let v=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,p,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(ft(_=>this.processSegment(e,r,t,_.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Fz(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(pn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(pn(({routes:l})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:p}=c,y=new Ss(f,h,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,tR(r),hr(r),r.component??r._loadedComponent??null,r,nR(r)),v=wp(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(v.params),y.data=Object.freeze(v.data);let{segmentGroup:_,slicedSegments:T}=eR(t,f,p,l);if(T.length===0&&_.hasChildren())return this.processChildren(d,l,_,y).pipe(ge(O=>new On(y,O)));if(l.length===0&&T.length===0)return ie(new On(y,[]));let P=hr(r)===o;return this.processSegment(d,l,_,T,P?fe:o,!0,y).pipe(ge(O=>new On(y,O instanceof On?[O]:[])))}))):rc(t)))}getChildConfig(e,t,r){return t.children?ie({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ie({routes:t._loadedRoutes,injector:t._loadedInjector}):Pz(e,t,r,this.urlSerializer).pipe(ft(i=>i?this.configLoader.loadChildren(e,t).pipe($t(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Oz(t))):ie({routes:[],injector:e})}};function qz(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function Wz(n){let e=n.value.routeConfig;return e&&e.path===""}function AR(n){let e=[],t=new Set;for(let r of n){if(!Wz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=AR(r.children);e.push(new On(r.value,i))}return e.filter(r=>!t.has(r))}function tR(n){return n.data||{}}function nR(n){return n.resolve||{}}function Gz(n,e,t,r,i,o){return ft(s=>$z(n,e,t,r,s.extractedUrl,i,o).pipe(ge(({state:a,tree:c})=>te(j({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Kz(n,e){return ft(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ie(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of MR(c))s.add(l);let a=0;return Ke(s).pipe(Cr(c=>o.has(c)?Qz(c,r,n,e):(c.data=wp(c,c.parent,n).resolve,ie(void 0))),$t(()=>a++),Ca(1),ft(c=>a===s.size?ie(t):hn))})}function MR(n){let e=n.children.map(t=>MR(t)).flat();return[n,...e]}function Qz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!wR(i)&&(o[_u]=i.title),Yz(o,n,e,r).pipe(ge(s=>(n._resolvedData=s,n.data=wp(n,n.parent,t).resolve,null)))}function Yz(n,e,t,r){let i=e0(n);if(i.length===0)return ie({});let o={};return Ke(i).pipe(ft(s=>Xz(n[s],e,t,r).pipe(pi(),$t(a=>{if(a instanceof dc)throw Ep(new go,a);o[s]=a}))),Ca(1),ge(()=>o),hi(s=>TR(s)?hn:wa(s)))}function Xz(n,e,t,r){let i=bu(e)??r,o=fc(n,i),s=o.resolve?o.resolve(e,t):vn(i,()=>o(e,t));return vo(s)}function Jb(n){return pn(e=>{let t=n(e);return t?Ke(t).pipe(ge(()=>e)):ie(e)})}var y0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[_u]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>$(RR),providedIn:"root"})}return n})(),RR=(()=>{class n extends y0{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Z(QM))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rs=new X("",{providedIn:"root",factory:()=>({})}),Ps=new X(""),Tp=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=$(rM);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ie(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=vo(t.loadComponent()).pipe(ge(NR),$t(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),no(()=>{this.componentLoaders.delete(t)})),i=new ba(r,()=>new ht).pipe(_a());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=PR(r,this.compiler,t,this.onLoadEndListener).pipe(no(()=>{this.childrenLoaders.delete(r)})),s=new ba(o,()=>new ht).pipe(_a());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PR(n,e,t,r){return vo(n.loadChildren()).pipe(ge(NR),ft(i=>i instanceof Cb||Array.isArray(i)?ie(i):Ke(e.compileModuleAsync(i))),ge(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ps,[],{optional:!0,self:!0}).flat()),{routes:s.map(m0),injector:o}}))}function Jz(n){return n&&typeof n=="object"&&"default"in n}function NR(n){return Jz(n)?n.default:n}var Sp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>$(Zz),providedIn:"root"})}return n})(),Zz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v0=new X(""),_0=new X("");function kR(n,e,t){let r=n.get(_0),i=n.get(vt);return n.get(ct).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),e3(n))),{onViewTransitionCreated:c}=r;return c&&vn(n,()=>c({transition:a,from:e,to:t})),s})}function e3(n){return new Promise(e=>{ab({read:()=>setTimeout(e)},{injector:n})})}var b0=new X(""),xp=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ht;transitionAbortSubject=new ht;configLoader=$(Tp);environmentInjector=$(Jt);destroyRef=$(za);urlSerializer=$(As);rootContexts=$(Ms);location=$(Fr);inputBindingEnabled=$(Eu,{optional:!0})!==null;titleStrategy=$(y0);options=$(Rs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=$(Sp);createViewTransition=$(v0,{optional:!0});navigationErrorHandler=$(b0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ie(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new fp(i)),r=i=>this.events.next(new pp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(te(j({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Bt(null),this.transitions.pipe(Ht(r=>r!==null),pn(r=>{let i=!1,o=!1;return ie(r).pipe(pn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",En.SupersededByNewNavigation),hn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?te(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let l="";return this.events.next(new Br(s.id,this.urlSerializer.serialize(s.rawUrl),l,ac.IgnoredSameUrlNavigation)),s.resolve(!1),hn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ie(s).pipe(pn(l=>(this.events.next(new yo(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?hn:Promise.resolve(l))),Gz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),$t(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=te(j({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let d=new hu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=s,y=new yo(l,this.urlSerializer.serialize(d),h,f);this.events.next(y);let v=_R(this.rootComponentType).snapshot;return this.currentTransition=r=te(j({},s),{targetSnapshot:v,urlAfterRedirects:d,extras:te(j({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,ie(r)}else{let l="";return this.events.next(new Br(s.id,this.urlSerializer.serialize(s.extractedUrl),l,ac.IgnoredByUrlHandlingStrategy)),s.resolve(!1),hn}}),$t(s=>{let a=new lp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ge(s=>(this.currentTransition=r=te(j({},s),{guards:fz(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),Cz(this.environmentInjector,s=>this.events.next(s)),$t(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Ep(this.urlSerializer,s.guardsResult);let a=new up(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ht(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",En.GuardRejected),!1)),Jb(s=>{if(s.guards.canActivateChecks.length!==0)return ie(s).pipe($t(a=>{let c=new dp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),pn(a=>{let c=!1;return ie(a).pipe(Kz(this.paramsInheritanceStrategy,this.environmentInjector),$t({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",En.NoDataFromResolver)}}))}),$t(a=>{let c=new hp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Jb(s=>{let a=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe($t(d=>{c.component=d}),ge(()=>{})));for(let d of c.children)l.push(...a(d));return l};return Rl(a(s.targetSnapshot.root)).pipe(to(null),fi(1))}),Jb(()=>this.afterPreactivation()),pn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Ke(c).pipe(ge(()=>r)):ie(r)}),ge(s=>{let a=cz(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=te(j({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),$t(()=>{this.events.next(new fu)}),hz(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),fi(1),$t({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new In(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),xv(this.transitionAbortSubject.pipe($t(s=>{throw s}))),no(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",En.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),hi(s=>{if(this.destroyed)return r.resolve(!1),hn;if(o=!0,DR(s))this.events.next(new jr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),dz(s)?this.events.next(new uc(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new cc(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=vn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof dc){let{message:l,cancellationCode:d}=Ep(this.urlSerializer,c);this.events.next(new jr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,d)),this.events.next(new uc(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return hn}))}))}cancelNavigationTransition(t,r,i){let o=new jr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function t3(n){return n!==sp}var OR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>$(n3),providedIn:"root"})}return n})(),Cp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},n3=(()=>{class n extends Cp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=wi(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FR=(()=>{class n{urlSerializer=$(As);options=$(Rs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=$(Fr);urlHandlingStrategy=$(Sp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ur;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ur?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=_R(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>$(r3),providedIn:"root"})}return n})(),r3=(()=>{class n extends FR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof yo?this.updateStateMemento():t instanceof Br?this.commitTransition(r):t instanceof hu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof fu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof jr&&(t.code===En.GuardRejected||t.code===En.NoDataFromResolver)?this.restoreHistory(r):t instanceof cc?this.restoreHistory(r,!0):t instanceof In&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=j(j({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=j(j({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=wi(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ap(n,e){n.events.pipe(Ht(t=>t instanceof In||t instanceof jr||t instanceof cc||t instanceof Br),ge(t=>t instanceof In||t instanceof Br?0:(t instanceof jr?t.code===En.Redirect||t.code===En.SupersededByNewNavigation:!1)?2:1),Ht(t=>t!==2),fi(1)).subscribe(()=>{e()})}var i3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},o3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=$(QA);stateManager=$(FR);options=$(Rs,{optional:!0})||{};pendingTasks=$(Ei);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=$(xp);urlSerializer=$(As);location=$(Fr);urlHandlingStrategy=$(Sp);_events=new ht;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=$(OR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=$(Ps,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!$(Eu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof jr&&r.code!==En.Redirect&&r.code!==En.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof In)this.navigated=!0;else if(r instanceof uc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||t3(i.source)},s);this.scheduleNavigation(a,sp,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}a3(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(m0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=i?i.snapshot:this.routerState.snapshot.root;h=gR(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return mR(h,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=mo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,sp,null,r)}navigate(t,r={skipLocationChange:!1}){return s3(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},i3):r===!1?i=j({},o3):i=r,mo(t))return YM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return YM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,f)=>{a=h,c=f});let d=this.pendingTasks.add();return Ap(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function s3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function a3(n){return!(n instanceof fu)&&!(n instanceof uc)}var kt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ht;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof In&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(mo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:aA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:mo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(q(Qe),q(Yn),Z_("tabindex"),q(oo),q(Gn),q(ur))};static \u0275dir=et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ee("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ya("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",uo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",uo],replaceUrl:[2,"replaceUrl","replaceUrl",uo],routerLink:"routerLink"},features:[Pr]})}return n})();var Cu=class{};var LR=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ht(t=>t instanceof In),Cr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Kl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ke(i).pipe(Ea())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ie(null);let o=i.pipe(ft(s=>s===null?ie(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ke([o,s]).pipe(Ea())}else return o})}static \u0275fac=function(r){return new(r||n)(Z(Qe),Z(Jt),Z(Cu),Z(Tp))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VR=new X(""),c3=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof In?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Br&&t.code===ac.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){LA()};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function E0(n,...e){return ja([{provide:Ps,multi:!0,useValue:n},[],{provide:Yn,useFactory:jR,deps:[Qe]},{provide:Pf,multi:!0,useFactory:UR},e.map(t=>t.\u0275providers)])}function jR(n){return n.routerState.root}function Du(n,e){return{\u0275kind:n,\u0275providers:e}}function UR(){let n=$(zn);return e=>{let t=n.get(vs);if(e!==t.components[0])return;let r=n.get(Qe),i=n.get(BR);n.get(I0)===1&&r.initialNavigation(),n.get(zR,null,pe.Optional)?.setUpPreloading(),n.get(VR,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var BR=new X("",{factory:()=>new ht}),I0=new X("",{providedIn:"root",factory:()=>1});function HR(){let n=[{provide:I0,useValue:0},Db(()=>{let e=$(zn);return e.get(xb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Qe),o=e.get(BR);Ap(i,()=>{r(!0)}),e.get(xp).afterPreactivation=()=>(r(!0),o.closed?ie(void 0):o),i.initialNavigation()}))})];return Du(2,n)}function $R(){let n=[Db(()=>{$(Qe).setUpLocationChangeListener()}),{provide:I0,useValue:2}];return Du(3,n)}var zR=new X("");function qR(n){return Du(0,[{provide:zR,useExisting:LR},{provide:Cu,useExisting:n}])}function WR(){return Du(8,[p0,{provide:Eu,useExisting:p0}])}function GR(n){Qa("NgRouterViewTransitions");let e=[{provide:v0,useValue:kR},{provide:_0,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Du(9,e)}var KR=[Fr,{provide:As,useClass:go},Qe,Ms,{provide:Yn,useFactory:jR,deps:[Qe]},Tp,[]],fr=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[KR,[],{provide:Ps,multi:!0,useValue:t},[],r?.errorHandler?{provide:b0,useValue:r.errorHandler}:[],{provide:Rs,useValue:r||{}},r?.useHash?u3():d3(),l3(),r?.preloadingStrategy?qR(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?h3(r):[],r?.bindToComponentInputs?WR().\u0275providers:[],r?.enableViewTransitions?GR().\u0275providers:[],f3()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ps,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=Wn({})}return n})();function l3(){return{provide:VR,useFactory:()=>{let n=$(DM),e=$(ct),t=$(Rs),r=$(xp),i=$(As);return t.scrollOffset&&n.setOffset(t.scrollOffset),new c3(i,r,n,e,t)}}}function u3(){return{provide:ur,useClass:Pb}}function d3(){return{provide:ur,useClass:Uf}}function h3(n){return[n.initialNavigation==="disabled"?$R().\u0275providers:[],n.initialNavigation==="enabledBlocking"?HR().\u0275providers:[]]}var w0=new X("");function f3(){return[{provide:w0,useFactory:UR},{provide:Pf,multi:!0,useExisting:w0}]}var n1=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(q(oo),q(Gn))};static \u0275dir=et({type:n})}return n})(),D0=(()=>{class n extends n1{static \u0275fac=(()=>{let t;return function(i){return(t||(t=wi(n)))(i||n)}})();static \u0275dir=et({type:n,features:[bn]})}return n})(),Ru=new X(""),p3={provide:Ru,useExisting:qn(()=>T0),multi:!0},T0=(()=>{class n extends D0{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=wi(n)))(i||n)}})();static \u0275dir=et({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ee("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[kr([p3]),bn]})}return n})(),g3={provide:Ru,useExisting:qn(()=>tn),multi:!0};function m3(){let n=Qn()?Qn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var y3=new X(""),tn=(()=>{class n extends n1{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!m3())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(q(oo),q(Gn),q(y3,8))};static \u0275dir=et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ee("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[kr([g3]),bn]})}return n})();function S0(n){return n==null||x0(n)===0}function x0(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var mc=new X(""),Hp=new X(""),v3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,At=class{static min(e){return r1(e)}static max(e){return _3(e)}static required(e){return i1(e)}static requiredTrue(e){return b3(e)}static email(e){return w3(e)}static minLength(e){return E3(e)}static maxLength(e){return I3(e)}static pattern(e){return C3(e)}static nullValidator(e){return Rp()}static compose(e){return u1(e)}static composeAsync(e){return d1(e)}};function r1(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function _3(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function i1(n){return S0(n.value)?{required:!0}:null}function b3(n){return n.value===!0?null:{required:!0}}function w3(n){return S0(n.value)||v3.test(n.value)?null:{email:!0}}function E3(n){return e=>{let t=e.value?.length??x0(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function I3(n){return e=>{let t=e.value?.length??x0(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function C3(n){if(!n)return Rp;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(S0(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Rp(n){return null}function o1(n){return n!=null}function s1(n){return ws(n)?Ke(n):n}function a1(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function c1(n,e){return e.map(t=>t(n))}function D3(n){return!n.validate}function l1(n){return n.map(e=>D3(e)?e:t=>e.validate(t))}function u1(n){if(!n)return null;let e=n.filter(o1);return e.length==0?null:function(t){return a1(c1(t,e))}}function A0(n){return n!=null?u1(l1(n)):null}function d1(n){if(!n)return null;let e=n.filter(o1);return e.length==0?null:function(t){let r=c1(t,e).map(s1);return Cv(r).pipe(ge(a1))}}function M0(n){return n!=null?d1(l1(n)):null}function QR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function h1(n){return n._rawValidators}function f1(n){return n._rawAsyncValidators}function C0(n){return n?Array.isArray(n)?n:[n]:[]}function Pp(n,e){return Array.isArray(n)?n.includes(e):n===e}function YR(n,e){let t=C0(e);return C0(n).forEach(i=>{Pp(t,i)||t.push(i)}),t}function XR(n,e){return C0(e).filter(t=>!Pp(n,t))}var Np=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=A0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=M0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},xi=class extends Np{name;get formDirective(){return null}get path(){return null}},Ns=class extends Np{_parent=null;name=null;valueAccessor=null},kp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},T3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Yse=te(j({},T3),{"[class.ng-submitted]":"isSubmitted"}),Cn=(()=>{class n extends kp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(Ns,2))};static \u0275dir=et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Nf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[bn]})}return n})(),wo=(()=>{class n extends kp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(xi,10))};static \u0275dir=et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Nf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[bn]})}return n})();var Tu="VALID",Mp="INVALID",pc="PENDING",Su="DISABLED",_o=class{},Op=class extends _o{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Au=class extends _o{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Mu=class extends _o{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},gc=class extends _o{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Fp=class extends _o{source;constructor(e){super(),this.source=e}},Lp=class extends _o{source;constructor(e){super(),this.source=e}};function p1(n){return($p(n)?n.validators:n)||null}function S3(n){return Array.isArray(n)?A0(n):n||null}function g1(n,e){return($p(e)?e.asyncValidators:n)||null}function x3(n){return Array.isArray(n)?M0(n):n||null}function $p(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function A3(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Y(1e3,"");if(!r[t])throw new Y(1001,"")}function M3(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Y(1002,"")})}var Vp=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Or(this.statusReactive)}set status(e){Or(()=>this.statusReactive.set(e))}_status=Ja(()=>this.statusReactive());statusReactive=Wa(void 0);get valid(){return this.status===Tu}get invalid(){return this.status===Mp}get pending(){return this.status==pc}get disabled(){return this.status===Su}get enabled(){return this.status!==Su}errors;get pristine(){return Or(this.pristineReactive)}set pristine(e){Or(()=>this.pristineReactive.set(e))}_pristine=Ja(()=>this.pristineReactive());pristineReactive=Wa(!0);get dirty(){return!this.pristine}get touched(){return Or(this.touchedReactive)}set touched(e){Or(()=>this.touchedReactive.set(e))}_touched=Ja(()=>this.touchedReactive());touchedReactive=Wa(!1);get untouched(){return!this.touched}_events=new ht;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(YR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(YR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XR(e,this._rawAsyncValidators))}hasValidator(e){return Pp(this._rawValidators,e)}hasAsyncValidator(e){return Pp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Au(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Au(!0,r))}markAsPending(e={}){this.status=pc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Su,this.errors=null,this._forEachChild(i=>{i.disable(te(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Op(this.value,r)),this._events.next(new gc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tu,this._forEachChild(r=>{r.enable(te(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tu||this.status===pc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Op(this.value,t)),this._events.next(new gc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Su:Tu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=s1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new gc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?Su:this.errors?Mp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pc)?pc:this._anyControlsHaveStatus(Mp)?Mp:Tu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Au(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Mu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$p(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=S3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=x3(this._rawAsyncValidators)}},bo=class extends Vp{constructor(e,t,r){super(p1(t),g1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){M3(this,!0,e),Object.keys(e).forEach(r=>{A3(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Pu=new X("",{providedIn:"root",factory:()=>zp}),zp="always";function m1(n,e){return[...e.path,n]}function jp(n,e,t=zp){R0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),P3(n,e),k3(n,e),N3(n,e),R3(n,e)}function JR(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Bp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Up(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function R3(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function R0(n,e){let t=h1(n);e.validator!==null?n.setValidators(QR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=f1(n);e.asyncValidator!==null?n.setAsyncValidators(QR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Up(e._rawValidators,i),Up(e._rawAsyncValidators,i)}function Bp(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=h1(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=f1(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Up(e._rawValidators,r),Up(e._rawAsyncValidators,r),t}function P3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&y1(n,e)})}function N3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&y1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function y1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function k3(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function v1(n,e){n==null,R0(n,e)}function O3(n,e){return Bp(n,e)}function _1(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function F3(n){return Object.getPrototypeOf(n.constructor)===D0}function b1(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function w1(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===tn?t=o:F3(o)?r=o:i=o}),i||r||t||null}function L3(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var V3={provide:xi,useExisting:qn(()=>Nu)},xu=Promise.resolve(),Nu=(()=>{class n extends xi{callSetDisabledState;get submitted(){return Or(this.submittedReactive)}_submitted=Ja(()=>this.submittedReactive());submittedReactive=Wa(!1);_directives=new Set;form;ngSubmit=new it;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new bo({},A0(t),M0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),jp(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xu.then(()=>{let r=this._findContainer(t.path),i=new bo({});v1(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){xu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),b1(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Fp(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Lp(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(q(mc,10),q(Hp,10),q(Pu,8))};static \u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ee("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[kr([V3]),bn]})}return n})();function ZR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function e1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Xn=class extends Vp{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(p1(t),g1(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$p(t)&&(t.nonNullable||t.initialValueIsDefault)&&(e1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){e1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var j3=n=>n instanceof Xn;var U3={provide:Ns,useExisting:qn(()=>pr)},t1=Promise.resolve(),pr=(()=>{class n extends Ns{_changeDetectorRef;callSetDisabledState;control=new Xn;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new it;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=w1(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_1(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){jp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){t1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&uo(r);t1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?m1(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(q(xi,9),q(mc,10),q(Hp,10),q(Ru,10),q(cr,8),q(Pu,8))};static \u0275dir=et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[kr([U3]),bn,Pr]})}return n})();var Eo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),B3={provide:Ru,useExisting:qn(()=>ks),multi:!0},ks=(()=>{class n extends D0{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=wi(n)))(i||n)}})();static \u0275dir=et({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ee("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[kr([B3]),bn]})}return n})();var E1=new X("");var H3={provide:xi,useExisting:qn(()=>ku)},ku=(()=>{class n extends xi{callSetDisabledState;get submitted(){return Or(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Ja(()=>this._submittedReactive());_submittedReactive=Wa(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new it;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return jp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){JR(t.control||null,t,!1),L3(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),b1(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Fp(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Lp(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(JR(r||null,t),j3(i)&&(jp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);v1(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&O3(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){R0(this.form,this),this._oldForm&&Bp(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(q(mc,10),q(Hp,10),q(Pu,8))};static \u0275dir=et({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ee("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[kr([H3]),bn,Pr]})}return n})();var $3={provide:Ns,useExisting:qn(()=>Ou)},Ou=(()=>{class n extends Ns{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new it;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=w1(this,o)}ngOnChanges(t){this._added||this._setUpControl(),_1(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return m1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(q(xi,13),q(mc,10),q(Hp,10),q(Ru,10),q(E1,8))};static \u0275dir=et({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[kr([$3]),bn,Pr]})}return n})();function z3(n){return typeof n=="number"?n:parseFloat(n)}var I1=(()=>{class n{_validator=Rp;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Rp,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=et({type:n,features:[Pr]})}return n})();var q3={provide:mc,useExisting:qn(()=>Os),multi:!0},Os=(()=>{class n extends I1{min;inputName="min";normalizeInput=t=>z3(t);createValidator=t=>r1(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=wi(n)))(i||n)}})();static \u0275dir=et({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ya("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[kr([q3]),bn]})}return n})(),W3={provide:mc,useExisting:qn(()=>Fu),multi:!0};var Fu=(()=>{class n extends I1{required;inputName="required";normalizeInput=uo;createValidator=t=>i1;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=wi(n)))(i||n)}})();static \u0275dir=et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ya("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[kr([W3]),bn]})}return n})();var C1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=Wn({})}return n})();var Dn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pu,useValue:t.callSetDisabledState??zp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=Wn({imports:[C1]})}return n})(),qp=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:E1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Pu,useValue:t.callSetDisabledState??zp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=Wn({imports:[C1]})}return n})();var D1=()=>{};var x1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},G3=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},A1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,d=o>>2,h=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,p=l&63;c||(p=64,s||(f=64)),r.push(t[d],t[h],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(x1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):G3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let h=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||h==null)throw new N0;let f=o<<2|a>>4;if(r.push(f),l!==64){let p=a<<4&240|l>>2;if(r.push(p),h!==64){let y=l<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},N0=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},K3=function(n){let e=x1(n);return A1.encodeByteArray(e,!0)},Vu=function(n){return K3(n).replace(/\./g,"")},Gp=function(n){try{return A1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function M1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Q3=()=>M1().__FIREBASE_DEFAULTS__,Y3=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},X3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Gp(n[1]);return e&&JSON.parse(e)},Kp=()=>{try{return D1()||Q3()||Y3()||X3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},O0=n=>Kp()?.emulatorHosts?.[n],R1=n=>{let e=O0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},F0=()=>Kp()?.config,L0=n=>Kp()?.[`_${n}`];var Wp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Io(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Qp(n){return M(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function P1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=j({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vu(JSON.stringify(t)),Vu(JSON.stringify(s)),""].join(".")}var Lu={};function J3(){let n={prod:[],emulator:[]};for(let e of Object.keys(Lu))Lu[e]?n.emulator.push(e):n.prod.push(e);return n}function Z3(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var T1=!1;function Yp(n,e){if(typeof window>"u"||typeof document>"u"||!Io(window.location.host)||Lu[n]===e||Lu[n]||T1)return;Lu[n]=e;function t(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=J3().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{T1=!0,s()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){let f=Z3(r),p=t("text"),y=document.getElementById(p)||document.createElement("span"),v=t("learnmore"),_=document.getElementById(v)||document.createElement("a"),T=t("preprendIcon"),P=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let O=f.element;a(O),d(_,v);let U=l();c(P,T),O.append(P,y,_,U),document.body.appendChild(O)}o?(y.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function e5(){let n=Kp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O1(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function F1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L1(){let n=Ot();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function V1(){return!e5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V0(){try{return typeof indexedDB=="object"}catch{return!1}}function j1(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var t5="FirebaseError",Ln=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=t5,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ai.prototype.create)}},Ai=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?n5(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ln(i,a,r)}};function n5(n,e){return n.replace(r5,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var r5=/\{\$([^}]+)}/g;function U1(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $r(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(S1(o)&&S1(s)){if(!$r(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function S1(n){return n!==null&&typeof n=="object"}function yc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function B1(n,e){let t=new k0(n,e);return t.subscribe.bind(t)}var k0=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");i5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=P0),i.error===void 0&&(i.error=P0),i.complete===void 0&&(i.complete=P0);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function i5(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function P0(){}var tae=4*60*60*1e3;function dn(n){return n&&n._delegate?n._delegate:n}var Jn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ls="[DEFAULT]";var j0=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Wp;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s5(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return M(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function o5(n){return n===Ls?void 0:n}function s5(n){return n.instantiationMode==="EAGER"}var Xp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new j0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var a5=[],Ie=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ie||{}),c5={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},l5=Ie.INFO,u5={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},d5=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=u5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Co=class{constructor(e){this.name=e,this._logLevel=l5,this._logHandler=d5,this._userLogHandler=null,a5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var h5=(n,e)=>e.some(t=>n instanceof t),H1,$1;function f5(){return H1||(H1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p5(){return $1||($1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var z1=new WeakMap,B0=new WeakMap,q1=new WeakMap,U0=new WeakMap,$0=new WeakMap;function g5(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(zr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&z1.set(t,n)}).catch(()=>{}),$0.set(e,n),e}function m5(n){if(B0.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});B0.set(n,e)}var H0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return B0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||q1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function W1(n){H0=n(H0)}function y5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Jp(this),e,...t);return q1.set(r,e.sort?e.sort():[e]),zr(r)}:p5().includes(n)?function(...e){return n.apply(Jp(this),e),zr(z1.get(this))}:function(...e){return zr(n.apply(Jp(this),e))}}function v5(n){return typeof n=="function"?y5(n):(n instanceof IDBTransaction&&m5(n),h5(n,f5())?new Proxy(n,H0):n)}function zr(n){if(n instanceof IDBRequest)return g5(n);if(U0.has(n))return U0.get(n);let e=v5(n);return e!==n&&(U0.set(n,e),$0.set(e,n)),e}var Jp=n=>$0.get(n);function K1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=zr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(zr(s.result),c.oldVersion,c.newVersion,zr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var _5=["get","getKey","getAll","getAllKeys","count"],b5=["put","add","delete","clear"],z0=new Map;function G1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(z0.get(e))return z0.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=b5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_5.includes(t)))return;let o=function(s,...a){return M(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return z0.set(e,o),o}W1(n=>te(j({},n),{get:(e,t,r)=>G1(e,t)||n.get(e,t,r),has:(e,t)=>!!G1(e,t)||n.has(e,t)}));var W0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w5(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function w5(n){return n.getComponent()?.type==="VERSION"}var G0="@firebase/app",Q1="0.14.2";var Mi=new Co("@firebase/app"),E5="@firebase/app-compat",I5="@firebase/analytics-compat",C5="@firebase/analytics",D5="@firebase/app-check-compat",T5="@firebase/app-check",S5="@firebase/auth",x5="@firebase/auth-compat",A5="@firebase/database",M5="@firebase/data-connect",R5="@firebase/database-compat",P5="@firebase/functions",N5="@firebase/functions-compat",k5="@firebase/installations",O5="@firebase/installations-compat",F5="@firebase/messaging",L5="@firebase/messaging-compat",V5="@firebase/performance",j5="@firebase/performance-compat",U5="@firebase/remote-config",B5="@firebase/remote-config-compat",H5="@firebase/storage",$5="@firebase/storage-compat",z5="@firebase/firestore",q5="@firebase/ai",W5="@firebase/firestore-compat",G5="firebase",K5="12.2.0";var K0="[DEFAULT]",Q5={[G0]:"fire-core",[E5]:"fire-core-compat",[C5]:"fire-analytics",[I5]:"fire-analytics-compat",[T5]:"fire-app-check",[D5]:"fire-app-check-compat",[S5]:"fire-auth",[x5]:"fire-auth-compat",[A5]:"fire-rtdb",[M5]:"fire-data-connect",[R5]:"fire-rtdb-compat",[P5]:"fire-fn",[N5]:"fire-fn-compat",[k5]:"fire-iid",[O5]:"fire-iid-compat",[F5]:"fire-fcm",[L5]:"fire-fcm-compat",[V5]:"fire-perf",[j5]:"fire-perf-compat",[U5]:"fire-rc",[B5]:"fire-rc-compat",[H5]:"fire-gcs",[$5]:"fire-gcs-compat",[z5]:"fire-fst",[W5]:"fire-fst-compat",[q5]:"fire-vertex","fire-js":"fire-js",[G5]:"fire-js-all"};var ju=new Map,Y5=new Map,Q0=new Map;function Y1(n,e){try{n.container.addComponent(e)}catch(t){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function To(n){let e=n.name;if(Q0.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Q0.set(e,n);for(let t of ju.values())Y1(t,n);for(let t of Y5.values())Y1(t,n);return!0}function Bu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vn(n){return n==null?!1:n.settings!==void 0}var X5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Do=new Ai("app","Firebase",X5);var Y0=class{constructor(e,t,r){this._isDeleted=!1,this._options=j({},e),this._config=j({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Do.create("app-deleted",{appName:this._name})}};var So=K5;function Hu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=j({name:K0,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Do.create("bad-app-name",{appName:String(i)});if(t||(t=F0()),!t)throw Do.create("no-options");let o=ju.get(i);if(o){if($r(t,o.options)&&$r(r,o.config))return o;throw Do.create("duplicate-app",{appName:i})}let s=new Xp(i);for(let c of Q0.values())s.addComponent(c);let a=new Y0(t,r,s);return ju.set(i,a),a}function Zp(n=K0){let e=ju.get(n);if(!e&&n===K0&&F0())return Hu();if(!e)throw Do.create("no-app",{appName:n});return e}function Z0(){return Array.from(ju.values())}function gr(n,e,t){let r=Q5[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(s.join(" "));return}To(new Jn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var J5="firebase-heartbeat-database",Z5=1,Uu="firebase-heartbeat-store",q0=null;function eP(){return q0||(q0=K1(J5,Z5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Do.create("idb-open",{originalErrorMessage:n.message})})),q0}function e6(n){return M(this,null,function*(){try{let t=(yield eP()).transaction(Uu),r=yield t.objectStore(Uu).get(tP(n));return yield t.done,r}catch(e){if(e instanceof Ln)Mi.warn(e.message);else{let t=Do.create("idb-get",{originalErrorMessage:e?.message});Mi.warn(t.message)}}})}function X1(n,e){return M(this,null,function*(){try{let r=(yield eP()).transaction(Uu,"readwrite");yield r.objectStore(Uu).put(e,tP(n)),yield r.done}catch(t){if(t instanceof Ln)Mi.warn(t.message);else{let r=Do.create("idb-set",{originalErrorMessage:t?.message});Mi.warn(r.message)}}})}function tP(n){return`${n.name}!${n.options.appId}`}var t6=1024,n6=30,X0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new J0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return M(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=J1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>n6){let i=i6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Mi.warn(e)}})}getHeartbeatsHeader(){return M(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=J1(),{heartbeatsToSend:t,unsentEntries:r}=r6(this._heartbeatsCache.heartbeats),i=Vu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Mi.warn(e),""}})}};function J1(){return new Date().toISOString().substring(0,10)}function r6(n,e=t6){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Z1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Z1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var J0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return M(this,null,function*(){return V0()?j1().then(()=>!0).catch(()=>!1):!1})}read(){return M(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield e6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return M(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return X1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return M(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return X1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Z1(n){return Vu(JSON.stringify({version:2,heartbeats:n})).length}function i6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function o6(n){To(new Jn("platform-logger",e=>new W0(e),"PRIVATE")),To(new Jn("heartbeat",e=>new X0(e),"PRIVATE")),gr(G0,Q1,n),gr(G0,Q1,"esm2020"),gr("fire-js","")}o6("");var s6="firebase",a6="12.2.1";gr(s6,a6,"app");function mP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var yP=mP,vP=new Ai("auth","Firebase",mP());var og=new Co("@firebase/auth");function c6(n,...e){og.logLevel<=Ie.WARN&&og.warn(`Auth (${So}): ${n}`,...e)}function tg(n,...e){og.logLevel<=Ie.ERROR&&og.error(`Auth (${So}): ${n}`,...e)}function Wr(n,...e){throw yw(n,...e)}function mr(n,...e){return yw(n,...e)}function mw(n,e,t){let r=te(j({},yP()),{[e]:t});return new Ai("auth","Firebase",r).create(e,{appName:n.name})}function Vs(n){return mw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function l6(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wr(n,"argument-error"),mw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vP.create(n,...e)}function ae(n,e,...t){if(!n)throw yw(e,...t)}function Ri(n){let e="INTERNAL ASSERTION FAILED: "+n;throw tg(e),new Error(e)}function Ni(n,e){n||Ri(e)}function nw(){return typeof self<"u"&&self.location?.href||""}function u6(){return nP()==="http:"||nP()==="https:"}function nP(){return typeof self<"u"&&self.location?.protocol||null}function d6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u6()||O1()||"connection"in navigator)?navigator.onLine:!0}function h6(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var js=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ni(t>e,"Short delay should be less than long delay!"),this.isMobile=N1()||F1()}get(){return d6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function vw(n,e){Ni(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var sg=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var f6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var p6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g6=new js(3e4,6e4);function _w(n,e){return n.tenantId&&!e.tenantId?te(j({},e),{tenantId:n.tenantId}):e}function _c(o,s,a,c){return M(this,arguments,function*(n,e,t,r,i={}){return _P(n,i,()=>M(null,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let h=yc(j({key:n.config.apiKey},d)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let p=j({method:e,headers:f},l);return k1()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Io(n.emulatorConfig.host)&&(p.credentials="include"),sg.fetch()(yield bP(n,n.config.apiHost,t,h),p)}))})}function _P(n,e,t){return M(this,null,function*(){n._canInitEmulator=!1;let r=j(j({},f6),e);try{let i=new rw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw eg(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw eg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw eg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw eg(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw mw(n,d,l);Wr(n,d)}}catch(i){if(i instanceof Ln)throw i;Wr(n,"network-request-failed",{message:String(i)})}})}function m6(o,s,a,c){return M(this,arguments,function*(n,e,t,r,i={}){let l=yield _c(n,e,t,r,i);return"mfaPendingCredential"in l&&Wr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function bP(n,e,t,r){return M(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?vw(n.config,i):`${n.config.apiScheme}://${i}`;return p6.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var rw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mr(this.auth,"network-request-failed")),g6.get())})}};function eg(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=mr(n,e,r);return i.customData._tokenResponse=t,i}function y6(n,e){return M(this,null,function*(){return _c(n,"POST","/v1/accounts:delete",e)})}function ag(n,e){return M(this,null,function*(){return _c(n,"POST","/v1/accounts:lookup",e)})}function $u(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wP(n,e=!1){return M(this,null,function*(){let t=dn(n),r=yield t.getIdToken(e),i=bw(r);ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:$u(ew(i.auth_time)),issuedAtTime:$u(ew(i.iat)),expirationTime:$u(ew(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function ew(n){return Number(n)*1e3}function bw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return tg("JWT malformed, contained fewer than 3 sections"),null;try{let i=Gp(t);return i?JSON.parse(i):(tg("Failed to decode base64 JWT payload"),null)}catch(i){return tg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rP(n){let e=bw(n);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qu(n,e,t=!1){return M(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ln&&v6(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function v6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var iw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>M(this,null,function*(){yield this.iteration()}),t)}iteration(){return M(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Wu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function cg(n){return M(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield qu(n,ag(e,{idToken:t}));ae(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?IP(i.providerUserInfo):[],s=_6(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,l=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wu(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,d)})}function EP(n){return M(this,null,function*(){let e=dn(n);yield cg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function IP(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Il(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function b6(n,e){return M(this,null,function*(){let t=yield _P(n,{},()=>M(null,null,function*(){let r=yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield bP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Io(n.emulatorConfig.host)&&(c.credentials="include"),sg.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function w6(n,e){return M(this,null,function*(){return _c(n,"POST","/v2/accounts:revokeToken",_w(n,e))})}var zu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ae(e.length!==0,"internal-error");let t=rP(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return M(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return M(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield b6(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ae(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ae(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ri("not implemented")}};function xo(n,e){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ao=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=Il(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wu(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return M(this,null,function*(){let t=yield qu(this,this.stsTokenManager.getToken(this.auth,e));return ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return wP(this,e)}reload(){return EP(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>j({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(te(j({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return M(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield cg(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return M(this,null,function*(){if(Vn(this.auth.app))return Promise.reject(Vs(this.auth));let e=yield this.getIdToken();return yield qu(this,y6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return te(j({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>j({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:y,stsTokenManager:v}=t;ae(h&&v,e,"internal-error");let _=zu.fromJSON(this.name,v);ae(typeof h=="string",e,"internal-error"),xo(r,e.name),xo(i,e.name),ae(typeof f=="boolean",e,"internal-error"),ae(typeof p=="boolean",e,"internal-error"),xo(o,e.name),xo(s,e.name),xo(a,e.name),xo(c,e.name),xo(l,e.name),xo(d,e.name);let T=new n({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:_,createdAt:l,lastLoginAt:d});return y&&Array.isArray(y)&&(T.providerData=y.map(P=>j({},P))),c&&(T._redirectEventId=c),T}static _fromIdTokenResponse(e,t,r=!1){return M(this,null,function*(){let i=new zu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield cg(o),o})}static _fromGetAccountInfoResponse(e,t,r){return M(this,null,function*(){let i=t.users[0];ae(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?IP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new zu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var iP=new Map;function Pi(n){Ni(n instanceof Function,"Expected a class definition");let e=iP.get(n);return e?(Ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iP.set(n,e),e)}var E6=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return M(this,null,function*(){return!0})}_set(t,r){return M(this,null,function*(){this.storage[t]=r})}_get(t){return M(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return M(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ow=E6;function ng(n,e,t){return`firebase:${n}:${e}:${t}`}var lg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=ng(this.userKey,i.apiKey,o),this.fullPersistenceKey=ng("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return M(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ag(this.auth,{idToken:e}).catch(()=>{});return t?Ao._fromGetAccountInfoResponse(this.auth,t,e):null}return Ao._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return M(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return M(this,null,function*(){if(!t.length)return new n(Pi(ow),e,r);let i=(yield Promise.all(t.map(l=>M(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Pi(ow),s=ng(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(s);if(d){let h;if(typeof d=="string"){let f=yield ag(e,{idToken:d}).catch(()=>{});if(!f)break;h=yield Ao._fromGetAccountInfoResponse(e,f,d)}else h=Ao._fromJSON(e,d);l!==o&&(a=h),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>M(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function oP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AP(e))return"Blackberry";if(MP(e))return"Webos";if(DP(e))return"Safari";if((e.includes("chrome/")||TP(e))&&!e.includes("edge/"))return"Chrome";if(xP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function CP(n=Ot()){return/firefox\//i.test(n)}function DP(n=Ot()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TP(n=Ot()){return/crios\//i.test(n)}function SP(n=Ot()){return/iemobile/i.test(n)}function xP(n=Ot()){return/android/i.test(n)}function AP(n=Ot()){return/blackberry/i.test(n)}function MP(n=Ot()){return/webos/i.test(n)}function ww(n=Ot()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function I6(n=Ot()){return ww(n)&&!!window.navigator?.standalone}function C6(){return L1()&&document.documentMode===10}function RP(n=Ot()){return ww(n)||xP(n)||MP(n)||AP(n)||/windows phone/i.test(n)||SP(n)}function PP(n,e=[]){let t;switch(n){case"Browser":t=oP(Ot());break;case"Worker":t=`${oP(Ot())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${So}/${r}`}var sw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return M(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function D6(t){return M(this,arguments,function*(n,e={}){return _c(n,"GET","/v2/passwordPolicy",_w(n,e))})}var T6=6,aw=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??T6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var cw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ug(this),this.idTokenSubscription=new ug(this),this.beforeStateQueue=new sw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pi(t)),this._initializationPromise=this.queue(()=>M(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield lg.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return M(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return M(this,null,function*(){try{let t=yield ag(this,{idToken:e}),r=yield Ao._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return M(this,null,function*(){if(Vn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return M(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return M(this,null,function*(){try{yield cg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=h6()}_delete(){return M(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return M(this,null,function*(){if(Vn(this.app))return Promise.reject(Vs(this));let t=e?dn(e):null;return t&&ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return M(this,null,function*(){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>M(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return M(this,null,function*(){return Vn(this.app)?Promise.reject(Vs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vn(this.app)?Promise.reject(Vs(this)):this.queue(()=>M(this,null,function*(){yield this.assertedPersistence.setPersistence(Pi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return M(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return M(this,null,function*(){let e=yield D6(this),t=new aw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ai("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return M(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield w6(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return M(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return M(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Pi(e)||this._popupRedirectResolver;ae(t,this,"argument-error"),this.redirectPersistenceManager=yield lg.create(this,[Pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return M(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>M(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return M(this,null,function*(){if(e===this.currentUser)return this.queue(()=>M(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return M(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return M(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return M(this,null,function*(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&c6(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function vg(n){return dn(n)}var ug=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=B1(t=>this.observer=t)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ew={loadJS(){return M(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S6(n){Ew=n}function x6(n){return Ew.loadJS(n)}function A6(){return Ew.gapiScript}function NP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function kP(n,e){let t=Bu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if($r(o,e??{}))return i;Wr(i,"already-initialized")}return t.initialize({options:e})}function M6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Pi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function OP(n,e,t){let r=vg(n);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=FP(e),{host:s,port:a}=R6(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae($r(l,r.config.emulator)&&$r(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Io(s)?(Qp(`${o}//${s}${c}`),Yp("Auth",!0)):i||P6()}function FP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function R6(n){let e=FP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:sP(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:sP(s)}}}function sP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function P6(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Gu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,t){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}};function vc(n,e){return M(this,null,function*(){return m6(n,"POST","/v1/accounts:signInWithIdp",_w(n,e))})}var N6="http://localhost",dg=class n extends Gu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,o=Il(a,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return vc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,vc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,vc(e,t)}buildRequest(){let e={requestUri:N6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yc(t)}return e}};var Ku=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var hg=class extends Ku{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Iw=(()=>{class n extends hg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return dg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Qu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return M(this,null,function*(){let o=yield Ao._fromIdTokenResponse(e,r,i),s=aP(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return M(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=aP(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function aP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var lw=class n extends Ln{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function LP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lw._fromErrorAndOperation(n,o,e,r):o})}function k6(n,e,t=!1){return M(this,null,function*(){let r=yield qu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Qu._forOperation(n,"link",r)})}function O6(n,e,t=!1){return M(this,null,function*(){let{auth:r}=n;if(Vn(r.app))return Promise.reject(Vs(r));let i="reauthenticate";try{let o=yield qu(n,LP(r,i,e,n),t);ae(o.idToken,r,"internal-error");let s=bw(o.idToken);ae(s,r,"internal-error");let{sub:a}=s;return ae(n.uid===a,r,"user-mismatch"),Qu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Wr(r,"user-mismatch"),o}})}function F6(n,e,t=!1){return M(this,null,function*(){if(Vn(n.app))return Promise.reject(Vs(n));let r="signIn",i=yield LP(n,r,e),o=yield Qu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function VP(n,e,t,r){return dn(n).onIdTokenChanged(e,t,r)}function jP(n,e,t){return dn(n).beforeAuthStateChanged(e,t)}var fg="__sak";var pg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fg,"1"),this.storage.removeItem(fg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var L6=1e3,V6=10,j6=(()=>{class n extends pg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);C6()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,V6):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},L6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return M(this,null,function*(){yield Zi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return M(this,null,function*(){let r=yield Zi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return M(this,null,function*(){yield Zi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),UP=j6;var U6=(()=>{class n extends pg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Cw=U6;function B6(n){return Promise.all(n.map(e=>M(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var H6=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return M(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>M(this,null,function*(){return d(r.origin,s)})),l=yield B6(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Dw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var uw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return M(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=Dw("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function qr(){return window}function $6(n){qr().location.href=n}function BP(){return typeof qr().WorkerGlobalScope<"u"&&typeof qr().importScripts=="function"}function z6(){return M(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function q6(){return navigator?.serviceWorker?.controller||null}function W6(){return BP()?self:null}var HP="firebaseLocalStorageDb",G6=1,gg="firebaseLocalStorage",$P="fbase_key",Us=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function _g(n,e){return n.transaction([gg],e?"readwrite":"readonly").objectStore(gg)}function K6(){let n=indexedDB.deleteDatabase(HP);return new Us(n).toPromise()}function dw(){let n=indexedDB.open(HP,G6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(gg,{keyPath:$P})}catch(i){t(i)}}),n.addEventListener("success",()=>M(null,null,function*(){let r=n.result;r.objectStoreNames.contains(gg)?e(r):(r.close(),yield K6(),e(yield dw()))}))})}function cP(n,e,t){return M(this,null,function*(){let r=_g(n,!0).put({[$P]:e,value:t});return new Us(r).toPromise()})}function Q6(n,e){return M(this,null,function*(){let t=_g(n,!1).get(e),r=yield new Us(t).toPromise();return r===void 0?null:r.value})}function lP(n,e){let t=_g(n,!0).delete(e);return new Us(t).toPromise()}var Y6=800,X6=3,J6=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return M(this,null,function*(){return this.db?this.db:(this.db=yield dw(),this.db)})}_withRetries(t){return M(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>X6)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return M(this,null,function*(){return BP()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return M(this,null,function*(){this.receiver=H6._getInstance(W6()),this.receiver._subscribe("keyChanged",(t,r)=>M(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>M(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return M(this,null,function*(){if(this.activeServiceWorker=yield z6(),!this.activeServiceWorker)return;this.sender=new uw(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return M(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||q6()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return M(this,null,function*(){try{if(!indexedDB)return!1;let t=yield dw();return yield cP(t,fg,"1"),yield lP(t,fg),!0}catch{}return!1})}_withPendingWrite(t){return M(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return M(this,null,function*(){return this._withPendingWrite(()=>M(this,null,function*(){return yield this._withRetries(i=>cP(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return M(this,null,function*(){let r=yield this._withRetries(i=>Q6(i,t));return this.localCache[t]=r,r})}_remove(t){return M(this,null,function*(){return this._withPendingWrite(()=>M(this,null,function*(){return yield this._withRetries(r=>lP(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return M(this,null,function*(){let t=yield this._withRetries(o=>{let s=_g(o,!1).getAll();return new Us(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>M(this,null,function*(){return this._poll()}),Y6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),zP=J6;var Nae=NP("rcb"),kae=new js(3e4,6e4);function qP(n,e){return e?Pi(e):(ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Yu=class extends Gu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Z6(n){return F6(n.auth,new Yu(n),n.bypassAuthState)}function eq(n){let{auth:e,user:t}=n;return ae(t,e,"internal-error"),O6(t,new Yu(n),n.bypassAuthState)}function tq(n){return M(this,null,function*(){let{auth:e,user:t}=n;return ae(t,e,"internal-error"),k6(t,new Yu(n),n.bypassAuthState)})}var mg=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>M(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return M(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z6;case"linkViaPopup":case"linkViaRedirect":return tq;case"reauthViaPopup":case"reauthViaRedirect":return eq;default:Wr(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var nq=new js(2e3,1e4);function Tw(n,e,t){return M(this,null,function*(){if(Vn(n.app))return Promise.reject(mr(n,"operation-not-supported-in-this-environment"));let r=vg(n);l6(n,e,Ku);let i=qP(r,t);return new rq(r,"signInViaPopup",e,i).executeNotNull()})}var rq=(()=>{class n extends mg{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return M(this,null,function*(){let t=yield this.execute();return ae(t,this.auth,"internal-error"),t})}onExecution(){return M(this,null,function*(){Ni(this.filter.length===1,"Popup operations only handle one event");let t=Dw();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,nq.get())};t()}}n.currentPopupAction=null;return n})(),iq="pendingRedirect",rg=new Map,hw=class n extends mg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return M(this,null,function*(){let e=rg.get(this.auth._key());if(!e){try{let r=(yield oq(this.resolver,this.auth))?yield Zi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}rg.set(this.auth._key(),e)}return this.bypassAuthState||rg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return M(this,null,function*(){if(e.type==="signInViaRedirect")return Zi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Zi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return M(this,null,function*(){})}cleanUp(){}};function oq(n,e){return M(this,null,function*(){let t=cq(e),r=aq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function sq(n,e){rg.set(n._key(),e)}function aq(n){return Pi(n._redirectPersistence)}function cq(n){return ng(iq,n.config.apiKey,n.name)}function lq(n,e,t=!1){return M(this,null,function*(){if(Vn(n.app))return Promise.reject(Vs(n));let r=vg(n),i=qP(r,e),s=yield new hw(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var uq=10*60*1e3,fw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!WP(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(mr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uq&&this.cachedEventUids.clear(),this.cachedEventUids.has(uP(e))}saveEventToCache(e){this.cachedEventUids.add(uP(e)),this.lastProcessedEventTime=Date.now()}};function uP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function WP({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function dq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WP(n);default:return!1}}function hq(t){return M(this,arguments,function*(n,e={}){return _c(n,"GET","/v1/projects",e)})}var fq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pq=/^https?/;function gq(n){return M(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield hq(n);for(let t of e)try{if(mq(t))return}catch{}Wr(n,"unauthorized-domain")})}function mq(n){let e=nw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!pq.test(t))return!1;if(fq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var yq=new js(3e4,6e4);function dP(){let n=qr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vq(n){return new Promise((e,t)=>{function r(){dP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dP(),t(mr(n,"network-request-failed"))},timeout:yq.get()})}if(qr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qr().gapi?.load)r();else{let i=NP("iframefcb");return qr()[i]=()=>{gapi.load?r():t(mr(n,"network-request-failed"))},x6(`${A6()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw ig=null,e})}var ig=null;function _q(n){return ig=ig||vq(n),ig}var bq=new js(5e3,15e3),wq="__/auth/iframe",Eq="emulator/auth/iframe",Iq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dq(n){let e=n.config;ae(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?vw(e,Eq):`https://${n.config.authDomain}/${wq}`,r={apiKey:e.apiKey,appName:n.name,v:So},i=Cq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${yc(r).slice(1)}`}function Tq(n){return M(this,null,function*(){let e=yield _q(n),t=qr().gapi;return ae(t,n,"internal-error"),e.open({where:document.body,url:Dq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Iq,dontclear:!0},r=>new Promise((i,o)=>M(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=mr(n,"network-request-failed"),a=qr().setTimeout(()=>{o(s)},bq.get());function c(){qr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var Sq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xq=500,Aq=600,Mq="_blank",Rq="http://localhost",yg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Pq(n,e,t,r=xq,i=Aq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=te(j({},Sq),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ot().toLowerCase();t&&(a=TP(l)?Mq:t),CP(l)&&(e=e||Rq,c.scrollbars="yes");let d=Object.entries(c).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(I6(l)&&a!=="_self")return Nq(e||"",a),new yg(null);let h=window.open(e||"",a,d);ae(h,n,"popup-blocked");try{h.focus()}catch{}return new yg(h)}function Nq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var kq="__/auth/handler",Oq="emulator/auth/handler",Fq=encodeURIComponent("fac");function hP(n,e,t,r,i,o){return M(this,null,function*(){ae(n.config.authDomain,n,"auth-domain-config-required"),ae(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:So,eventId:i};if(e instanceof Ku){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",U1(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof hg){let d=e.getScopes().filter(h=>h!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${Fq}=${encodeURIComponent(c)}`:"";return`${Lq(n)}?${yc(a).slice(1)}${l}`})}function Lq({config:n}){return n.emulator?vw(n,Oq):`https://${n.authDomain}/${kq}`}var tw="webStorageSupport",pw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cw,this._completeRedirectFn=lq,this._overrideRedirectResult=sq}_openPopup(e,t,r,i){return M(this,null,function*(){Ni(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield hP(e,t,r,nw(),i);return Pq(e,o,Dw())})}_openRedirect(e,t,r,i){return M(this,null,function*(){yield this._originValidation(e);let o=yield hP(e,t,r,nw(),i);return $6(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ni(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return M(this,null,function*(){let t=yield Tq(e),r=new fw(e);return t.register("authEvent",i=>(ae(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tw,{type:tw},i=>{let o=i?.[0]?.[tw];o!==void 0&&t(!!o),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RP()||DP()||ww()}},GP=pw;var fP="@firebase/auth",pP="1.11.0";var gw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return M(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Vq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jq(n){To(new Jn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ae(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PP(n)},l=new cw(r,i,o,c);return M6(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),To(new Jn("auth-internal",e=>{let t=vg(e.getProvider("auth").getImmediate());return(r=>new gw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(fP,pP,Vq(n)),gr(fP,pP,"esm2020")}var Uq=5*60,Bq=L0("authIdTokenMaxAge")||Uq,gP=null,Hq=n=>e=>M(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Bq)return;let i=t?.token;gP!==i&&(gP=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Sw(n=Zp()){let e=Bu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=kP(n,{popupRedirectResolver:GP,persistence:[zP,UP,Cw]}),r=L0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Hq(o.toString());jP(t,s,()=>s(t.currentUser)),VP(t,a=>s(a))}}let i=O0("auth");return i&&OP(t,`http://${i}`),t}function $q(){return document.getElementsByTagName("head")?.[0]??document}S6({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=mr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",$q().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jq("Browser");var KP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QP={};var ki,xw;(function(){var n;function e(I,w){function E(){}E.prototype=w.prototype,I.D=w.prototype,I.prototype=new E,I.prototype.constructor=I,I.C=function(D,x,R){for(var C=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)C[rt-2]=arguments[rt];return w.prototype[x].apply(D,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,E){E||(E=0);var D=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)D[x]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(x=0;16>x;++x)D[x]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=I.g[0],E=I.g[1],x=I.g[2];var R=I.g[3],C=w+(R^E&(x^R))+D[0]+3614090360&4294967295;w=E+(C<<7&4294967295|C>>>25),C=R+(x^w&(E^x))+D[1]+3905402710&4294967295,R=w+(C<<12&4294967295|C>>>20),C=x+(E^R&(w^E))+D[2]+606105819&4294967295,x=R+(C<<17&4294967295|C>>>15),C=E+(w^x&(R^w))+D[3]+3250441966&4294967295,E=x+(C<<22&4294967295|C>>>10),C=w+(R^E&(x^R))+D[4]+4118548399&4294967295,w=E+(C<<7&4294967295|C>>>25),C=R+(x^w&(E^x))+D[5]+1200080426&4294967295,R=w+(C<<12&4294967295|C>>>20),C=x+(E^R&(w^E))+D[6]+2821735955&4294967295,x=R+(C<<17&4294967295|C>>>15),C=E+(w^x&(R^w))+D[7]+4249261313&4294967295,E=x+(C<<22&4294967295|C>>>10),C=w+(R^E&(x^R))+D[8]+1770035416&4294967295,w=E+(C<<7&4294967295|C>>>25),C=R+(x^w&(E^x))+D[9]+2336552879&4294967295,R=w+(C<<12&4294967295|C>>>20),C=x+(E^R&(w^E))+D[10]+4294925233&4294967295,x=R+(C<<17&4294967295|C>>>15),C=E+(w^x&(R^w))+D[11]+2304563134&4294967295,E=x+(C<<22&4294967295|C>>>10),C=w+(R^E&(x^R))+D[12]+1804603682&4294967295,w=E+(C<<7&4294967295|C>>>25),C=R+(x^w&(E^x))+D[13]+4254626195&4294967295,R=w+(C<<12&4294967295|C>>>20),C=x+(E^R&(w^E))+D[14]+2792965006&4294967295,x=R+(C<<17&4294967295|C>>>15),C=E+(w^x&(R^w))+D[15]+1236535329&4294967295,E=x+(C<<22&4294967295|C>>>10),C=w+(x^R&(E^x))+D[1]+4129170786&4294967295,w=E+(C<<5&4294967295|C>>>27),C=R+(E^x&(w^E))+D[6]+3225465664&4294967295,R=w+(C<<9&4294967295|C>>>23),C=x+(w^E&(R^w))+D[11]+643717713&4294967295,x=R+(C<<14&4294967295|C>>>18),C=E+(R^w&(x^R))+D[0]+3921069994&4294967295,E=x+(C<<20&4294967295|C>>>12),C=w+(x^R&(E^x))+D[5]+3593408605&4294967295,w=E+(C<<5&4294967295|C>>>27),C=R+(E^x&(w^E))+D[10]+38016083&4294967295,R=w+(C<<9&4294967295|C>>>23),C=x+(w^E&(R^w))+D[15]+3634488961&4294967295,x=R+(C<<14&4294967295|C>>>18),C=E+(R^w&(x^R))+D[4]+3889429448&4294967295,E=x+(C<<20&4294967295|C>>>12),C=w+(x^R&(E^x))+D[9]+568446438&4294967295,w=E+(C<<5&4294967295|C>>>27),C=R+(E^x&(w^E))+D[14]+3275163606&4294967295,R=w+(C<<9&4294967295|C>>>23),C=x+(w^E&(R^w))+D[3]+4107603335&4294967295,x=R+(C<<14&4294967295|C>>>18),C=E+(R^w&(x^R))+D[8]+1163531501&4294967295,E=x+(C<<20&4294967295|C>>>12),C=w+(x^R&(E^x))+D[13]+2850285829&4294967295,w=E+(C<<5&4294967295|C>>>27),C=R+(E^x&(w^E))+D[2]+4243563512&4294967295,R=w+(C<<9&4294967295|C>>>23),C=x+(w^E&(R^w))+D[7]+1735328473&4294967295,x=R+(C<<14&4294967295|C>>>18),C=E+(R^w&(x^R))+D[12]+2368359562&4294967295,E=x+(C<<20&4294967295|C>>>12),C=w+(E^x^R)+D[5]+4294588738&4294967295,w=E+(C<<4&4294967295|C>>>28),C=R+(w^E^x)+D[8]+2272392833&4294967295,R=w+(C<<11&4294967295|C>>>21),C=x+(R^w^E)+D[11]+1839030562&4294967295,x=R+(C<<16&4294967295|C>>>16),C=E+(x^R^w)+D[14]+4259657740&4294967295,E=x+(C<<23&4294967295|C>>>9),C=w+(E^x^R)+D[1]+2763975236&4294967295,w=E+(C<<4&4294967295|C>>>28),C=R+(w^E^x)+D[4]+1272893353&4294967295,R=w+(C<<11&4294967295|C>>>21),C=x+(R^w^E)+D[7]+4139469664&4294967295,x=R+(C<<16&4294967295|C>>>16),C=E+(x^R^w)+D[10]+3200236656&4294967295,E=x+(C<<23&4294967295|C>>>9),C=w+(E^x^R)+D[13]+681279174&4294967295,w=E+(C<<4&4294967295|C>>>28),C=R+(w^E^x)+D[0]+3936430074&4294967295,R=w+(C<<11&4294967295|C>>>21),C=x+(R^w^E)+D[3]+3572445317&4294967295,x=R+(C<<16&4294967295|C>>>16),C=E+(x^R^w)+D[6]+76029189&4294967295,E=x+(C<<23&4294967295|C>>>9),C=w+(E^x^R)+D[9]+3654602809&4294967295,w=E+(C<<4&4294967295|C>>>28),C=R+(w^E^x)+D[12]+3873151461&4294967295,R=w+(C<<11&4294967295|C>>>21),C=x+(R^w^E)+D[15]+530742520&4294967295,x=R+(C<<16&4294967295|C>>>16),C=E+(x^R^w)+D[2]+3299628645&4294967295,E=x+(C<<23&4294967295|C>>>9),C=w+(x^(E|~R))+D[0]+4096336452&4294967295,w=E+(C<<6&4294967295|C>>>26),C=R+(E^(w|~x))+D[7]+1126891415&4294967295,R=w+(C<<10&4294967295|C>>>22),C=x+(w^(R|~E))+D[14]+2878612391&4294967295,x=R+(C<<15&4294967295|C>>>17),C=E+(R^(x|~w))+D[5]+4237533241&4294967295,E=x+(C<<21&4294967295|C>>>11),C=w+(x^(E|~R))+D[12]+1700485571&4294967295,w=E+(C<<6&4294967295|C>>>26),C=R+(E^(w|~x))+D[3]+2399980690&4294967295,R=w+(C<<10&4294967295|C>>>22),C=x+(w^(R|~E))+D[10]+4293915773&4294967295,x=R+(C<<15&4294967295|C>>>17),C=E+(R^(x|~w))+D[1]+2240044497&4294967295,E=x+(C<<21&4294967295|C>>>11),C=w+(x^(E|~R))+D[8]+1873313359&4294967295,w=E+(C<<6&4294967295|C>>>26),C=R+(E^(w|~x))+D[15]+4264355552&4294967295,R=w+(C<<10&4294967295|C>>>22),C=x+(w^(R|~E))+D[6]+2734768916&4294967295,x=R+(C<<15&4294967295|C>>>17),C=E+(R^(x|~w))+D[13]+1309151649&4294967295,E=x+(C<<21&4294967295|C>>>11),C=w+(x^(E|~R))+D[4]+4149444226&4294967295,w=E+(C<<6&4294967295|C>>>26),C=R+(E^(w|~x))+D[11]+3174756917&4294967295,R=w+(C<<10&4294967295|C>>>22),C=x+(w^(R|~E))+D[2]+718787259&4294967295,x=R+(C<<15&4294967295|C>>>17),C=E+(R^(x|~w))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var E=w-this.blockSize,D=this.B,x=this.h,R=0;R<w;){if(x==0)for(;R<=E;)i(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<w;)if(D[x++]=I.charCodeAt(R++),x==this.blockSize){i(this,D),x=0;break}}else for(;R<w;)if(D[x++]=I[R++],x==this.blockSize){i(this,D),x=0;break}}this.h=x,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var E=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=E&255,E/=256;for(this.u(I),I=Array(16),w=E=0;4>w;++w)for(var D=0;32>D;D+=8)I[E++]=this.g[w]>>>D&255;return I};function o(I,w){var E=a;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=w(I)}function s(I,w){this.h=w;for(var E=[],D=!0,x=I.length-1;0<=x;x--){var R=I[x]|0;D&&R==w||(E[x]=R,D=!1)}this.g=E}var a={};function c(I){return-128<=I&&128>I?o(I,function(w){return new s([w|0],0>w?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return _(l(-I));for(var w=[],E=1,D=0;I>=E;D++)w[D]=I/E|0,E*=4294967296;return new s(w,0)}function d(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return _(d(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(w,8)),D=h,x=0;x<I.length;x+=8){var R=Math.min(8,I.length-x),C=parseInt(I.substring(x,x+R),w);8>R?(R=l(Math.pow(w,R)),D=D.j(R).add(l(C))):(D=D.j(E),D=D.add(l(C)))}return D}var h=c(0),f=c(1),p=c(16777216);n=s.prototype,n.m=function(){if(v(this))return-_(this).m();for(var I=0,w=1,E=0;E<this.g.length;E++){var D=this.i(E);I+=(0<=D?D:4294967296+D)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(v(this))return"-"+_(this).toString(I);for(var w=l(Math.pow(I,6)),E=this,D="";;){var x=U(E,w).g;E=T(E,x.j(w));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(I);if(E=x,y(E))return R+D;for(;6>R.length;)R="0"+R;D=R+D}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function v(I){return I.h==-1}n.l=function(I){return I=T(this,I),v(I)?-1:y(I)?0:1};function _(I){for(var w=I.g.length,E=[],D=0;D<w;D++)E[D]=~I.g[D];return new s(E,~I.h).add(f)}n.abs=function(){return v(this)?_(this):this},n.add=function(I){for(var w=Math.max(this.g.length,I.g.length),E=[],D=0,x=0;x<=w;x++){var R=D+(this.i(x)&65535)+(I.i(x)&65535),C=(R>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);D=C>>>16,R&=65535,C&=65535,E[x]=C<<16|R}return new s(E,E[E.length-1]&-2147483648?-1:0)};function T(I,w){return I.add(_(w))}n.j=function(I){if(y(this)||y(I))return h;if(v(this))return v(I)?_(this).j(_(I)):_(_(this).j(I));if(v(I))return _(this.j(_(I)));if(0>this.l(p)&&0>I.l(p))return l(this.m()*I.m());for(var w=this.g.length+I.g.length,E=[],D=0;D<2*w;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var x=0;x<I.g.length;x++){var R=this.i(D)>>>16,C=this.i(D)&65535,rt=I.i(x)>>>16,Ae=I.i(x)&65535;E[2*D+2*x]+=C*Ae,P(E,2*D+2*x),E[2*D+2*x+1]+=R*Ae,P(E,2*D+2*x+1),E[2*D+2*x+1]+=C*rt,P(E,2*D+2*x+1),E[2*D+2*x+2]+=R*rt,P(E,2*D+2*x+2)}for(D=0;D<w;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=w;D<2*w;D++)E[D]=0;return new s(E,0)};function P(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function O(I,w){this.g=I,this.h=w}function U(I,w){if(y(w))throw Error("division by zero");if(y(I))return new O(h,h);if(v(I))return w=U(_(I),w),new O(_(w.g),_(w.h));if(v(w))return w=U(I,_(w)),new O(_(w.g),w.h);if(30<I.g.length){if(v(I)||v(w))throw Error("slowDivide_ only works with positive integers.");for(var E=f,D=w;0>=D.l(I);)E=L(E),D=L(D);var x=B(E,1),R=B(D,1);for(D=B(D,2),E=B(E,2);!y(D);){var C=R.add(D);0>=C.l(I)&&(x=x.add(E),R=C),D=B(D,1),E=B(E,1)}return w=T(I,x.j(w)),new O(x,w)}for(x=h;0<=I.l(w);){for(E=Math.max(1,Math.floor(I.m()/w.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),R=l(E),C=R.j(w);v(C)||0<C.l(I);)E-=D,R=l(E),C=R.j(w);y(R)&&(R=f),x=x.add(R),I=T(I,C)}return new O(x,I)}n.A=function(I){return U(this,I).h},n.and=function(I){for(var w=Math.max(this.g.length,I.g.length),E=[],D=0;D<w;D++)E[D]=this.i(D)&I.i(D);return new s(E,this.h&I.h)},n.or=function(I){for(var w=Math.max(this.g.length,I.g.length),E=[],D=0;D<w;D++)E[D]=this.i(D)|I.i(D);return new s(E,this.h|I.h)},n.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),E=[],D=0;D<w;D++)E[D]=this.i(D)^I.i(D);return new s(E,this.h^I.h)};function L(I){for(var w=I.g.length+1,E=[],D=0;D<w;D++)E[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(E,I.h)}function B(I,w){var E=w>>5;w%=32;for(var D=I.g.length-E,x=[],R=0;R<D;R++)x[R]=0<w?I.i(R+E)>>>w|I.i(R+E+1)<<32-w:I.i(R+E);return new s(x,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xw=QP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,ki=QP.Integer=s}).apply(typeof KP<"u"?KP:typeof self<"u"?self:typeof window<"u"?window:{});var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oi={};var Aw,zq,bc,Mw,Xu,wg,Rw,Pw,Nw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,m){return u==Array.prototype||u==Object.prototype||(u[g]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bg=="object"&&bg];for(var g=0;g<u.length;++g){var m=u[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,g){if(g)e:{var m=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var N=u[b];if(!(N in m))break e;m=m[N]}u=u[u.length-1],b=m[u],g=g(b),g!=b&&g!=null&&e(m,u,{configurable:!0,writable:!0,value:g})}}function o(u,g){u instanceof String&&(u+="");var m=0,b=!1,N={next:function(){if(!b&&m<u.length){var F=m++;return{value:g(F,u[F]),done:!1}}return b=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(u){return u||function(){return o(this,function(g,m){return m})}});var s=s||{},a=this||self;function c(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function l(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,m){return u.call.apply(u.bind,arguments)}function h(u,g,m){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,b),u.apply(g,N)}}return function(){return u.apply(g,arguments)}}function f(u,g,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(u,g){var m=Array.prototype.slice.call(arguments,1);return function(){var b=m.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function y(u,g){function m(){}m.prototype=g.prototype,u.aa=g.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(b,N,F){for(var G=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)G[ze-2]=arguments[ze];return g.prototype[N].apply(b,G)}}function v(u){let g=u.length;if(0<g){let m=Array(g);for(let b=0;b<g;b++)m[b]=u[b];return m}return[]}function _(u,g){for(let m=1;m<arguments.length;m++){let b=arguments[m];if(c(b)){let N=u.length||0,F=b.length||0;u.length=N+F;for(let G=0;G<F;G++)u[N+G]=b[G]}else u.push(b)}}class T{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function P(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function U(u){return U[" "](u),u}U[" "]=function(){};var L=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function B(u,g,m){for(let b in u)g.call(m,u[b],b,u)}function I(u,g){for(let m in u)g.call(void 0,u[m],m,u)}function w(u){let g={};for(let m in u)g[m]=u[m];return g}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,g){let m,b;for(let N=1;N<arguments.length;N++){b=arguments[N];for(m in b)u[m]=b[m];for(let F=0;F<E.length;F++)m=E[F],Object.prototype.hasOwnProperty.call(b,m)&&(u[m]=b[m])}}function x(u){var g=1;u=u.split(":");let m=[];for(;0<g&&u.length;)m.push(u.shift()),g--;return u.length&&m.push(u.join(":")),m}function R(u){a.setTimeout(()=>{throw u},0)}function C(){var u=gt;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class rt{constructor(){this.h=this.g=null}add(g,m){let b=Ae.get();b.set(g,m),this.h?this.h.next=b:this.g=b,this.h=b}}var Ae=new T(()=>new Ge,u=>u.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,jt=!1,gt=new rt,oi=()=>{let u=a.Promise.resolve(void 0);$e=()=>{u.then(la)}};var la=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){R(m)}var g=Ae;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}jt=!1};function sn(){this.s=this.s,this.C=this.C}sn.prototype.s=!1,sn.prototype.ma=function(){this.s||(this.s=!0,this.N())},sn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var si=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,g),a.removeEventListener("test",m,g)}catch{}return u}();function nr(u,g){if(st.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(L){e:{try{U(g.nodeName);var N=!0;break e}catch{}N=!1}N||(g=null)}}else m=="mouseover"?g=u.fromElement:m=="mouseout"&&(g=u.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ai[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&nr.aa.h.call(this)}}y(nr,st);var ai={2:"touch",3:"pen",4:"mouse"};nr.prototype.h=function(){nr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var cl="closure_listenable_"+(1e6*Math.random()|0),FL=0;function LL(u,g,m,b,N){this.listener=u,this.proxy=null,this.src=g,this.type=m,this.capture=!!b,this.ha=N,this.key=++FL,this.da=this.fa=!1}function $d(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zd(u){this.src=u,this.g={},this.h=0}zd.prototype.add=function(u,g,m,b,N){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var G=Sy(u,g,b,N);return-1<G?(g=u[G],m||(g.fa=!1)):(g=new LL(g,this.src,F,!!b,N),g.fa=m,u.push(g)),g};function Ty(u,g){var m=g.type;if(m in u.g){var b=u.g[m],N=Array.prototype.indexOf.call(b,g,void 0),F;(F=0<=N)&&Array.prototype.splice.call(b,N,1),F&&($d(g),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Sy(u,g,m,b){for(var N=0;N<u.length;++N){var F=u[N];if(!F.da&&F.listener==g&&F.capture==!!m&&F.ha==b)return N}return-1}var xy="closure_lm_"+(1e6*Math.random()|0),Ay={};function fD(u,g,m,b,N){if(b&&b.once)return gD(u,g,m,b,N);if(Array.isArray(g)){for(var F=0;F<g.length;F++)fD(u,g[F],m,b,N);return null}return m=Ny(m),u&&u[cl]?u.K(g,m,l(b)?!!b.capture:!!b,N):pD(u,g,m,!1,b,N)}function pD(u,g,m,b,N,F){if(!g)throw Error("Invalid event type");var G=l(N)?!!N.capture:!!N,ze=Ry(u);if(ze||(u[xy]=ze=new zd(u)),m=ze.add(g,m,b,G,F),m.proxy)return m;if(b=VL(),m.proxy=b,b.src=u,b.listener=m,u.addEventListener)si||(N=G),N===void 0&&(N=!1),u.addEventListener(g.toString(),b,N);else if(u.attachEvent)u.attachEvent(yD(g.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return m}function VL(){function u(m){return g.call(u.src,u.listener,m)}let g=jL;return u}function gD(u,g,m,b,N){if(Array.isArray(g)){for(var F=0;F<g.length;F++)gD(u,g[F],m,b,N);return null}return m=Ny(m),u&&u[cl]?u.L(g,m,l(b)?!!b.capture:!!b,N):pD(u,g,m,!0,b,N)}function mD(u,g,m,b,N){if(Array.isArray(g))for(var F=0;F<g.length;F++)mD(u,g[F],m,b,N);else b=l(b)?!!b.capture:!!b,m=Ny(m),u&&u[cl]?(u=u.i,g=String(g).toString(),g in u.g&&(F=u.g[g],m=Sy(F,m,b,N),-1<m&&($d(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete u.g[g],u.h--)))):u&&(u=Ry(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Sy(g,m,b,N)),(m=-1<u?g[u]:null)&&My(m))}function My(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[cl])Ty(g.i,u);else{var m=u.type,b=u.proxy;g.removeEventListener?g.removeEventListener(m,b,u.capture):g.detachEvent?g.detachEvent(yD(m),b):g.addListener&&g.removeListener&&g.removeListener(b),(m=Ry(g))?(Ty(m,u),m.h==0&&(m.src=null,g[xy]=null)):$d(u)}}}function yD(u){return u in Ay?Ay[u]:Ay[u]="on"+u}function jL(u,g){if(u.da)u=!0;else{g=new nr(g,this);var m=u.listener,b=u.ha||u.src;u.fa&&My(u),u=m.call(b,g)}return u}function Ry(u){return u=u[xy],u instanceof zd?u:null}var Py="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ny(u){return typeof u=="function"?u:(u[Py]||(u[Py]=function(g){return u.handleEvent(g)}),u[Py])}function Qt(){sn.call(this),this.i=new zd(this),this.M=this,this.F=null}y(Qt,sn),Qt.prototype[cl]=!0,Qt.prototype.removeEventListener=function(u,g,m,b){mD(this,u,g,m,b)};function an(u,g){var m,b=u.F;if(b)for(m=[];b;b=b.F)m.push(b);if(u=u.M,b=g.type||g,typeof g=="string")g=new st(g,u);else if(g instanceof st)g.target=g.target||u;else{var N=g;g=new st(b,u),D(g,N)}if(N=!0,m)for(var F=m.length-1;0<=F;F--){var G=g.g=m[F];N=qd(G,b,!0,g)&&N}if(G=g.g=u,N=qd(G,b,!0,g)&&N,N=qd(G,b,!1,g)&&N,m)for(F=0;F<m.length;F++)G=g.g=m[F],N=qd(G,b,!1,g)&&N}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var m=u.g[g],b=0;b<m.length;b++)$d(m[b]);delete u.g[g],u.h--}}this.F=null},Qt.prototype.K=function(u,g,m,b){return this.i.add(String(u),g,!1,m,b)},Qt.prototype.L=function(u,g,m,b){return this.i.add(String(u),g,!0,m,b)};function qd(u,g,m,b){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var N=!0,F=0;F<g.length;++F){var G=g[F];if(G&&!G.da&&G.capture==m){var ze=G.listener,Ut=G.ha||G.src;G.fa&&Ty(u.i,G),N=ze.call(Ut,b)!==!1&&N}}return N&&!b.defaultPrevented}function vD(u,g,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function _D(u){u.g=vD(()=>{u.g=null,u.i&&(u.i=!1,_D(u))},u.l);let g=u.h;u.h=null,u.m.apply(null,g)}class UL extends sn{constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:_D(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ll(u){sn.call(this),this.h=u,this.g={}}y(ll,sn);var bD=[];function wD(u){B(u.g,function(g,m){this.g.hasOwnProperty(m)&&My(g)},u),u.g={}}ll.prototype.N=function(){ll.aa.N.call(this),wD(this)},ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ky=a.JSON.stringify,BL=a.JSON.parse,HL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Oy(){}Oy.prototype.h=null;function ED(u){return u.h||(u.h=u.i())}function ID(){}var ul={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fy(){st.call(this,"d")}y(Fy,st);function Ly(){st.call(this,"c")}y(Ly,st);var Jo={},CD=null;function Wd(){return CD=CD||new Qt}Jo.La="serverreachability";function DD(u){st.call(this,Jo.La,u)}y(DD,st);function dl(u){let g=Wd();an(g,new DD(g))}Jo.STAT_EVENT="statevent";function TD(u,g){st.call(this,Jo.STAT_EVENT,u),this.stat=g}y(TD,st);function cn(u){let g=Wd();an(g,new TD(g,u))}Jo.Ma="timingevent";function SD(u,g){st.call(this,Jo.Ma,u),this.size=g}y(SD,st);function hl(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function fl(){this.g=!0}fl.prototype.xa=function(){this.g=!1};function $L(u,g,m,b,N,F){u.info(function(){if(u.g)if(F)for(var G="",ze=F.split("&"),Ut=0;Ut<ze.length;Ut++){var Fe=ze[Ut].split("=");if(1<Fe.length){var Yt=Fe[0];Fe=Fe[1];var Xt=Yt.split("_");G=2<=Xt.length&&Xt[1]=="type"?G+(Yt+"="+Fe+"&"):G+(Yt+"=redacted&")}}else G=null;else G=F;return"XMLHTTP REQ ("+b+") [attempt "+N+"]: "+g+`
`+m+`
`+G})}function zL(u,g,m,b,N,F,G){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+N+"]: "+g+`
`+m+`
`+F+" "+G})}function ua(u,g,m,b){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+WL(u,m)+(b?" "+b:"")})}function qL(u,g){u.info(function(){return"TIMEOUT: "+g})}fl.prototype.info=function(){};function WL(u,g){if(!u.g)return g;if(!g)return null;try{var m=JSON.parse(g);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var b=m[u];if(!(2>b.length)){var N=b[1];if(Array.isArray(N)&&!(1>N.length)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(var G=1;G<N.length;G++)N[G]=""}}}}return ky(m)}catch{return g}}var Gd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vy;function Kd(){}y(Kd,Oy),Kd.prototype.g=function(){return new XMLHttpRequest},Kd.prototype.i=function(){return{}},Vy=new Kd;function Yi(u,g,m,b){this.j=u,this.i=g,this.l=m,this.R=b||1,this.U=new ll(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new AD}function AD(){this.i=null,this.g="",this.h=!1}var MD={},jy={};function Uy(u,g,m){u.L=1,u.v=Jd(ci(g)),u.m=m,u.P=!0,RD(u,null)}function RD(u,g){u.F=Date.now(),Qd(u),u.A=ci(u.v);var m=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),qD(m.i,"t",b),u.C=0,m=u.j.J,u.h=new AD,u.g=lT(u.j,m?g:null,!u.m),0<u.O&&(u.M=new UL(f(u.Y,u,u.g),u.O)),g=u.U,m=u.g,b=u.ca;var N="readystatechange";Array.isArray(N)||(N&&(bD[0]=N.toString()),N=bD);for(var F=0;F<N.length;F++){var G=fD(m,N[F],b||g.handleEvent,!1,g.h||g);if(!G)break;g.g[G.key]=G}g=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),dl(),$L(u.i,u.u,u.A,u.l,u.R,u.m)}Yi.prototype.ca=function(u){u=u.target;let g=this.M;g&&li(u)==3?g.j():this.Y(u)},Yi.prototype.Y=function(u){try{if(u==this.g)e:{let Xt=li(this.g);var g=this.g.Ba();let fa=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||JD(this.g)))){this.J||Xt!=4||g==7||(g==8||0>=fa?dl(3):dl(2)),By(this);var m=this.g.Z();this.X=m;t:if(PD(this)){var b=JD(this.g);u="";var N=b.length,F=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zo(this),pl(this);var G="";break t}this.h.i=new a.TextDecoder}for(g=0;g<N;g++)this.h.h=!0,u+=this.h.i.decode(b[g],{stream:!(F&&g==N-1)});b.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,zL(this.i,this.u,this.A,this.l,this.R,Xt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Ut=this.g;if((ze=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(ze)){var Fe=ze;break t}}Fe=null}if(m=Fe)ua(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hy(this,m);else{this.o=!1,this.s=3,cn(12),Zo(this),pl(this);break e}}if(this.P){m=!0;let rr;for(;!this.J&&this.C<G.length;)if(rr=GL(this,G),rr==jy){Xt==4&&(this.s=4,cn(14),m=!1),ua(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==MD){this.s=4,cn(15),ua(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else ua(this.i,this.l,rr,null),Hy(this,rr);if(PD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||G.length!=0||this.h.h||(this.s=1,cn(16),m=!1),this.o=this.o&&m,!m)ua(this.i,this.l,G,"[Invalid Chunked Response]"),Zo(this),pl(this);else if(0<G.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Ky(Yt),Yt.M=!0,cn(11))}}else ua(this.i,this.l,G,null),Hy(this,G);Xt==4&&Zo(this),this.o&&!this.J&&(Xt==4?oT(this.j,this):(this.o=!1,Qd(this)))}else uV(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),Zo(this),pl(this)}}}catch{}finally{}};function PD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function GL(u,g){var m=u.C,b=g.indexOf(`
`,m);return b==-1?jy:(m=Number(g.substring(m,b)),isNaN(m)?MD:(b+=1,b+m>g.length?jy:(g=g.slice(b,b+m),u.C=b+m,g)))}Yi.prototype.cancel=function(){this.J=!0,Zo(this)};function Qd(u){u.S=Date.now()+u.I,ND(u,u.I)}function ND(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=hl(f(u.ba,u),g)}function By(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Yi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(qL(this.i,this.A),this.L!=2&&(dl(),cn(17)),Zo(this),this.s=2,pl(this)):ND(this,this.S-u)};function pl(u){u.j.G==0||u.J||oT(u.j,u)}function Zo(u){By(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,wD(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Hy(u,g){try{var m=u.j;if(m.G!=0&&(m.g==u||$y(m.h,u))){if(!u.K&&$y(m.h,u)&&m.G==3){try{var b=m.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var N=b;if(N[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)rh(m),th(m);else break e;Gy(m),cn(18)}}else m.za=N[1],0<m.za-m.T&&37500>N[2]&&m.F&&m.v==0&&!m.C&&(m.C=hl(f(m.Za,m),6e3));if(1>=FD(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ts(m,11)}else if((u.K||m.g==u)&&rh(m),!P(g))for(N=m.Da.g.parse(g),g=0;g<N.length;g++){let Fe=N[g];if(m.T=Fe[0],Fe=Fe[1],m.G==2)if(Fe[0]=="c"){m.K=Fe[1],m.ia=Fe[2];let Yt=Fe[3];Yt!=null&&(m.la=Yt,m.j.info("VER="+m.la));let Xt=Fe[4];Xt!=null&&(m.Aa=Xt,m.j.info("SVER="+m.Aa));let fa=Fe[5];fa!=null&&typeof fa=="number"&&0<fa&&(b=1.5*fa,m.L=b,m.j.info("backChannelRequestTimeoutMs_="+b)),b=m;let rr=u.g;if(rr){let oh=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oh){var F=b.h;F.g||oh.indexOf("spdy")==-1&&oh.indexOf("quic")==-1&&oh.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(zy(F,F.h),F.h=null))}if(b.D){let Qy=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Qy&&(b.ya=Qy,Je(b.I,b.D,Qy))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),b=m;var G=u;if(b.qa=cT(b,b.J?b.ia:null,b.W),G.K){LD(b.h,G);var ze=G,Ut=b.L;Ut&&(ze.I=Ut),ze.B&&(By(ze),Qd(ze)),b.g=G}else rT(b);0<m.i.length&&nh(m)}else Fe[0]!="stop"&&Fe[0]!="close"||ts(m,7);else m.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ts(m,7):Wy(m):Fe[0]!="noop"&&m.l&&m.l.ta(Fe),m.v=0)}}dl(4)}catch{}}var KL=class{constructor(u,g){this.g=u,this.map=g}};function kD(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OD(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function FD(u){return u.h?1:u.g?u.g.size:0}function $y(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function zy(u,g){u.g?u.g.add(g):u.h=g}function LD(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}kD.prototype.cancel=function(){if(this.i=VD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function VD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(let m of u.g.values())g=g.concat(m.D);return g}return v(u.i)}function QL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var g=[],m=u.length,b=0;b<m;b++)g.push(u[b]);return g}g=[],m=0;for(b in u)g[m++]=u[b];return g}function YL(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var g=[];u=u.length;for(var m=0;m<u;m++)g.push(m);return g}g=[],m=0;for(let b in u)g[m++]=b;return g}}}function jD(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var m=YL(u),b=QL(u),N=b.length,F=0;F<N;F++)g.call(void 0,b[F],m&&m[F],u)}var UD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XL(u,g){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var b=u[m].indexOf("="),N=null;if(0<=b){var F=u[m].substring(0,b);N=u[m].substring(b+1)}else F=u[m];g(F,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function es(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof es){this.h=u.h,Yd(this,u.j),this.o=u.o,this.g=u.g,Xd(this,u.s),this.l=u.l;var g=u.i,m=new yl;m.i=g.i,g.g&&(m.g=new Map(g.g),m.h=g.h),BD(this,m),this.m=u.m}else u&&(g=String(u).match(UD))?(this.h=!1,Yd(this,g[1]||"",!0),this.o=gl(g[2]||""),this.g=gl(g[3]||"",!0),Xd(this,g[4]),this.l=gl(g[5]||"",!0),BD(this,g[6]||"",!0),this.m=gl(g[7]||"")):(this.h=!1,this.i=new yl(null,this.h))}es.prototype.toString=function(){var u=[],g=this.j;g&&u.push(ml(g,HD,!0),":");var m=this.g;return(m||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ml(g,HD,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(ml(m,m.charAt(0)=="/"?eV:ZL,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",ml(m,nV)),u.join("")};function ci(u){return new es(u)}function Yd(u,g,m){u.j=m?gl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Xd(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function BD(u,g,m){g instanceof yl?(u.i=g,rV(u.i,u.h)):(m||(g=ml(g,tV)),u.i=new yl(g,u.h))}function Je(u,g,m){u.i.set(g,m)}function Jd(u){return Je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function gl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ml(u,g,m){return typeof u=="string"?(u=encodeURI(u).replace(g,JL),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function JL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var HD=/[#\/\?@]/g,ZL=/[#\?:]/g,eV=/[#\?]/g,tV=/[#\?@]/g,nV=/#/g;function yl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Xi(u){u.g||(u.g=new Map,u.h=0,u.i&&XL(u.i,function(g,m){u.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}n=yl.prototype,n.add=function(u,g){Xi(this),this.i=null,u=da(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(g),this.h+=1,this};function $D(u,g){Xi(u),g=da(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function zD(u,g){return Xi(u),g=da(u,g),u.g.has(g)}n.forEach=function(u,g){Xi(this),this.g.forEach(function(m,b){m.forEach(function(N){u.call(g,N,b,this)},this)},this)},n.na=function(){Xi(this);let u=Array.from(this.g.values()),g=Array.from(this.g.keys()),m=[];for(let b=0;b<g.length;b++){let N=u[b];for(let F=0;F<N.length;F++)m.push(g[b])}return m},n.V=function(u){Xi(this);let g=[];if(typeof u=="string")zD(this,u)&&(g=g.concat(this.g.get(da(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)g=g.concat(u[m])}return g},n.set=function(u,g){return Xi(this),this.i=null,u=da(this,u),zD(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function qD(u,g,m){$D(u,g),0<m.length&&(u.i=null,u.g.set(da(u,g),v(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],g=Array.from(this.g.keys());for(var m=0;m<g.length;m++){var b=g[m];let F=encodeURIComponent(String(b)),G=this.V(b);for(b=0;b<G.length;b++){var N=F;G[b]!==""&&(N+="="+encodeURIComponent(String(G[b]))),u.push(N)}}return this.i=u.join("&")};function da(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function rV(u,g){g&&!u.j&&(Xi(u),u.i=null,u.g.forEach(function(m,b){var N=b.toLowerCase();b!=N&&($D(this,b),qD(this,N,m))},u)),u.j=g}function iV(u,g){let m=new fl;if(a.Image){let b=new Image;b.onload=p(Ji,m,"TestLoadImage: loaded",!0,g,b),b.onerror=p(Ji,m,"TestLoadImage: error",!1,g,b),b.onabort=p(Ji,m,"TestLoadImage: abort",!1,g,b),b.ontimeout=p(Ji,m,"TestLoadImage: timeout",!1,g,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else g(!1)}function oV(u,g){let m=new fl,b=new AbortController,N=setTimeout(()=>{b.abort(),Ji(m,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:b.signal}).then(F=>{clearTimeout(N),F.ok?Ji(m,"TestPingServer: ok",!0,g):Ji(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(N),Ji(m,"TestPingServer: error",!1,g)})}function Ji(u,g,m,b,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),b(m)}catch{}}function sV(){this.g=new HL}function aV(u,g,m){let b=m||"";try{jD(u,function(N,F){let G=N;l(N)&&(G=ky(N)),g.push(b+F+"="+encodeURIComponent(G))})}catch(N){throw g.push(b+"type="+encodeURIComponent("_badmap")),N}}function vl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(vl,Oy),vl.prototype.g=function(){return new Zd(this.l,this.j)},vl.prototype.i=function(u){return function(){return u}}({});function Zd(u,g){Qt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Zd,Qt),n=Zd.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,bl(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_l(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,bl(this)),this.g&&(this.readyState=3,bl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;WD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function WD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?_l(this):bl(this),this.readyState==3&&WD(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,_l(this))},n.Qa=function(u){this.g&&(this.response=u,_l(this))},n.ga=function(){this.g&&_l(this)};function _l(u){u.readyState=4,u.l=null,u.j=null,u.v=null,bl(u)}n.setRequestHeader=function(u,g){this.u.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=g.next();return u.join(`\r
`)};function bl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function GD(u){let g="";return B(u,function(m,b){g+=b,g+=":",g+=m,g+=`\r
`}),g}function qy(u,g,m){e:{for(b in m){var b=!1;break e}b=!0}b||(m=GD(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Je(u,g,m))}function at(u){Qt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(at,Qt);var cV=/^https?$/i,lV=["POST","PUT"];n=at.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,g,m,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vy.g(),this.v=this.o?ED(this.o):ED(Vy),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(F){KD(this,F);return}if(u=m||"",m=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var N in b)m.set(N,b[N]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(let F of b.keys())m.set(F,b.get(F));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),N=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(lV,g,void 0))||b||N||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,G]of m)this.g.setRequestHeader(F,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{XD(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){KD(this,F)}};function KD(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,QD(u),eh(u)}function QD(u){u.A||(u.A=!0,an(u,"complete"),an(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,an(this,"complete"),an(this,"abort"),eh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eh(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?YD(this):this.bb())},n.bb=function(){YD(this)};function YD(u){if(u.h&&typeof s<"u"&&(!u.v[1]||li(u)!=4||u.Z()!=2)){if(u.u&&li(u)==4)vD(u.Ea,0,u);else if(an(u,"readystatechange"),li(u)==4){u.h=!1;try{let G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var m;if(!(m=g)){var b;if(b=G===0){var N=String(u.D).match(UD)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),b=!cV.test(N?N.toLowerCase():"")}m=b}if(m)an(u,"complete"),an(u,"success");else{u.m=6;try{var F=2<li(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",QD(u)}}finally{eh(u)}}}}function eh(u,g){if(u.g){XD(u);let m=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||an(u,"ready");try{m.onreadystatechange=b}catch{}}}function XD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function li(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),BL(g)}};function JD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function uV(u){let g={};u=(u.g&&2<=li(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(P(u[b]))continue;var m=x(u[b]);let N=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let F=g[N]||[];g[N]=F,F.push(m)}I(g,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wl(u,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||g}function ZD(u){this.Aa=0,this.i=[],this.j=new fl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wl("baseRetryDelayMs",5e3,u),this.cb=wl("retryDelaySeedMs",1e4,u),this.Wa=wl("forwardChannelMaxRetries",2,u),this.wa=wl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new kD(u&&u.concurrentRequestLimit),this.Da=new sV,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ZD.prototype,n.la=8,n.G=1,n.connect=function(u,g,m,b){cn(0),this.W=u,this.H=g||{},m&&b!==void 0&&(this.H.OSID=m,this.H.OAID=b),this.F=this.X,this.I=cT(this,null,this.W),nh(this)};function Wy(u){if(eT(u),u.G==3){var g=u.U++,m=ci(u.I);if(Je(m,"SID",u.K),Je(m,"RID",g),Je(m,"TYPE","terminate"),El(u,m),g=new Yi(u,u.j,g),g.L=2,g.v=Jd(ci(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=g.v,m=!0),m||(g.g=lT(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Qd(g)}aT(u)}function th(u){u.g&&(Ky(u),u.g.cancel(),u.g=null)}function eT(u){th(u),u.u&&(a.clearTimeout(u.u),u.u=null),rh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function nh(u){if(!OD(u.h)&&!u.s){u.s=!0;var g=u.Ga;$e||oi(),jt||($e(),jt=!0),gt.add(g,u),u.B=0}}function dV(u,g){return FD(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=hl(f(u.Ga,u,g),sT(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let N=new Yi(this,this.j,u),F=this.o;if(this.S&&(F?(F=w(F),D(F,this.S)):F=this.S),this.m!==null||this.O||(N.H=F,F=null),this.P)e:{for(var g=0,m=0;m<this.i.length;m++){t:{var b=this.i[m];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=m;break e}if(g===4096||m===this.i.length-1){g=m+1;break e}}g=1e3}else g=1e3;g=nT(this,N,g),m=ci(this.I),Je(m,"RID",u),Je(m,"CVER",22),this.D&&Je(m,"X-HTTP-Session-Id",this.D),El(this,m),F&&(this.O?g="headers="+encodeURIComponent(String(GD(F)))+"&"+g:this.m&&qy(m,this.m,F)),zy(this.h,N),this.Ua&&Je(m,"TYPE","init"),this.P?(Je(m,"$req",g),Je(m,"SID","null"),N.T=!0,Uy(N,m,null)):Uy(N,m,g),this.G=2}}else this.G==3&&(u?tT(this,u):this.i.length==0||OD(this.h)||tT(this))};function tT(u,g){var m;g?m=g.l:m=u.U++;let b=ci(u.I);Je(b,"SID",u.K),Je(b,"RID",m),Je(b,"AID",u.T),El(u,b),u.m&&u.o&&qy(b,u.m,u.o),m=new Yi(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),g&&(u.i=g.D.concat(u.i)),g=nT(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),zy(u.h,m),Uy(m,b,g)}function El(u,g){u.H&&B(u.H,function(m,b){Je(g,b,m)}),u.l&&jD({},function(m,b){Je(g,b,m)})}function nT(u,g,m){m=Math.min(u.i.length,m);var b=u.l?f(u.l.Na,u.l,u):null;e:{var N=u.i;let F=-1;for(;;){let G=["count="+m];F==-1?0<m?(F=N[0].g,G.push("ofs="+F)):F=0:G.push("ofs="+F);let ze=!0;for(let Ut=0;Ut<m;Ut++){let Fe=N[Ut].g,Yt=N[Ut].map;if(Fe-=F,0>Fe)F=Math.max(0,N[Ut].g-100),ze=!1;else try{aV(Yt,G,"req"+Fe+"_")}catch{b&&b(Yt)}}if(ze){b=G.join("&");break e}}}return u=u.i.splice(0,m),g.D=u,b}function rT(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;$e||oi(),jt||($e(),jt=!0),gt.add(g,u),u.v=0}}function Gy(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=hl(f(u.Fa,u),sT(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,iT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=hl(f(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),th(this),iT(this))};function Ky(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function iT(u){u.g=new Yi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ci(u.qa);Je(g,"RID","rpc"),Je(g,"SID",u.K),Je(g,"AID",u.T),Je(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Je(g,"TO",u.ja),Je(g,"TYPE","xmlhttp"),El(u,g),u.m&&u.o&&qy(g,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Jd(ci(g)),m.m=null,m.P=!0,RD(m,u)}n.Za=function(){this.C!=null&&(this.C=null,th(this),Gy(this),cn(19))};function rh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function oT(u,g){var m=null;if(u.g==g){rh(u),Ky(u),u.g=null;var b=2}else if($y(u.h,g))m=g.D,LD(u.h,g),b=1;else return;if(u.G!=0){if(g.o)if(b==1){m=g.m?g.m.length:0,g=Date.now()-g.F;var N=u.B;b=Wd(),an(b,new SD(b,m)),nh(u)}else rT(u);else if(N=g.s,N==3||N==0&&0<g.X||!(b==1&&dV(u,g)||b==2&&Gy(u)))switch(m&&0<m.length&&(g=u.h,g.i=g.i.concat(m)),N){case 1:ts(u,5);break;case 4:ts(u,10);break;case 3:ts(u,6);break;default:ts(u,2)}}}function sT(u,g){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*g}function ts(u,g){if(u.j.info("Error code "+g),g==2){var m=f(u.fb,u),b=u.Xa;let N=!b;b=new es(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yd(b,"https"),Jd(b),N?iV(b.toString(),m):oV(b.toString(),m)}else cn(2);u.G=0,u.l&&u.l.sa(g),aT(u),eT(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function aT(u){if(u.G=0,u.ka=[],u.l){let g=VD(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function cT(u,g,m){var b=m instanceof es?ci(m):new es(m);if(b.g!="")g&&(b.g=g+"."+b.g),Xd(b,b.s);else{var N=a.location;b=N.protocol,g=g?g+"."+N.hostname:N.hostname,N=+N.port;var F=new es(null);b&&Yd(F,b),g&&(F.g=g),N&&Xd(F,N),m&&(F.l=m),b=F}return m=u.D,g=u.ya,m&&g&&Je(b,m,g),Je(b,"VER",u.la),El(u,b),b}function lT(u,g,m){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new at(new vl({eb:m})):new at(u.pa),g.Ha(u.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uT(){}n=uT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ih(){}ih.prototype.g=function(u,g){return new Mn(u,g)};function Mn(u,g){Qt.call(this),this.g=new ZD(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!P(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!P(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ha(this)}y(Mn,Qt),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){Wy(this.g)},Mn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=ky(u),u=m);g.i.push(new KL(g.Ya++,u)),g.G==3&&nh(g)},Mn.prototype.N=function(){this.g.l=null,delete this.j,Wy(this.g),delete this.g,Mn.aa.N.call(this)};function dT(u){Fy.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(let m in g){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(dT,Fy);function hT(){Ly.call(this),this.status=1}y(hT,Ly);function ha(u){this.g=u}y(ha,uT),ha.prototype.ua=function(){an(this.g,"a")},ha.prototype.ta=function(u){an(this.g,new dT(u))},ha.prototype.sa=function(u){an(this.g,new hT)},ha.prototype.ra=function(){an(this.g,"b")},ih.prototype.createWebChannel=ih.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,Nw=Oi.createWebChannelTransport=function(){return new ih},Pw=Oi.getStatEventTarget=function(){return Wd()},Rw=Oi.Event=Jo,wg=Oi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gd.NO_ERROR=0,Gd.TIMEOUT=8,Gd.HTTP_ERROR=6,Xu=Oi.ErrorCode=Gd,xD.COMPLETE="complete",Mw=Oi.EventType=xD,ID.EventType=ul,ul.OPEN="a",ul.CLOSE="b",ul.ERROR="c",ul.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,bc=Oi.WebChannel=ID,zq=Oi.FetchXmlHttpFactory=vl,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,Aw=Oi.XhrIo=at}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});var YP="@firebase/firestore",XP="4.9.1";var Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");var Uc="12.2.0";var Ws=new Co("@firebase/firestore");function wc(){return Ws.logLevel}function J(n,...e){if(Ws.logLevel<=Ie.DEBUG){let t=e.map(wI);Ws.debug(`Firestore (${Uc}): ${n}`,...t)}}function Fi(n,...e){if(Ws.logLevel<=Ie.ERROR){let t=e.map(wI);Ws.error(`Firestore (${Uc}): ${n}`,...t)}}function xc(n,...e){if(Ws.logLevel<=Ie.WARN){let t=e.map(wI);Ws.warn(`Firestore (${Uc}): ${n}`,...t)}}function wI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,BN(n,r,t)}function BN(n,e,t){let r=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Fi(r),new Error(r)}function Ue(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||BN(e,i,r)}function ue(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends Ln{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var xg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ft.UNAUTHENTICATED))}shutdown(){}},Uw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Bw=class{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>M(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new xg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}},Hw=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},$w=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Hw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ag=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zw=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ue(this.o===void 0,3512);let r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ag(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ag(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var rd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=qq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Se(n,e){return n<e?-1:n>e?1:0}function qw(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return kw(i)===kw(o)?Se(i,o):kw(i)?1:-1}return Se(n.length,e.length)}var Wq=55296,Gq=57343;function kw(n){let e=n.charCodeAt(0);return e>=Wq&&e<=Gq}function Ac(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var JP="__name__",Mg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Se(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):qw(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}},nt=class n extends Mg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Kq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jn=class n extends Mg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Kq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===JP}static keyField(){return new n([JP])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Q(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Q(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var re=class n{constructor(e){this.path=e}static fromPath(e){return new n(nt.fromString(e))}static fromName(e){return new n(nt.fromString(e).popFirst(5))}static empty(){return new n(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new nt(e.slice()))}};function HN(n,e,t){if(!t)throw new Q(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Qq(n,e,t,r){if(e===!0&&r===!0)throw new Q(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZP(n){if(!re.isDocumentKey(n))throw new Q(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eN(n){if(re.isDocumentKey(n))throw new Q(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $N(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":oe(12329,{type:typeof n})}function _r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=cm(n);throw new Q(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Et(n,e){let t={typeString:n};return e&&(t.value=e),t}function yd(n,e){if(!$N(n))throw new Q(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Q(H.INVALID_ARGUMENT,t);return!0}var tN=-62135596800,nN=1e6,It=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*nN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<tN)throw new Q(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nN}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yd(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-tN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:Et("string",It._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};var he=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new It(0,0))}static max(){return new n(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var id=-1,Ww=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ww.UNKNOWN_ID=-1;function Yq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new It(t+1,0):new It(t,r));return new Gs(i,re.empty(),e)}function Xq(n){return new Gs(n.readTime,n.key,id)}var Gs=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(he.min(),re.empty(),id)}static max(){return new n(he.max(),re.empty(),id)}};function Jq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=re.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}var Zq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bc(n){return M(this,null,function*(){if(n.code!==H.FAILED_PRECONDITION||n.message!==Zq)throw n;J("LocalStore","Unexpectedly lost primary lease")})}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function e8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hc(n){return n.name==="IndexedDbTransactionError"}var EI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),II=-1;function lm(n){return n==null}function od(n){return n===0&&1/n==-1/0}function t8(n){return typeof n=="number"&&Number.isInteger(n)&&!od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var zN="";function n8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rN(e)),e=r8(n.get(t),e);return rN(e)}function r8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case zN:t+="";break;default:t+=o}}return t}function rN(n){return n+zN+""}var i8="remoteDocuments",qN="owner";var WN="mutationQueues";var GN="mutations";var KN="documentMutations",o8="remoteDocumentsV14";var QN="remoteDocumentGlobal";var YN="targets";var XN="targetDocuments";var JN="targetGlobal",ZN="collectionParents";var ek="clientMetadata";var tk="bundles";var nk="namedQueries";var s8="indexConfiguration";var a8="indexState";var c8="indexEntries";var rk="documentOverlays";var l8="globals";var u8=[WN,GN,KN,i8,YN,qN,JN,XN,ek,QN,ZN,tk,nk],yle=[...u8,rk],d8=[WN,GN,KN,o8,YN,qN,JN,XN,ek,QN,ZN,tk,nk,rk],h8=d8,f8=[...h8,s8,a8,c8];var vle=[...f8,l8];function iN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ik(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ut=class n{constructor(e,t){this.comparator=e,this.root=t||Kr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}},Dc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Kr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}};Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1;Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Kr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Lt=class n{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rg(this.data.getIterator())}getIteratorFrom(e){return new Rg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Rg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gr=class n{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Lt(jn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ac(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Pg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pg("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rn.EMPTY_BYTE_STRING=new rn("");var p8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(n){if(Ue(!!n,39018),typeof n=="string"){let e=0,t=p8.exec(n);if(Ue(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vi(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}var ok="server_timestamp",sk="__type__",ak="__previous_value__",ck="__local_write_time__";function CI(n){return(n?.mapValue?.fields||{})[sk]?.stringValue===ok}function um(n){let e=n.mapValue.fields[ak];return CI(e)?um(e):e}function sd(n){let e=Li(n.mapValue.fields[ck].timestampValue);return new It(e.seconds,e.nanos)}var Kw=class{constructor(e,t,r,i,o,s,a,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=d}},Ng="(default)",kg=class n{constructor(e,t){this.projectId=e,this.database=t||Ng}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ng}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var DI="__type__",lk="__max__",Eg={mapValue:{fields:{__type__:{stringValue:lk}}}},TI="__vector__",Mc="value";function Oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?CI(n)?4:dk(n)?9007199254740991:uk(n)?10:11:oe(28295,{value:n})}function Xr(n,e){if(n===e)return!0;let t=Oo(n);if(t!==Oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sd(n).isEqual(sd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Li(i.timestampValue),a=Li(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Vi(i.bytesValue).isEqual(Vi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return tt(i.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tt(i.integerValue)===tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=tt(i.doubleValue),a=tt(o.doubleValue);return s===a?od(s)===od(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ac(n.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(iN(s)!==iN(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Xr(s[c],a[c])))return!1;return!0}(n,e);default:return oe(52216,{left:n})}}function ad(n,e){return(n.values||[]).find(t=>Xr(t,e))!==void 0}function Rc(n,e){if(n===e)return 0;let t=Oo(n),r=Oo(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=tt(o.integerValue||o.doubleValue),c=tt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return oN(n.timestampValue,e.timestampValue);case 4:return oN(sd(n),sd(e));case 5:return qw(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Vi(o),c=Vi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Se(a[l],c[l]);if(d!==0)return d}return Se(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Se(tt(o.latitude),tt(s.latitude));return a!==0?a:Se(tt(o.longitude),tt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return sN(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},c=s.fields||{},l=a[Mc]?.arrayValue,d=c[Mc]?.arrayValue,h=Se(l?.values?.length||0,d?.values?.length||0);return h!==0?h:sN(l,d)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Eg.mapValue&&s===Eg.mapValue)return 0;if(o===Eg.mapValue)return 1;if(s===Eg.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let f=qw(c[h],d[h]);if(f!==0)return f;let p=Rc(a[c[h]],l[d[h]]);if(p!==0)return p}return Se(c.length,d.length)}(n.mapValue,e.mapValue);default:throw oe(23264,{he:t})}}function oN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);let t=Li(n),r=Li(e),i=Se(t.seconds,r.seconds);return i!==0?i:Se(t.nanos,r.nanos)}function sN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Rc(t[i],r[i]);if(o)return o}return Se(t.length,r.length)}function Pc(n){return Qw(n)}function Qw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Li(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return re.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Qw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Qw(t.fields[s])}`;return i+"}"}(n.mapValue):oe(61005,{value:n})}function Dg(n){switch(Oo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=um(n);return e?16+Dg(e):16;case 5:return 2*n.stringValue.length;case 6:return Vi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Dg(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Zs(r.fields,(o,s)=>{i+=o.length+Dg(s)}),i}(n.mapValue);default:throw oe(13486,{value:n})}}function aN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yw(n){return!!n&&"integerValue"in n}function SI(n){return!!n&&"arrayValue"in n}function cN(n){return!!n&&"nullValue"in n}function lN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tg(n){return!!n&&"mapValue"in n}function uk(n){return(n?.mapValue?.fields||{})[DI]?.stringValue===TI}function Zu(n){if(n.geoPointValue)return{geoPointValue:j({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:j({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Zs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return j({},n)}function dk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lk}var ble={mapValue:{fields:{[DI]:{stringValue:TI},[Mc]:{arrayValue:{}}}}};var yr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=jn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Zu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Tg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Tg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Zu(this.value))}};function hk(n){let e=[];return Zs(n.fields,(t,r)=>{let i=new jn([t]);if(Tg(r)){let o=hk(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gr(e)}var br=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,he.min(),he.min(),he.min(),yr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,he.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,he.min(),he.min(),yr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,he.min(),he.min(),yr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Nc=class{constructor(e,t){this.position=e,this.inclusive=t}};function uN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=re.comparator(re.fromName(s.referenceValue),t.key):r=Rc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function dN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xr(n.position[t],e.position[t]))return!1;return!0}var Ks=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function g8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Og=class{},wt=class n extends Og{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jw(e,t,r):t==="array-contains"?new tE(e,r):t==="in"?new nE(e,r):t==="not-in"?new rE(e,r):t==="array-contains-any"?new iE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Zw(e,r):new eE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Rc(t,this.value)):t!==null&&Oo(this.value)===Oo(t)&&this.matchesComparison(Rc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},wr=class n extends Og{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return fk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function fk(n){return n.op==="and"}function pk(n){return m8(n)&&fk(n)}function m8(n){for(let e of n.filters)if(e instanceof wr)return!1;return!0}function Xw(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+Pc(n.value);if(pk(n))return n.filters.map(e=>Xw(e)).join(",");{let e=n.filters.map(t=>Xw(t)).join(",");return`${n.op}(${e})`}}function gk(n,e){return n instanceof wt?function(r,i){return i instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&Xr(r.value,i.value)}(n,e):n instanceof wr?function(r,i){return i instanceof wr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gk(s,i.filters[a]),!0):!1}(n,e):void oe(19439)}function mk(n){return n instanceof wt?function(t){return`${t.field.canonicalString()} ${t.op} ${Pc(t.value)}`}(n):n instanceof wr?function(t){return t.op.toString()+" {"+t.getFilters().map(mk).join(" ,")+"}"}(n):"Filter"}var Jw=class extends wt{constructor(e,t,r){super(e,t,r),this.key=re.fromName(r.referenceValue)}matches(e){let t=re.comparator(e.key,this.key);return this.matchesComparison(t)}},Zw=class extends wt{constructor(e,t){super(e,"in",t),this.keys=yk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},eE=class extends wt{constructor(e,t){super(e,"not-in",t),this.keys=yk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function yk(n,e){return(e.arrayValue?.values||[]).map(t=>re.fromName(t.referenceValue))}var tE=class extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return SI(t)&&ad(t.arrayValue,this.value)}},nE=class extends wt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ad(this.value.arrayValue,t)}},rE=class extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ad(this.value.arrayValue,t)}},iE=class extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!SI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ad(this.value.arrayValue,r))}};var oE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function hN(n,e=null,t=[],r=[],i=null,o=null,s=null){return new oE(n,e,t,r,i,o,s)}function xI(n){let e=ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Xw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),lm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pc(r)).join(",")),e.Te=t}return e.Te}function AI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!g8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dN(n.startAt,e.startAt)&&dN(n.endAt,e.endAt)}function sE(n){return re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Fo=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function y8(n,e,t,r,i,o,s,a){return new Fo(n,e,t,r,i,o,s,a)}function dm(n){return new Fo(n)}function fN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vk(n){return n.collectionGroup!==null}function ed(n){let e=ue(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Lt(jn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ks(o,r))}),t.has(jn.keyField().canonicalString())||e.Ie.push(new Ks(jn.keyField(),r))}return e.Ie}function Qr(n){let e=ue(n);return e.Ee||(e.Ee=v8(e,ed(n))),e.Ee}function v8(n,e){if(n.limitType==="F")return hN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ks(i.field,o)});let t=n.endAt?new Nc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Nc(n.startAt.position,n.startAt.inclusive):null;return hN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function aE(n,e){let t=n.filters.concat([e]);return new Fo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cE(n,e,t){return new Fo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hm(n,e){return AI(Qr(n),Qr(e))&&n.limitType===e.limitType}function _k(n){return`${xI(Qr(n))}|lt:${n.limitType}`}function Ec(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>mk(i)).join(", ")}]`),lm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Pc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Pc(i)).join(",")),`Target(${r})`}(Qr(n))}; limitType=${n.limitType})`}function fm(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ed(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=uN(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,ed(r),i)||r.endAt&&!function(s,a,c){let l=uN(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,ed(r),i))}(n,e)}function _8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bk(n){return(e,t)=>{let r=!1;for(let i of ed(n)){let o=b8(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function b8(n,e,t){let r=n.field.isKeyField()?re.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Rc(c,l):oe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:n.dir})}}var ji=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ik(this.inner)}size(){return this.innerSize}};var w8=new ut(re.comparator);function Ui(){return w8}var wk=new ut(re.comparator);function Ju(...n){let e=wk;for(let t of n)e=e.insert(t.key,t);return e}function Ek(n){let e=wk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bs(){return td()}function Ik(){return td()}function td(){return new ji(n=>n.toString(),(n,e)=>n.isEqual(e))}var E8=new ut(re.comparator),I8=new Lt(re.comparator);function xe(...n){let e=I8;for(let t of n)e=e.add(t);return e}var C8=new Lt(Se);function D8(){return C8}function MI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function Ck(n){return{integerValue:""+n}}function T8(n,e){return t8(e)?Ck(e):MI(n,e)}var kc=class{constructor(){this._=void 0}};function S8(n,e,t){return n instanceof Oc?function(i,o){let s={fields:{[sk]:{stringValue:ok},[ck]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&CI(o)&&(o=um(o)),o&&(s.fields[ak]=o),{mapValue:s}}(t,e):n instanceof Qs?Tk(n,e):n instanceof Ys?Sk(n,e):function(i,o){let s=Dk(i,o),a=pN(s)+pN(i.Ae);return Yw(s)&&Yw(i.Ae)?Ck(a):MI(i.serializer,a)}(n,e)}function x8(n,e,t){return n instanceof Qs?Tk(n,e):n instanceof Ys?Sk(n,e):t}function Dk(n,e){return n instanceof Fc?function(r){return Yw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Oc=class extends kc{},Qs=class extends kc{constructor(e){super(),this.elements=e}};function Tk(n,e){let t=xk(e);for(let r of n.elements)t.some(i=>Xr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ys=class extends kc{constructor(e){super(),this.elements=e}};function Sk(n,e){let t=xk(e);for(let r of n.elements)t=t.filter(i=>!Xr(i,r));return{arrayValue:{values:t}}}var Fc=class extends kc{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function pN(n){return tt(n.integerValue||n.doubleValue)}function xk(n){return SI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function A8(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Qs&&i instanceof Qs||r instanceof Ys&&i instanceof Ys?Ac(r.elements,i.elements,Xr):r instanceof Fc&&i instanceof Fc?Xr(r.Ae,i.Ae):r instanceof Oc&&i instanceof Oc}(n.transform,e.transform)}var lE=class{constructor(e,t){this.version=e,this.transformResults=t}},Mo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Lc=class{};function Ak(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fg(n.key,Mo.none()):new Xs(n.key,n.data,Mo.none());{let t=n.data,r=yr.empty(),i=new Lt(jn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Bi(n.key,r,new Gr(i.toArray()),Mo.none())}}function M8(n,e,t){n instanceof Xs?function(i,o,s){let a=i.value.clone(),c=mN(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Bi?function(i,o,s){if(!Sg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=mN(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Mk(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function nd(n,e,t,r){return n instanceof Xs?function(o,s,a,c){if(!Sg(o.precondition,s))return a;let l=o.value.clone(),d=yN(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bi?function(o,s,a,c){if(!Sg(o.precondition,s))return a;let l=yN(o.fieldTransforms,c,s),d=s.data;return d.setAll(Mk(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(o,s,a){return Sg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function R8(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Dk(r.transform,i||null);o!=null&&(t===null&&(t=yr.empty()),t.set(r.field,o))}return t||null}function gN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ac(r,i,(o,s)=>A8(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Xs=class extends Lc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Bi=class extends Lc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Mk(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function mN(n,e,t){let r=new Map;Ue(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,x8(s,a,t[i]))}return r}function yN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,S8(o,s,e))}return r}var Fg=class extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},uE=class extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&M8(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=nd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=nd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Ik();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Ak(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&Ac(this.mutations,e.mutations,(t,r)=>gN(t,r))&&Ac(this.baseMutations,e.baseMutations,(t,r)=>gN(t,r))}},hE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return E8}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var fE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var pE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var _t,Pe;function P8(n){switch(n){case H.OK:return oe(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return oe(15467,{code:n})}}function Rk(n){if(n===void 0)return Fi("GRPC error has no .code"),H.UNKNOWN;switch(n){case _t.OK:return H.OK;case _t.CANCELLED:return H.CANCELLED;case _t.UNKNOWN:return H.UNKNOWN;case _t.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case _t.INTERNAL:return H.INTERNAL;case _t.UNAVAILABLE:return H.UNAVAILABLE;case _t.UNAUTHENTICATED:return H.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case _t.NOT_FOUND:return H.NOT_FOUND;case _t.ALREADY_EXISTS:return H.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return H.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case _t.ABORTED:return H.ABORTED;case _t.OUT_OF_RANGE:return H.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return H.UNIMPLEMENTED;case _t.DATA_LOSS:return H.DATA_LOSS;default:return oe(39323,{code:n})}}(Pe=_t||(_t={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";var N8=null;function k8(){return new TextEncoder}var O8=new ki([4294967295,4294967295],0);function vN(n){let e=k8().encode(n),t=new xw;return t.update(e),new Uint8Array(t.digest())}function _N(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ki([t,r],0),new ki([i,o],0)]}var gE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hs(`Invalid padding: ${t}`);if(r<0)throw new Hs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hs(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ki.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ki.fromNumber(r)));return i.compare(O8)===1&&(i=new ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=vN(e),[r,i]=_N(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=vN(e),[r,i]=_N(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Hs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Lg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(he.min(),i,new ut(Se),Ui(),xe())}},cd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,xe(),xe(),xe())}};var Tc=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Vg=class{constructor(e,t){this.targetId=e,this.Ce=t}},jg=class{constructor(e,t,r=rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ug=class{constructor(){this.ve=0,this.Fe=bN(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),t=xe(),r=xe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:oe(38017,{changeType:o})}}),new cd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=bN()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},mE=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ui(),this.Je=Ig(),this.He=Ig(),this.Ye=new ut(Se)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(sE(o))if(r===0){let s=new re(o.path);this.et(t,s,br.newNoDocument(s,he.min()))}else Ue(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}N8?.lt(function(d,h,f,p,y){let v={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},_=h.unchangedNames;return _&&(v.bloomFilter={applied:y===0,hashCount:_?.hashCount??0,bitmapLength:_?.bits?.bitmap?.length??0,padding:_?.bits?.padding??0,mightContain:T=>p?.mightContain(T)??!1}),v}(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Vi(r).toUint8Array()}catch(c){if(c instanceof Pg)return xc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new gE(s,i,o)}catch(c){return xc(c instanceof Hs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&sE(a.target)){let c=new re(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,br.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=xe();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Lg(e,t,this.Ye,this.je,r);return this.je=Ui(),this.Je=Ig(),this.He=Ig(),this.Ye=new ut(Se),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ug,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Lt(Se),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Lt(Se),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ug),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Ig(){return new ut(re.comparator)}function bN(){return new ut(re.comparator)}var F8={asc:"ASCENDING",desc:"DESCENDING"},L8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V8={and:"AND",or:"OR"},yE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function vE(n,e){return n.useProto3Json||lm(e)?e:{value:e}}function Bg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function j8(n,e){return Bg(n,e.toTimestamp())}function Yr(n){return Ue(!!n,49232),he.fromTimestamp(function(t){let r=Li(t);return new It(r.seconds,r.nanos)}(n))}function RI(n,e){return _E(n,e).canonicalString()}function _E(n,e){let t=function(i){return new nt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Nk(n){let e=nt.fromString(n);return Ue(Vk(e),10190,{key:e.toString()}),e}function bE(n,e){return RI(n.databaseId,e.path)}function Ow(n,e){let t=Nk(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new re(Ok(t))}function kk(n,e){return RI(n.databaseId,e)}function U8(n){let e=Nk(n);return e.length===4?nt.emptyPath():Ok(e)}function wE(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ok(n){return Ue(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function wN(n,e,t){return{name:bE(n,e),fields:t.value.mapValue.fields}}function B8(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:oe(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(Ue(d===void 0||typeof d=="string",58123),rn.fromBase64String(d||"")):(Ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),rn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?H.UNKNOWN:Rk(l.code);return new Q(d,l.message||"")}(s);t=new jg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ow(n,r.document.name),o=Yr(r.document.updateTime),s=r.document.createTime?Yr(r.document.createTime):he.min(),a=new yr({mapValue:{fields:r.document.fields}}),c=br.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Tc(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ow(n,r.document),o=r.readTime?Yr(r.readTime):he.min(),s=br.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Tc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ow(n,r.document),o=r.removedTargetIds||[];t=new Tc([],o,i,null)}else{if(!("filter"in e))return oe(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new pE(i,o),a=r.targetId;t=new Vg(a,s)}}return t}function H8(n,e){let t;if(e instanceof Xs)t={update:wN(n,e.key,e.value)};else if(e instanceof Fg)t={delete:bE(n,e.key)};else if(e instanceof Bi)t={update:wN(n,e.key,e.data),updateMask:X8(e.fieldMask)};else{if(!(e instanceof uE))return oe(16599,{Vt:e.type});t={verify:bE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Oc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ys)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fc)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw oe(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:j8(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe(27497)}(n,e.precondition)),t}function $8(n,e){return n&&n.length>0?(Ue(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Yr(i.updateTime):Yr(o);return s.isEqual(he.min())&&(s=Yr(o)),new lE(s,i.transformResults||[])}(t,e))):[]}function z8(n,e){return{documents:[kk(n,e.path)]}}function q8(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kk(n,i);let o=function(l){if(l.length!==0)return Lk(wr.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(f){return{field:Ic(f.field),direction:K8(f.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=vE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:t,parent:i}}function W8(n){let e=U8(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ue(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(h){let f=Fk(h);return f instanceof wr&&pk(f)?f.getFilters():[f]}(t.where));let s=[];t.orderBy&&(s=function(h){return h.map(f=>function(y){return new Ks(Cc(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,lm(f)?null:f}(t.limit));let c=null;t.startAt&&(c=function(h){let f=!!h.before,p=h.values||[];return new Nc(p,f)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let f=!h.before,p=h.values||[];return new Nc(p,f)}(t.endAt)),y8(e,i,s,o,a,"F",c,l)}function G8(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Fk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Cc(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Cc(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Cc(t.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Cc(t.unaryFilter.field);return wt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(n):n.fieldFilter!==void 0?function(t){return wt.create(Cc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return wr.create(t.compositeFilter.filters.map(r=>Fk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(t.compositeFilter.op))}(n):oe(30097,{filter:n})}function K8(n){return F8[n]}function Q8(n){return L8[n]}function Y8(n){return V8[n]}function Ic(n){return{fieldPath:n.canonicalString()}}function Cc(n){return jn.fromServerFormat(n.fieldPath)}function Lk(n){return n instanceof wt?function(t){if(t.op==="=="){if(lN(t.value))return{unaryFilter:{field:Ic(t.field),op:"IS_NAN"}};if(cN(t.value))return{unaryFilter:{field:Ic(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lN(t.value))return{unaryFilter:{field:Ic(t.field),op:"IS_NOT_NAN"}};if(cN(t.value))return{unaryFilter:{field:Ic(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ic(t.field),op:Q8(t.op),value:t.value}}}(n):n instanceof wr?function(t){let r=t.getFilters().map(i=>Lk(i));return r.length===1?r[0]:{compositeFilter:{op:Y8(t.op),filters:r}}}(n):oe(54877,{filter:n})}function X8(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Vk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ld=class n{constructor(e,t,r,i,o=he.min(),s=he.min(),a=rn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var EE=class{constructor(e){this.yt=e}};function J8(n){let e=W8({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cE(e,e.limit,"L"):e}var Hg=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(tt(e.integerValue));else if("doubleValue"in e){let r=tt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),od(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Li(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Vi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?dk(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):uk(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):oe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Mc,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(tt(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),re.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Hg.Kt=new Hg;var IE=class{constructor(){this.Cn=new CE}addToCollectionParentIndex(e,t){return this.Cn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Gs.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},CE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Lt(nt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Lt(nt.comparator)).toArray()}};var wle=new Uint8Array(0);var EN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jk=41943040,Zn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(jk,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);var ud=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var IN="LruGarbageCollector",Z8=1048576;function CN([n,e],[t,r]){let i=Se(n,t);return i===0?Se(e,r):i}var DE=class{constructor(e){this.Ir=e,this.buffer=new Lt(CN),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();CN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},TE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(IN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hc(t)?J(IN,"Ignoring IndexedDB error during garbage collection: ",t):yield Bc(t)}yield this.Vr(3e5)}))}},SE=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(EI.ce);let r=new DE(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(EN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EN):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),wc()<=Ie.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function eW(n,e){return new SE(n,e)}var xE=class{constructor(){this.changes=new ji(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var AE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ME=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&nd(r.mutation,i,Gr.empty(),It.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xe()){let i=Bs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ju();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Bs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ui(),s=td(),a=function(){return td()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Bi)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),nd(d.mutation,l,d.mutation.getFieldMask(),It.now())):s.set(l.key,Gr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>a.set(l,new AE(d,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=td(),i=new ut((s,a)=>s-a),o=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Gr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let h=(i.get(a.batchId)||xe()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=Ik();d.forEach(f=>{if(!o.has(f)){let p=Ak(t.get(f),r.get(f));p!==null&&h.set(f,p),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return re.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):z.resolve(Bs()),a=id,c=o;return s.next(l=>z.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,xe())).next(d=>({batchId:a,changes:Ek(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new re(t)).next(r=>{let i=Ju();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ju();return this.indexManager.getCollectionParents(e,o).next(a=>z.forEach(a,c=>{let l=function(h,f){return new Fo(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,br.newInvalidDocument(d)))});let a=Ju();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&nd(d.mutation,l,Gr.empty(),It.now()),fm(t,l)&&(a=a.insert(c,l))}),a})}};var RE=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Yr(i.createTime)}}(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:J8(i.bundledQuery),readTime:Yr(i.readTime)}}(t)),z.resolve()}};var PE=class{constructor(){this.overlays=new ut(re.comparator),this.qr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Bs();return z.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=Bs(),o=t.length+1,s=new re(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ut((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Bs(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Bs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return z.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new fE(t,r));let o=this.qr.get(t);o===void 0&&(o=xe(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var NE=class{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var dd=class{constructor(){this.Qr=new Lt(bt.$r),this.Ur=new Lt(bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new bt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new bt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new re(new nt([])),r=new bt(t,e),i=new bt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new re(new nt([])),r=new bt(t,e),i=new bt(t,e+1),o=xe();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new bt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},bt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return re.comparator(e.key,t.key)||Se(e.Yr,t.Yr)}static Kr(e,t){return Se(e.Yr,t.Yr)||re.comparator(e.key,t.key)}};var kE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(bt.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new dE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new bt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,t){return z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?II:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new bt(t,0),i=new bt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lt(Se);return t.forEach(i=>{let o=new bt(i,0),s=new bt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;re.isDocumentKey(o)||(o=o.child(""));let s=new bt(new re(o),0),a=new Lt(Se);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},s),z.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ue(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(t.mutations,i=>{let o=new bt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new bt(t,0),i=this.Zr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var OE=class{constructor(e){this.ri=e,this.docs=function(){return new ut(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():br.newInvalidDocument(t))}getEntries(e,t){let r=Ui();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():br.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ui(),s=t.path,a=new re(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Jq(Xq(d),r)<=0||(i.has(d.key)||fm(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){oe(9500)}ii(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FE(this)}getSize(e){return z.resolve(this.size)}},FE=class extends xE{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var LE=class{constructor(e){this.persistence=e,this.si=new ji(t=>xI(t),AI),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.oi=0,this._i=new dd,this.targetCount=0,this.ai=ud.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),z.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ud(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Pr(t),z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this._i.containsKey(t))}};var $g=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new EI(0),this.li=!1,this.li=!0,this.hi=new NE,this.referenceDelegate=e(this),this.Pi=new LE(this),this.indexManager=new IE,this.remoteDocumentCache=function(i){return new OE(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new EE(t),this.Ii=new RE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new kE(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);let i=new VE(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},VE=class extends Gw{constructor(e){super(),this.currentSequenceNumber=e}},jE=class n{constructor(e){this.persistence=e,this.Ri=new dd,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw oe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,r=>{let i=re.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,he.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},zg=class n{constructor(e,t){this.persistence=e,this.pi=new ji(r=>n8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=eW(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return z.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,he.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Dg(e.data.value)),t}br(e,t,r){return z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var UE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=xe(),i=xe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var BE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var HE=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return V1()?8:e8(Ot())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new BE;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(wc()<=Ie.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(wc()<=Ie.DEBUG&&J("QueryEngine","Query:",Ec(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(wc()<=Ie.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(t))):z.resolve())}ys(e,t){if(fN(t))return z.resolve(null);let r=Qr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=cE(t,null,"F"),r=Qr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=xe(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,s,c.readTime)?this.ys(e,cE(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,r,i){return fN(t)||i.isEqual(he.min())?z.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?z.resolve(null):(wc()<=Ie.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ec(t)),this.vs(e,s,t,Yq(i,id)).next(a=>a))})}Ds(e,t){let r=new Lt(bk(e));return t.forEach((i,o)=>{fm(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return wc()<=Ie.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ec(t)),this.ps.getDocumentsMatchingQuery(e,t,Gs.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var PI="LocalStore",tW=3e8,$E=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new ut(Se),this.xs=new ji(o=>xI(o),AI),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ME(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function nW(n,e,t,r){return new $E(n,e,t,r)}function Uk(n,e){return M(this,null,function*(){let t=ue(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=xe();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})})}function rW(n,e){let t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let h=l.batch,f=h.keys(),p=z.resolve();return f.forEach(y=>{p=p.next(()=>d.getEntry(c,y)).next(v=>{let _=l.docVersions.get(y);Ue(_!==null,48541),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),d.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=xe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Bk(n){let e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function iW(n,e){let t=ue(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((d,h)=>{let f=i.get(h);if(!f)return;a.push(t.Pi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>t.Pi.addMatchingKeys(o,d.addedDocuments,h)));let p=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(rn.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(h,p),function(v,_,T){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=tW?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,p,d)&&a.push(t.Pi.updateTargetData(o,p))});let c=Ui(),l=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(oW(o,s,e.documentUpdates).next(d=>{c=d.ks,l=d.qs})),!r.isEqual(he.min())){let d=t.Pi.getLastRemoteSnapshotVersion(o).next(h=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Ms=i,o))}function oW(n,e,t){let r=xe(),i=xe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ui();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):J(PI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:s,qs:i}})}function sW(n,e){let t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=II),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aW(n,e){let t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new ld(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function zE(n,e,t){return M(this,null,function*(){let r=ue(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Hc(s))throw s;J(PI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function DN(n,e,t){let r=ue(n),i=he.min(),o=xe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let h=ue(c),f=h.xs.get(d);return f!==void 0?z.resolve(h.Ms.get(f)):h.Pi.getTargetData(l,d)}(r,s,Qr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:he.min(),t?o:xe())).next(a=>(cW(r,_8(e),a),{documents:a,Qs:o})))}function cW(n,e,t){let r=n.Os.get(e)||he.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var qg=class{constructor(){this.activeTargetIds=D8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qE=class{constructor(){this.Mo=new qg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var WE=class{Oo(e){}shutdown(){}};var TN="ConnectivityMonitor",Wg=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(TN,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){J(TN,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cg=null;function GE(){return Cg===null?Cg=function(){return 268435456+Math.round(2147483648*Math.random())}():Cg++,"0x"+Cg.toString(16)}var Fw="RestConnection",lW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},KE=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ng?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=GE(),a=this.zo(e,t.toUriEncodedString());J(Fw,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);let{host:l}=new URL(a),d=Io(l);return this.Jo(e,a,c,r,d).then(h=>(J(Fw,`Received RPC '${e}' ${s}: `,h),h),h=>{throw xc(Fw,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=lW[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var QE=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var nn="WebChannelConnection",YE=class extends KE{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=GE();return new Promise((a,c)=>{let l=new Aw;l.setWithCredentials(!0),l.listenOnce(Mw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Xu.NO_ERROR:let h=l.getResponseJson();J(nn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Xu.TIMEOUT:J(nn,`RPC '${e}' ${s} timed out`),c(new Q(H.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:let f=l.getStatus();if(J(nn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let y=p?.error;if(y&&y.status&&y.message){let v=function(T){let P=T.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(P)>=0?P:H.UNKNOWN}(y.status);c(new Q(v,y.message))}else c(new Q(H.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Q(H.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{J(nn,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);J(nn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}T_(e,t,r){let i=GE(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Nw(),a=Pw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");J(nn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=s.createWebChannel(d,c);this.I_(h);let f=!1,p=!1,y=new QE({Yo:_=>{p?J(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(f||(J(nn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),J(nn,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},Zo:()=>h.close()}),v=(_,T,P)=>{_.listen(T,O=>{try{P(O)}catch(U){setTimeout(()=>{throw U},0)}})};return v(h,bc.EventType.OPEN,()=>{p||(J(nn,`RPC '${e}' stream ${i} transport opened.`),y.o_())}),v(h,bc.EventType.CLOSE,()=>{p||(p=!0,J(nn,`RPC '${e}' stream ${i} transport closed`),y.a_(),this.E_(h))}),v(h,bc.EventType.ERROR,_=>{p||(p=!0,xc(nn,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),y.a_(new Q(H.UNAVAILABLE,"The operation could not be completed")))}),v(h,bc.EventType.MESSAGE,_=>{if(!p){let T=_.data[0];Ue(!!T,16349);let P=T,O=P?.error||P[0]?.error;if(O){J(nn,`RPC '${e}' stream ${i} received error:`,O);let U=O.status,L=function(w){let E=_t[w];if(E!==void 0)return Rk(E)}(U),B=O.message;L===void 0&&(L=H.INTERNAL,B="Unknown error status: "+U+" with message "+O.message),p=!0,y.a_(new Q(L,B)),h.close()}else J(nn,`RPC '${e}' stream ${i} received:`,T),y.u_(T)}}),v(a,Rw.STAT_EVENT,_=>{_.stat===wg.PROXY?J(nn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===wg.NOPROXY&&J(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function Lw(){return typeof document<"u"?document:null}function pm(n){return new yE(n,!0)}var Gg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var SN="PersistentStream",Kg=class{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return M(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return M(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return M(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Fi(t.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new Q(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>M(this,null,function*(){this.state=0,this.start()}))}z_(e){return J(SN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(J(SN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},XE=class extends Kg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=B8(this.serializer,e),r=function(o){if(!("targetChange"in o))return he.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?he.min():s.readTime?Yr(s.readTime):he.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=wE(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=sE(c)?{documents:z8(o,c)}:{query:q8(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Pk(o,s.resumeToken);let l=vE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(he.min())>0){a.readTime=Bg(o,s.snapshotVersion.toTimestamp());let l=vE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=G8(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=wE(this.serializer),t.removeTarget=e,this.q_(t)}},JE=class extends Kg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=$8(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=wE(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>H8(this.serializer,r))};this.q_(t)}};var ZE=class{},eI=class extends ZE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Q(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,_E(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(H.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,_E(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(H.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},tI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fi(t),this.aa=!1):J("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Js="RemoteStore",nI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>M(this,null,function*(){ea(this)&&(J(Js,"Restarting streams for network reachability change."),yield function(c){return M(this,null,function*(){let l=ue(c);l.Ea.add(4),yield vd(l),l.Ra.set("Unknown"),l.Ea.delete(4),yield gm(l)})}(this))}))}),this.Ra=new tI(r,i)}};function gm(n){return M(this,null,function*(){if(ea(n))for(let e of n.da)yield e(!0)})}function vd(n){return M(this,null,function*(){for(let e of n.da)yield e(!1)})}function Hk(n,e){let t=ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),FI(t)?OI(t):$c(t).O_()&&kI(t,e))}function NI(n,e){let t=ue(n),r=$c(t);t.Ia.delete(e),r.O_()&&$k(t,e),t.Ia.size===0&&(r.O_()?r.L_():ea(t)&&t.Ra.set("Unknown"))}function kI(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$c(n).Y_(e)}function $k(n,e){n.Va.Ue(e),$c(n).Z_(e)}function OI(n){n.Va=new mE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),$c(n).start(),n.Ra.ua()}function FI(n){return ea(n)&&!$c(n).x_()&&n.Ia.size>0}function ea(n){return ue(n).Ea.size===0}function zk(n){n.Va=void 0}function uW(n){return M(this,null,function*(){n.Ra.set("Online")})}function dW(n){return M(this,null,function*(){n.Ia.forEach((e,t)=>{kI(n,e)})})}function hW(n,e){return M(this,null,function*(){zk(n),FI(n)?(n.Ra.ha(e),OI(n)):n.Ra.set("Unknown")})}function fW(n,e,t){return M(this,null,function*(){if(n.Ra.set("Online"),e instanceof jg&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){J(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qg(n,r)}else if(e instanceof Tc?n.Va.Ze(e):e instanceof Vg?n.Va.st(e):n.Va.tt(e),!t.isEqual(he.min()))try{let r=yield Bk(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ia.get(l);d&&o.Ia.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.Ia.get(c);if(!d)return;o.Ia.set(c,d.withResumeToken(rn.EMPTY_BYTE_STRING,d.snapshotVersion)),$k(o,c);let h=new ld(d.target,c,l,d.sequenceNumber);kI(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){J(Js,"Failed to raise snapshot:",r),yield Qg(n,r)}})}function Qg(n,e,t){return M(this,null,function*(){if(!Hc(e))throw e;n.Ea.add(1),yield vd(n),n.Ra.set("Offline"),t||(t=()=>Bk(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(null,null,function*(){J(Js,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield gm(n)}))})}function qk(n,e){return e().catch(t=>Qg(n,t,e))}function mm(n){return M(this,null,function*(){let e=ue(n),t=Lo(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:II;for(;pW(e);)try{let i=yield sW(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,gW(e,i)}catch(i){yield Qg(e,i)}Wk(e)&&Gk(e)})}function pW(n){return ea(n)&&n.Ta.length<10}function gW(n,e){n.Ta.push(e);let t=Lo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Wk(n){return ea(n)&&!Lo(n).x_()&&n.Ta.length>0}function Gk(n){Lo(n).start()}function mW(n){return M(this,null,function*(){Lo(n).ra()})}function yW(n){return M(this,null,function*(){let e=Lo(n);for(let t of n.Ta)e.ea(t.mutations)})}function vW(n,e,t){return M(this,null,function*(){let r=n.Ta.shift(),i=hE.from(r,e,t);yield qk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield mm(n)})}function _W(n,e){return M(this,null,function*(){e&&Lo(n).X_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return P8(s)&&s!==H.ABORTED}(i.code)){let o=r.Ta.shift();Lo(r).B_(),yield qk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield mm(r)}})}(n,e)),Wk(n)&&Gk(n)})}function xN(n,e){return M(this,null,function*(){let t=ue(n);t.asyncQueue.verifyOperationInProgress(),J(Js,"RemoteStore received new credentials");let r=ea(t);t.Ea.add(3),yield vd(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield gm(t)})}function bW(n,e){return M(this,null,function*(){let t=ue(n);e?(t.Ea.delete(2),yield gm(t)):e||(t.Ea.add(2),yield vd(t),t.Ra.set("Unknown"))})}function $c(n){return n.ma||(n.ma=function(t,r,i){let o=ue(t);return o.sa(),new XE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:uW.bind(null,n),t_:dW.bind(null,n),r_:hW.bind(null,n),H_:fW.bind(null,n)}),n.da.push(e=>M(null,null,function*(){e?(n.ma.B_(),FI(n)?OI(n):n.Ra.set("Unknown")):(yield n.ma.stop(),zk(n))}))),n.ma}function Lo(n){return n.fa||(n.fa=function(t,r,i){let o=ue(t);return o.sa(),new JE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:mW.bind(null,n),r_:_W.bind(null,n),ta:yW.bind(null,n),na:vW.bind(null,n)}),n.da.push(e=>M(null,null,function*(){e?(n.fa.B_(),yield mm(n)):(yield n.fa.stop(),n.Ta.length>0&&(J(Js,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var rI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function LI(n,e){if(Fi("AsyncQueue",`${e}: ${n}`),Hc(n))return new Q(H.UNAVAILABLE,`${e}: ${n}`);throw n}var Yg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||re.comparator(t.key,r.key):(t,r)=>re.comparator(t.key,r.key),this.keyedMap=Ju(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Xg=class{constructor(){this.ga=new ut(re.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Vc=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Yg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var iI=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},oI=class{constructor(){this.queries=AN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ue(t),o=i.queries;i.queries=AN(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new Q(H.ABORTED,"Firestore shutting down"))}};function AN(){return new ji(n=>_k(n),hm)}function VI(n,e){return M(this,null,function*(){let t=ue(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new iI,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=LI(s,`Initialization of query '${Ec(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&UI(t)})}function jI(n,e){return M(this,null,function*(){let t=ue(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function wW(n,e){let t=ue(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&UI(t)}function EW(n,e,t){let r=ue(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function UI(n){n.Ca.forEach(e=>{e.next()})}var sI,MN;(MN=sI||(sI={})).Ma="default",MN.Cache="cache";var hd=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Vc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sI.Cache}};var Jg=class{constructor(e){this.key=e}},Zg=class{constructor(e){this.key=e}},aI=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=bk(e),this.tu=new Yg(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Xg,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let f=i.get(d),p=fm(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),_=!1;f&&p?f.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),_=!0):this.su(f,p)||(r.track({type:2,doc:p}),_=!0,(c&&this.eu(p,c)>0||l&&this.eu(p,l)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),_=!0):f&&!p&&(r.track({type:1,doc:f}),_=!0,(c||l)&&(a=!0)),_&&(p?(s=s.add(p),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((d,h)=>function(p,y){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Rt:_})}};return v(p)-v(y)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,s.length!==0||l?{snapshot:new Vc(this.query,e.tu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=xe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Zg(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Jg(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=xe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},BI="SyncEngine",cI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},lI=class{constructor(e){this.key=e,this.hu=!1}},uI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ji(a=>_k(a),hm),this.Iu=new Map,this.Eu=new Set,this.du=new ut(re.comparator),this.Au=new Map,this.Ru=new dd,this.Vu={},this.mu=new Map,this.fu=ud.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function IW(n,e,t=!0){return M(this,null,function*(){let r=Zk(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield Kk(r,e,t,!0),i})}function CW(n,e){return M(this,null,function*(){let t=Zk(n);yield Kk(t,e,!0,!1)})}function Kk(n,e,t,r){return M(this,null,function*(){let i=yield aW(n.localStore,Qr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield DW(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Hk(n.remoteStore,i),a})}function DW(n,e,t,r,i){return M(this,null,function*(){n.pu=(h,f,p)=>function(v,_,T,P){return M(this,null,function*(){let O=_.view.ru(T);O.Cs&&(O=yield DN(v.localStore,_.query,!1).then(({documents:I})=>_.view.ru(I,O)));let U=P&&P.targetChanges.get(_.targetId),L=P&&P.targetMismatches.get(_.targetId)!=null,B=_.view.applyChanges(O,v.isPrimaryClient,U,L);return PN(v,_.targetId,B.au),B.snapshot})}(n,h,f,p);let o=yield DN(n.localStore,e,!0),s=new aI(e,o.Qs),a=s.ru(o.documents),c=cd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);PN(n,t,l.au);let d=new cI(e,t,s);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot})}function TW(n,e,t){return M(this,null,function*(){let r=ue(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!hm(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&NI(r.remoteStore,i.targetId),dI(r,i.targetId)}).catch(Bc))):(dI(r,i.targetId),yield zE(r.localStore,i.targetId,!0))})}function SW(n,e){return M(this,null,function*(){let t=ue(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),NI(t.remoteStore,r.targetId))})}function xW(n,e,t){return M(this,null,function*(){let r=OW(n);try{let i=yield function(s,a){let c=ue(s),l=It.now(),d=a.reduce((p,y)=>p.add(y.key),xe()),h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=Ui(),v=xe();return c.Ns.getEntries(p,d).next(_=>{y=_,y.forEach((T,P)=>{P.isValidDocument()||(v=v.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,y)).next(_=>{h=_;let T=[];for(let P of a){let O=R8(P,h.get(P.key).overlayedDocument);O!=null&&T.push(new Bi(P.key,O,hk(O.value.mapValue),Mo.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,T,a)}).next(_=>{f=_;let T=_.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(p,_.batchId,T)})}).then(()=>({batchId:f.batchId,changes:Ek(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Vu[s.currentUser.toKey()];l||(l=new ut(Se)),l=l.insert(a,c),s.Vu[s.currentUser.toKey()]=l}(r,i.batchId,t),yield _d(r,i.changes),yield mm(r.remoteStore)}catch(i){let o=LI(i,"Failed to persist write");t.reject(o)}})}function Qk(n,e){return M(this,null,function*(){let t=ue(n);try{let r=yield iW(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ue(s.hu,14607):i.removedDocuments.size>0&&(Ue(s.hu,42227),s.hu=!1))}),yield _d(t,r,e)}catch(r){yield Bc(r)}})}function RN(n,e,t){let r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ue(s);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let f of h.Sa)f.va(a)&&(l=!0)}),l&&UI(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function AW(n,e,t){return M(this,null,function*(){let r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new ut(re.comparator);s=s.insert(o,br.newNoDocument(o,he.min()));let a=xe().add(o),c=new Lg(he.min(),new Map,new ut(Se),s,a);yield Qk(r,c),r.du=r.du.remove(o),r.Au.delete(e),HI(r)}else yield zE(r.localStore,e,!1).then(()=>dI(r,e,t)).catch(Bc)})}function MW(n,e){return M(this,null,function*(){let t=ue(n),r=e.batch.batchId;try{let i=yield rW(t.localStore,e);Xk(t,r,null),Yk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _d(t,i)}catch(i){yield Bc(i)}})}function RW(n,e,t){return M(this,null,function*(){let r=ue(n);try{let i=yield function(s,a){let c=ue(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(Ue(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);Xk(r,e,t),Yk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _d(r,i)}catch(i){yield Bc(i)}})}function Yk(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function Xk(n,e,t){let r=ue(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function dI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||Jk(n,r)})}function Jk(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(NI(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),HI(n))}function PN(n,e,t){for(let r of t)r instanceof Jg?(n.Ru.addReference(r.key,e),PW(n,r)):r instanceof Zg?(J(BI,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Jk(n,r.key)):oe(19791,{wu:r})}function PW(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(J(BI,"New document in limbo: "+t),n.Eu.add(r),HI(n))}function HI(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new re(nt.fromString(e)),r=n.fu.next();n.Au.set(r,new lI(t)),n.du=n.du.insert(t,r),Hk(n.remoteStore,new ld(Qr(dm(t.path)),r,"TargetPurposeLimboResolution",EI.ce))}}function _d(n,e,t){return M(this,null,function*(){let r=ue(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let d=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=UE.As(c.targetId,l);o.push(d)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(c,l){return M(this,null,function*(){let d=ue(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(l,f=>z.forEach(f.Es,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>z.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Hc(h))throw h;J(PI,"Failed to update sequence numbers: "+h)}for(let h of l){let f=h.targetId;if(!h.fromCache){let p=d.Ms.get(f),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);d.Ms=d.Ms.insert(f,v)}}})}(r.localStore,o))})}function NW(n,e){return M(this,null,function*(){let t=ue(n);if(!t.currentUser.isEqual(e)){J(BI,"User change. New user:",e.toKey());let r=yield Uk(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new Q(H.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _d(t,r.Ls)}})}function kW(n,e){let t=ue(n),r=t.Au.get(e);if(r&&r.hu)return xe().add(r.key);{let i=xe(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function Zk(n){let e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AW.bind(null,e),e.Pu.H_=wW.bind(null,e.eventManager),e.Pu.yu=EW.bind(null,e.eventManager),e}function OW(n){let e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RW.bind(null,e),e}var eO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=pm(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return nW(this.persistence,new HE,t.initialUser,this.serializer)}Cu(t){return new $g(jE.mi,this.serializer)}Du(t){return new qE}terminate(){return M(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),hI=class extends eO{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ue(this.persistence.referenceDelegate instanceof zg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new TE(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new $g(r=>zg.mi(r,t),this.serializer)}};var FW=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=NW.bind(null,this.syncEngine),yield bW(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new oI}()}createDatastore(t){let r=pm(t.databaseInfo.databaseId),i=function(s){return new YE(s)}(t.databaseInfo);return function(s,a,c,l){return new eI(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new nI(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>RN(this.syncEngine,r,0),function(){return Wg.v()?new Wg:new WE}())}createSyncEngine(t,r){return function(o,s,a,c,l,d,h){let f=new uI(o,s,a,c,l,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){yield function(r){return M(this,null,function*(){let i=ue(r);J(Js,"RemoteStore shutting down."),i.Ea.add(5),yield vd(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var fd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Vo="FirestoreClient",fI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){J(Vo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(J(Vo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=LI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vw(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),J(Vo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(null,null,function*(){r.isEqual(i)||(yield Uk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function NN(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield LW(n);J(Vo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>xN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>xN(e.remoteStore,i)),n._onlineComponents=e})}function LW(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(Vo,"Using user provided OfflineComponentProvider");try{yield Vw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;xc("Error using user provided cache. Falling back to memory cache: "+t),yield Vw(n,new eO)}}else J(Vo,"Using default OfflineComponentProvider"),yield Vw(n,new hI(void 0));return n._offlineComponents})}function tO(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(Vo,"Using user provided OnlineComponentProvider"),yield NN(n,n._uninitializedComponentsProvider._online)):(J(Vo,"Using default OnlineComponentProvider"),yield NN(n,new FW))),n._onlineComponents})}function VW(n){return tO(n).then(e=>e.syncEngine)}function em(n){return M(this,null,function*(){let e=yield tO(n),t=e.eventManager;return t.onListen=IW.bind(null,e.syncEngine),t.onUnlisten=TW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=SW.bind(null,e.syncEngine),t})}function jW(n,e,t={}){let r=new vr;return n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return function(o,s,a,c,l){let d=new fd({next:f=>{d.Nu(),s.enqueueAndForget(()=>jI(o,h));let p=f.docs.has(a);!p&&f.fromCache?l.reject(new Q(H.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&c&&c.source==="server"?l.reject(new Q(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new hd(dm(a.path),d,{includeMetadataChanges:!0,qa:!0});return VI(o,h)}(yield em(n),n.asyncQueue,e,t,r)})),r.promise}function UW(n,e,t={}){let r=new vr;return n.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return function(o,s,a,c,l){let d=new fd({next:f=>{d.Nu(),s.enqueueAndForget(()=>jI(o,h)),f.fromCache&&c.source==="server"?l.reject(new Q(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new hd(a,d,{includeMetadataChanges:!0,qa:!0});return VI(o,h)}(yield em(n),n.asyncQueue,e,t,r)})),r.promise}function nO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var kN=new Map;var rO="firestore.googleapis.com",ON=!0,tm=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rO,this.ssl=ON}else this.host=e.host,this.ssl=e.ssl??ON;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z8)throw new Q(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nO(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jw;switch(r.type){case"firstParty":return new $w(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=kN.get(t);r&&(J("ComponentProvider","Removing Datastore"),kN.delete(t),r.terminate())}(this),Promise.resolve()}};function BW(n,e,t,r={}){n=_r(n,jc);let i=Io(e),o=n._getSettings(),s=te(j({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(Qp(`https://${a}`),Yp("Firestore",!0)),o.host!==rO&&o.host!==a&&xc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=te(j({},o),{host:a,ssl:i,emulatorOptions:r});if(!$r(c,s)&&(n._setSettings(c),r.mockUserToken)){let l,d;if(typeof r.mockUserToken=="string")l=r.mockUserToken,d=Ft.MOCK_USER;else{l=P1(r.mockUserToken,n._app?.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Q(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ft(h)}n._authCredentials=new Uw(new xg(l,d))}}var jo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Vt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(yd(t,n._jsonSchema))return new n(e,r||null,new re(nt.fromString(t.referencePath)))}};Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Et("string",Vt._jsonSchemaVersion),referencePath:Et("string")};var Ro=class n extends jo{constructor(e,t,r){super(e,t,dm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new re(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function bd(n,e,...t){if(n=dn(n),HN("collection","path",e),n instanceof jc){let r=nt.fromString(e,...t);return eN(r),new Ro(n,null,r)}{if(!(n instanceof Vt||n instanceof Ro))throw new Q(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(nt.fromString(e,...t));return eN(r),new Ro(n.firestore,null,r)}}function wd(n,e,...t){if(n=dn(n),arguments.length===1&&(e=rd.newId()),HN("doc","path",e),n instanceof jc){let r=nt.fromString(e,...t);return ZP(r),new Vt(n,null,new re(r))}{if(!(n instanceof Vt||n instanceof Ro))throw new Q(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(nt.fromString(e,...t));return ZP(r),new Vt(n.firestore,n instanceof Ro?n.converter:null,new re(r))}}var FN="AsyncQueue",nm=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gg(this,"async_queue_retry"),this._c=()=>{let r=Lw();r&&J(FN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Lw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Lw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new vr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return M(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hc(e))throw e;J(FN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Fi("INTERNAL UNHANDLED ERROR: ",LN(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=rI.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&oe(47125,{Pc:LN(this.nc)})}verifyOperationInProgress(){}Tc(){return M(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function LN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function VN(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Hi=class extends jc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new nm(e),this._firestoreClient=void 0,yield e}})}};function ym(n,e){let t=typeof n=="object"?n:Zp(),r=typeof n=="string"?n:e||Ng,i=Bu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=R1("firestore");o&&BW(i,...o)}return i}function vm(n){if(n._terminated)throw new Q(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HW(n),n._firestoreClient}function HW(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new Kw(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,nO(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new fI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Po=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rn.fromBase64String(e))}catch(t){throw new Q(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yd(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Po._jsonSchemaVersion="firestore/bytes/1.0",Po._jsonSchema={type:Et("string",Po._jsonSchemaVersion),bytes:Et("string")};var pd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rm=class{constructor(e){this._methodName=e}};var No=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(yd(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};No._jsonSchemaVersion="firestore/geoPoint/1.0",No._jsonSchema={type:Et("string",No._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};var ko=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yd(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Q(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ko._jsonSchemaVersion="firestore/vectorValue/1.0",ko._jsonSchema={type:Et("string",ko._jsonSchemaVersion),vectorValues:Et("object")};var $W=/^__.*__$/,pI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xs(e,this.data,t,this.fieldTransforms)}};function iO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{Ac:n})}}var gI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(j(j({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return im(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iO(this.Ac)&&$W.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},mI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pm(e)}Cc(e,t,r,i=!1){return new gI({Ac:e,methodName:t,Dc:r,path:jn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $I(n){let e=n._freezeSettings(),t=pm(n._databaseId);return new mI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oO(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);cO("Data must be an object, but it was:",s,r);let a=sO(r,s),c,l;if(o.merge)c=new Gr(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let h of o.mergeFields){let f=qW(e,h,t);if(!s.contains(f))throw new Q(H.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);GW(d,f)||d.push(f)}c=new Gr(d),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new pI(new yr(a),c,l)}function zW(n,e,t,r=!1){return zI(t,n.Cc(r?4:3,e))}function zI(n,e){if(aO(n=dn(n)))return cO("Unsupported field value:",e,n),sO(n,e);if(n instanceof rm)return function(r,i){if(!iO(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=zI(a,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=It.fromDate(r);return{timestampValue:Bg(i.serializer,o)}}if(r instanceof It){let o=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bg(i.serializer,o)}}if(r instanceof No)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Po)return{bytesValue:Pk(i.serializer,r._byteString)};if(r instanceof Vt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ko)return function(s,a){return{mapValue:{fields:{[DI]:{stringValue:TI},[Mc]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return MI(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${cm(r)}`)}(n,e)}function sO(n,e){let t={};return ik(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(n,(r,i)=>{let o=zI(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function aO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof No||n instanceof Po||n instanceof Vt||n instanceof rm||n instanceof ko)}function cO(n,e,t){if(!aO(t)||!$N(t)){let r=cm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function qW(n,e,t){if((e=dn(e))instanceof pd)return e._internalPath;if(typeof e=="string")return lO(n,e);throw im("Field path arguments must be of type string or ",n,!1,void 0,t)}var WW=new RegExp("[~\\*/\\[\\]]");function lO(n,e,t){if(e.search(WW)>=0)throw im(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch{throw im(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function im(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Q(H.INVALID_ARGUMENT,a+n+c)}function GW(n,e){return n.some(t=>t.isEqual(e))}var om=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(_m("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},yI=class extends om{data(){return super.data()}};function _m(n,e){return typeof e=="string"?lO(n,e):e instanceof pd?e._internalPath:e._delegate._internalPath}function uO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Q(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gd=class{},sm=class extends gd{};function qI(n,e,...t){let r=[];e instanceof gd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof vI).length,a=o.filter(c=>c instanceof am).length;if(s>1||s>0&&a>0)throw new Q(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var am=class n extends sm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return fO(e._query,t),new jo(e.firestore,e.converter,aE(e._query,t))}_parse(e){let t=$I(e.firestore);return function(o,s,a,c,l,d,h){let f;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){UN(h,d);let y=[];for(let v of h)y.push(jN(c,o,v));f={arrayValue:{values:y}}}else f=jN(c,o,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||UN(h,d),f=zW(a,s,h,d==="in"||d==="not-in");return wt.create(l,d,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function dO(n,e,t){let r=e,i=_m("where",n);return am._create(i,r,t)}var vI=class n extends gd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:wr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)fO(s,c),s=aE(s,c)}(e._query,t),new jo(e.firestore,e.converter,aE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _I=class n extends sm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new Q(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ks(o,s)}(e._query,this._field,this._direction);return new jo(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Fo(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function hO(n,e="asc"){let t=e,r=_m("orderBy",n);return _I._create(r,t)}function jN(n,e,t){if(typeof(t=dn(t))=="string"){if(t==="")throw new Q(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vk(e)&&t.indexOf("/")!==-1)throw new Q(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(nt.fromString(t));if(!re.isDocumentKey(r))throw new Q(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return aN(n,new re(r))}if(t instanceof Vt)return aN(n,t._key);throw new Q(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cm(t)}.`)}function UN(n,e){if(!Array.isArray(n)||n.length===0)throw new Q(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Q(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var bI=class{convertValue(e,t="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Zs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Mc].arrayValue?.values?.map(r=>tt(r.doubleValue));return new ko(t)}convertGeoPoint(e){return new No(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=um(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sd(e));default:return null}}convertTimestamp(e){let t=Li(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=nt.fromString(e);Ue(Vk(r),9688,{name:e});let i=new kg(r.get(1),r.get(3)),o=new re(r.popFirst(5));return i.isEqual(t)||Fi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function pO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var $s=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},zs=class n extends om{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(_m("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:Et("string",zs._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};var Sc=class extends zs{data(e={}){return super.data(e)}},qs=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $s(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sc(this._firestore,this._userDataWriter,r.key,r,new $s(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Sc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Sc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:KW(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function KW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:n})}}function bm(n){n=_r(n,Vt);let e=_r(n.firestore,Hi);return jW(vm(e),n._key).then(t=>vO(e,n,t))}qs._jsonSchemaVersion="firestore/querySnapshot/1.0",qs._jsonSchema={type:Et("string",qs._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};var md=class extends bI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}};function gO(n){n=_r(n,jo);let e=_r(n.firestore,Hi),t=vm(e),r=new md(e);return uO(n._query),UW(t,n._query).then(i=>new qs(e,r,n,i))}function wm(n,e,t){n=_r(n,Vt);let r=_r(n.firestore,Hi),i=pO(n.converter,e,t);return yO(r,[oO($I(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Mo.none())])}function WI(n,e){let t=_r(n.firestore,Hi),r=wd(n),i=pO(n.converter,e);return yO(t,[oO($I(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Mo.exists(!1))]).then(()=>r)}function mO(n,...e){n=dn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||VN(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(VN(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof Vt)s=_r(n.firestore,Hi),a=dm(n._key.path),o={next:c=>{e[r]&&e[r](vO(s,n,c))},error:e[r+1],complete:e[r+2]};else{let c=_r(n,jo);s=_r(c.firestore,Hi),a=c._query;let l=new md(s);o={next:d=>{e[r]&&e[r](new qs(s,l,c,d))},error:e[r+1],complete:e[r+2]},uO(n._query)}return function(l,d,h,f){let p=new fd(f),y=new hd(d,p,h);return l.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return VI(yield em(l),y)})),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return jI(yield em(l),y)}))}}(vm(s),a,i,o)}function yO(n,e){return function(r,i){let o=new vr;return r.asyncQueue.enqueueAndForget(()=>M(null,null,function*(){return xW(yield VW(r),i,o)})),o.promise}(vm(n),e)}function vO(n,e,t){let r=t.docs.get(e._key),i=new md(n);return new zs(n,i,e._key,r,new $s(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Uc=i})(So),To(new Jn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Hi(new Bw(r.getProvider("auth-internal")),new zw(s,r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Q(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kg(l.options.projectId,d)}(s,i),s);return o=j({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),gr(YP,XP,e),gr(YP,XP,"esm2020")})();var Uo=class n{constructor(e){this.router=e}login(e){localStorage.setItem("usuario",JSON.stringify(e))}logout(){localStorage.removeItem("usuario"),this.router.navigate(["/iniciar-sesion"])}obtenerUsuario(){let e=localStorage.getItem("usuario");return e?JSON.parse(e):null}estaAutenticado(){return this.obtenerUsuario()!==null}static \u0275fac=function(t){return new(t||n)(Z(Qe))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function QW(n,e){if(n&1&&(A(0,"div",15),k(1),S()),n&2){let t=me();V(),lt(" ",t.errorMensaje," ")}}function YW(n,e){n&1&&(A(0,"div"),k(1,"Campo obligatorio"),S())}function XW(n,e){n&1&&(A(0,"div"),k(1,"Formato incorrecto (ej: ejemplo@correo.com)"),S())}function JW(n,e){if(n&1&&(A(0,"div",16),ne(1,YW,2,0,"div",17)(2,XW,2,0,"div",17),S()),n&2){let t=me();V(),W("ngIf",t.correo.errors==null?null:t.correo.errors.required),V(),W("ngIf",t.correo.errors==null?null:t.correo.errors.pattern)}}function ZW(n,e){n&1&&(A(0,"div"),k(1,"Campo obligatorio"),S())}function e9(n,e){n&1&&(A(0,"div"),k(1," La contrase\xF1a debe tener entre 3 y 15 caracteres "),S())}function t9(n,e){if(n&1&&(A(0,"div",16),ne(1,ZW,2,0,"div",17)(2,e9,2,0,"div",17),S()),n&2){let t=me();V(),W("ngIf",t.contrasenia.errors==null?null:t.contrasenia.errors.required),V(),W("ngIf",(t.contrasenia.errors==null?null:t.contrasenia.errors.minlength)||(t.contrasenia.errors==null?null:t.contrasenia.errors.maxlength))}}var n9=new Iw,r9={apiKey:"AIzaSyDkPpRlEopZBiUoFt8GKoD6KLWkws4HqkQ",authDomain:"comercio-7a648.firebaseapp.com",projectId:"comercio-7a648",storageBucket:"comercio-7a648.appspot.com",messagingSenderId:"246230784294",appId:"1:246230784294:web:c288085c03729ddca849e7"},Ed=class n{constructor(e,t,r){this.http=e;this.router=t;this.autenticacion=r;this.formularioIniciarSesion=new bo({correo:new Xn("",[At.required,At.pattern(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9]+\.[a-zA-Z]{2,3}(\.[a-zA-Z]{2})?$/)]),contrasenia:new Xn("",[At.required,At.minLength(3),At.maxLength(15)])})}formularioIniciarSesion;errorMensaje="";app=Z0().length===0?Hu(r9):Z0()[0];auth=Sw(this.app);db=ym(this.app);get correo(){return this.formularioIniciarSesion.get("correo")}get contrasenia(){return this.formularioIniciarSesion.get("contrasenia")}loginTradicional(){this.http.post("http://localhost:3000/iniciarSesion",this.formularioIniciarSesion.value).subscribe({next:e=>{let t=e.usuario;if(t.rol_id!==1&&t.rol_id!==2){this.errorMensaje="Rol no autorizado";return}this.autenticacion.login(t),this.redirigirPorRol(t.rol_id)},error:e=>{e.status===401||e.status===404?this.errorMensaje="Correo o contrase\xF1a incorrectos":this.errorMensaje="Error del servidor. Int\xE9ntalo m\xE1s tarde."}})}loginConGoogle(){Tw(this.auth,n9).then(e=>M(this,null,function*(){let t=e.user,r=wd(this.db,"users",t.uid),i=yield bm(r);i.exists()||(yield wm(r,{email:t.email,nombre:t.displayName,id:t.uid,rol:"user"}));let a=((i.exists()?i.data():null)?.rol??"user")==="admin"?2:1,c={correo:t.email??"",nombre:t.displayName??"",apellido:"",id:t.uid,rol_id:a,permisos_especiales:a===2?"Todos":""};this.autenticacion.login(c),this.redirigirPorRol(a)})).catch(e=>{console.error("Error en autenticaci\xF3n con Google:",e),this.errorMensaje="No se pudo iniciar sesi\xF3n con Google"})}redirigirPorRol(e){e===1||e===2?this.router.navigate(["/gestion"]):this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)(q(Nt),q(Qe),q(Uo))};static \u0275cmp=we({type:n,selectors:[["app-iniciar-sesion"]],decls:24,vars:4,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100","bodyInicioRegistro",2,"position","relative","z-index","1"],[1,"card","shadow","p-4",2,"width","100%","max-width","400px"],[1,"text-center","mb-4"],["class","alert alert-danger text-center",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","correo",1,"form-label"],["id","correo","formControlName","correo",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["for","contrasena",1,"form-label"],["type","password","id","contrasena","formControlName","contrasenia",1,"form-control"],["type","submit",1,"btn","btn-primary","mt-2","w-100"],["type","button",1,"btn","btn-danger","mt-3","w-100",3,"click"],[1,"text-center","mt-3"],["routerLink","/registrar-usuario"],[1,"alert","alert-danger","text-center"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h1",2),k(3,"INICIAR SESI\xD3N"),S(),ne(4,QW,2,1,"div",3),A(5,"form",4),ee("ngSubmit",function(){return r.loginTradicional()}),A(6,"div",5)(7,"label",6),k(8,"Correo Electr\xF3nico"),S(),se(9,"input",7),ne(10,JW,3,2,"div",8),S(),A(11,"div",5)(12,"label",9),k(13,"Contrase\xF1a"),S(),se(14,"input",10),ne(15,t9,3,2,"div",8),S(),A(16,"button",11),k(17," Iniciar sesi\xF3n (clientes y administradores) "),S(),A(18,"button",12),ee("click",function(){return r.loginConGoogle()}),k(19," Iniciar con Gmail (solo para clientes) "),S(),A(20,"div",13),k(21," \xBFNo ten\xE9s cuenta? "),A(22,"a",14),k(23,"Registrate ac\xE1"),S()()()()()),t&2&&(V(4),W("ngIf",r.errorMensaje),V(),W("formGroup",r.formularioIniciarSesion),V(5),W("ngIf",r.correo.touched&&r.correo.invalid),V(5),W("ngIf",r.contrasenia.touched&&r.contrasenia.invalid))},dependencies:[Le,pt,qp,Eo,tn,Cn,wo,ku,Ou,kt,dr],encapsulation:2})};function i9(n,e){n&1&&(A(0,"div",23),k(1,` \xA1Usuario creado con \xE9xito! Redirigiendo...
`),S())}function o9(n,e){n&1&&(A(0,"div"),k(1,"Campo obligatorio"),S())}function s9(n,e){n&1&&(A(0,"div"),k(1,"Solo letras permitidas"),S())}function a9(n,e){if(n&1&&(A(0,"div",24),ne(1,o9,2,0,"div",25)(2,s9,2,0,"div",25),S()),n&2){let t,r,i=me();V(),W("ngIf",(t=i.registerForm.get("nombre"))==null||t.errors==null?null:t.errors.required),V(),W("ngIf",(r=i.registerForm.get("nombre"))==null||r.errors==null?null:r.errors.pattern)}}function c9(n,e){n&1&&(A(0,"div"),k(1,"Campo obligatorio"),S())}function l9(n,e){n&1&&(A(0,"div"),k(1,"Solo letras permitidas"),S())}function u9(n,e){if(n&1&&(A(0,"div",24),ne(1,c9,2,0,"div",25)(2,l9,2,0,"div",25),S()),n&2){let t,r,i=me();V(),W("ngIf",(t=i.registerForm.get("apellido"))==null||t.errors==null?null:t.errors.required),V(),W("ngIf",(r=i.registerForm.get("apellido"))==null||r.errors==null?null:r.errors.pattern)}}function d9(n,e){n&1&&(A(0,"div"),k(1,"Campo obligatorio"),S())}function h9(n,e){if(n&1&&(A(0,"div",24),ne(1,d9,2,0,"div",25),S()),n&2){let t,r=me();V(),W("ngIf",(t=r.registerForm.get("direccion"))==null||t.errors==null?null:t.errors.required)}}function f9(n,e){n&1&&(A(0,"div"),k(1,"Campo obligatorio"),S())}function p9(n,e){if(n&1&&(A(0,"div",24),ne(1,f9,2,0,"div",25),S()),n&2){let t,r=me();V(),W("ngIf",(t=r.registerForm.get("telefono"))==null||t.errors==null?null:t.errors.required)}}function g9(n,e){n&1&&(A(0,"div"),k(1,"Campo obligatorio"),S())}function m9(n,e){n&1&&(A(0,"div"),k(1,"Correo inv\xE1lido"),S())}function y9(n,e){if(n&1&&(A(0,"div",24),ne(1,g9,2,0,"div",25)(2,m9,2,0,"div",25),S()),n&2){let t,r,i=me();V(),W("ngIf",(t=i.registerForm.get("correo"))==null||t.errors==null?null:t.errors.required),V(),W("ngIf",(r=i.registerForm.get("correo"))==null||r.errors==null?null:r.errors.email)}}function v9(n,e){n&1&&(A(0,"div"),k(1,"Campo obligatorio"),S())}function _9(n,e){n&1&&(A(0,"div"),k(1," M\xEDnimo 6 caracteres, al menos una letra, un n\xFAmero y un s\xEDmbolo "),S())}function b9(n,e){if(n&1&&(A(0,"div",24),ne(1,v9,2,0,"div",25)(2,_9,2,0,"div",25),S()),n&2){let t,r,i=me();V(),W("ngIf",(t=i.registerForm.get("contrasenia"))==null||t.errors==null?null:t.errors.required),V(),W("ngIf",(r=i.registerForm.get("contrasenia"))==null||r.errors==null?null:r.errors.pattern)}}function w9(n,e){if(n&1&&(A(0,"div",26),k(1),S()),n&2){let t=me();V(),lt(" ",t.errorMsg,`
`)}}var _O=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,E9=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/,Em=class n{constructor(e,t){this.router=e;this.http=t}errorMsg="";registroExitoso=!1;registerForm=new bo({nombre:new Xn("",[At.required,At.pattern(_O)]),apellido:new Xn("",[At.required,At.pattern(_O)]),correo:new Xn("",[At.required,At.email]),contrasenia:new Xn("",[At.required,At.pattern(E9)]),direccion:new Xn("",[At.required]),telefono:new Xn("",[At.required])});soloLetras(e){let t=e.key;/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]$/.test(t)||e.preventDefault()}onSubmit(){if(this.registerForm.invalid){console.warn("Formulario inv\xE1lido:",this.registerForm.value);return}this.http.post("http://localhost:3000/registro",this.registerForm.value,{observe:"response"}).subscribe({next:e=>{console.log("Respuesta completa:",e),e.status===201&&(this.errorMsg="",this.registroExitoso=!0,this.registerForm.reset(),setTimeout(()=>{this.router.navigate(["/iniciar-sesion"])},2e3))},error:e=>{console.error("Error en el registro",e),this.registroExitoso=!1,e.status===409?this.errorMsg="El correo ya est\xE1 registrado.":e.status===400?this.errorMsg="Datos inv\xE1lidos. Verific\xE1 el formulario.":this.errorMsg="Ocurri\xF3 un error inesperado. Intent\xE1 nuevamente."}})}static \u0275fac=function(t){return new(t||n)(q(Qe),q(Nt))};static \u0275cmp=we({type:n,selectors:[["app-registrar-usuario"]],decls:42,vars:10,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100","bodyInicioRegistro",2,"position","relative","z-index","1"],[1,"card","shadow","p-4",2,"width","100%","max-width","500px"],[1,"text-center","mb-4"],["class","alert alert-success text-center animate__animated animate__fadeIn",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["id","nombre","formControlName","nombre",1,"form-control",3,"keypress"],["class","text-danger mt-1",4,"ngIf"],["for","apellido",1,"form-label"],["id","apellido","formControlName","apellido",1,"form-control",3,"keypress"],["for","direccion",1,"form-label"],["id","direccion","formControlName","direccion",1,"form-control"],["for","telefono",1,"form-label"],["id","telefono","formControlName","telefono",1,"form-control"],["for","correo",1,"form-label"],["id","correo","formControlName","correo",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","contrasenia",1,"form-control"],["class","alert alert-danger text-center",4,"ngIf"],["type","submit",1,"btn","btn-success","w-100",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/iniciar-sesion"],[1,"alert","alert-success","text-center","animate__animated","animate__fadeIn"],[1,"text-danger","mt-1"],[4,"ngIf"],[1,"alert","alert-danger","text-center"]],template:function(t,r){if(t&1&&(A(0,"div",0)(1,"div",1)(2,"h1",2),k(3,"REGISTRAR USUARIO"),S(),ne(4,i9,2,0,"div",3),A(5,"form",4),ee("ngSubmit",function(){return r.onSubmit()}),A(6,"div",5)(7,"label",6),k(8,"Nombre"),S(),A(9,"input",7),ee("keypress",function(o){return r.soloLetras(o)}),S(),ne(10,a9,3,2,"div",8),S(),A(11,"div",5)(12,"label",9),k(13,"Apellido"),S(),A(14,"input",10),ee("keypress",function(o){return r.soloLetras(o)}),S(),ne(15,u9,3,2,"div",8),S(),A(16,"div",5)(17,"label",11),k(18,"Direcci\xF3n"),S(),se(19,"input",12),ne(20,h9,2,1,"div",8),S(),A(21,"div",5)(22,"label",13),k(23,"Tel\xE9fono"),S(),se(24,"input",14),ne(25,p9,2,1,"div",8),S(),A(26,"div",5)(27,"label",15),k(28,"Correo"),S(),se(29,"input",16),ne(30,y9,3,2,"div",8),S(),A(31,"div",5)(32,"label",17),k(33,"Contrase\xF1a"),S(),se(34,"input",18),ne(35,b9,3,2,"div",8),S(),ne(36,w9,2,1,"div",19),A(37,"button",20),k(38,"Registrar"),S(),A(39,"div",21)(40,"a",22),k(41,"Volver"),S()()()()()),t&2){let i,o,s,a,c,l;V(4),W("ngIf",r.registroExitoso),V(),W("formGroup",r.registerForm),V(5),W("ngIf",((i=r.registerForm.get("nombre"))==null?null:i.touched)&&((i=r.registerForm.get("nombre"))==null?null:i.invalid)),V(5),W("ngIf",((o=r.registerForm.get("apellido"))==null?null:o.touched)&&((o=r.registerForm.get("apellido"))==null?null:o.invalid)),V(5),W("ngIf",((s=r.registerForm.get("direccion"))==null?null:s.touched)&&((s=r.registerForm.get("direccion"))==null?null:s.invalid)),V(5),W("ngIf",((a=r.registerForm.get("telefono"))==null?null:a.touched)&&((a=r.registerForm.get("telefono"))==null?null:a.invalid)),V(5),W("ngIf",((c=r.registerForm.get("correo"))==null?null:c.touched)&&((c=r.registerForm.get("correo"))==null?null:c.invalid)),V(5),W("ngIf",((l=r.registerForm.get("contrasenia"))==null?null:l.touched)&&((l=r.registerForm.get("contrasenia"))==null?null:l.invalid)),V(),W("ngIf",r.errorMsg),V(),W("disabled",r.registerForm.invalid)}},dependencies:[qp,Eo,tn,Cn,wo,ku,Ou,Le,pt,kt,dr],encapsulation:2})};var Im=class n{ngOnInit(){document.body.classList.add("fondo-no-encontrado")}ngOnDestroy(){document.body.classList.remove("fondo-no-encontrado")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-no-encontrado"]],decls:9,vars:0,consts:[[1,"fondo-blanco"],[1,"contenedor-no-encontrado"],[1,"contenido"],["routerLink","/",1,"boton-volver"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),k(4,"P\xE1gina no encontrada"),S(),A(5,"p"),k(6,"Lo sentimos, la p\xE1gina que est\xE1s buscando no existe."),S(),A(7,"a",3),k(8,"Volver al inicio"),S()()()())},styles:[".contenedor-no-encontrado[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;text-align:center}.contenido[_ngcontent-%COMP%]{background-color:#0009;color:#fff;padding:40px;border-radius:10px;box-shadow:0 0 20px #00000080}.boton-volver[_ngcontent-%COMP%]{display:inline-block;margin-top:20px;padding:10px 20px;background-color:#fff;color:#000;text-decoration:none;border-radius:5px;font-weight:700;transition:background-color .3s ease;z-index:2;position:relative}.boton-volver[_ngcontent-%COMP%]:hover{background-color:#ddd}"]})};var Cm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-gestion"]],decls:10,vars:0,consts:[[1,"d-flex","align-items-center","justify-content-center","min-vh-100",2,"background","url('assets/tu-imagen.jpg') no-repeat center center fixed","background-size","cover","padding-top","80px"],[1,"p-5","rounded-4","shadow-lg","text-dark","text-center",2,"background-color","rgba(255, 255, 255, 0.75)","backdrop-filter","blur(8px)","max-width","700px","width","90%"],[1,"display-4","fw-bold","mb-3"],[1,"bi","bi-box-seam-fill","text-primary","me-2"],[1,"lead","mb-4"],["routerLink","/factura-carrito",1,"btn","btn-primary","btn-lg","px-4"],[1,"bi","bi-arrow-right-circle-fill","me-2"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h1",2),se(3,"i",3),k(4," \xA1Bienvenido al sistema de gesti\xF3n! "),S(),A(5,"p",4),k(6,"Realiza toda la gesti\xF3n desde un solo lugar con facilidad."),S(),A(7,"a",5),se(8,"i",6),k(9," Empezar "),S()()())},dependencies:[fr,kt],encapsulation:2})};var Dm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-gestion-producto"]],decls:14,vars:0,consts:[[1,"container-fluid","vh-100","d-flex","justify-content-center","align-items-center",2,"background","url('URL_DE_TU_IMAGEN') no-repeat center center","background-size","cover"],[1,"card","shadow-lg","bg-light","bg-opacity-75",2,"width","400px"],[1,"card-header","bg-primary","text-white","text-center"],[1,"mb-0","fs-3"],[1,"card-body","d-flex","flex-column","align-items-center","gap-3","p-4"],["routerLink","/gestion-producto/alta",1,"btn","btn-primary","w-100","fs-5"],["routerLink","/gestion-producto/baja",1,"btn","btn-danger","w-100","fs-5"],["routerLink","/gestion-producto/modificar",1,"btn","btn-warning","text-white","w-100","fs-5"],["routerLink","/gestion-producto/listado",1,"btn","btn-info","text-white","w-100","fs-5"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),k(4,"\xBFQu\xE9 desea realizar?"),S()(),A(5,"div",4)(6,"a",5),k(7,"Alta"),S(),A(8,"a",6),k(9,"Baja"),S(),A(10,"a",7),k(11,"Modificar"),S(),A(12,"a",8),k(13,"Ver listado"),S()()()())},dependencies:[fr,kt],encapsulation:2})};var Tn=class n{constructor(e){this.http=e}apiUrl="http://localhost:3000/registrarproducto";crearProducto(e){return this.http.post(this.apiUrl,e)}listarProductos(){return this.http.get(this.apiUrl)}obtenerProductoPorId(e){return this.http.get(`${this.apiUrl}/${e}`)}actualizarProducto(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}eliminarProducto(e){return this.http.delete(`${this.apiUrl}/${e}`)}static \u0275fac=function(t){return new(t||n)(Z(Nt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var KI=n=>({"is-invalid":n});function I9(n,e){n&1&&(A(0,"div",18),k(1,`
\xA0 \u2705 Producto agregado con \xE9xito
`),S())}function C9(n,e){n&1&&(A(0,"div",19),k(1," El nombre es obligatorio. "),S())}function D9(n,e){n&1&&(A(0,"div",19),k(1," La categor\xEDa es obligatoria. "),S())}function T9(n,e){n&1&&(A(0,"div",19),k(1," El precio es obligatorio y debe ser mayor a 0. "),S())}var Tm=class n{constructor(e,t,r){this.productoService=e;this.http=t;this.location=r}nombre="";categoria="";precio=0;descripcion="";imagen="";categorias=[];mostrarMensajeExito=!1;onSubmit(){if(!this.nombre||!this.categoria||this.precio<=0)return;let e={nombre:this.nombre,categoria:this.categoria,precio:this.precio,descripcion:this.descripcion,imagen:this.imagen};this.productoService.crearProducto(e).subscribe({next:()=>{this.mostrarMensajeExito=!0,setTimeout(()=>{this.mostrarMensajeExito=!1,this.location.back()},2e3)},error:t=>{console.error("Error al guardar producto:",t),alert("\u274C Ocurri\xF3 un error al guardar el producto.")}})}static \u0275fac=function(t){return new(t||n)(q(Tn),q(Nt),q(Fr))};static \u0275cmp=we({type:n,selectors:[["app-alta"]],decls:36,vars:18,consts:[["productoForm","ngForm"],["nombreRef","ngModel"],["categoriaRef","ngModel"],["precioRef","ngModel"],["class","position-fixed top-50 start-50 translate-middle alert alert-success shadow-lg text-center px-5 py-4 fs-4","style","z-index: 1050; width: auto; max-width: 90%;",4,"ngIf"],[1,"container-fluid","vh-100","d-flex","justify-content-center","align-items-center",2,"background","url('URL_DE_TU_IMAGEN') no-repeat center center","background-size","cover"],[1,"card","shadow-lg","bg-light","bg-opacity-75","p-4",2,"width","500px"],[1,"card-header","bg-success","text-white","text-center"],[1,"mb-0","fs-3"],[1,"card-body","d-flex","flex-column","gap-3","fs-5",3,"ngSubmit"],[1,"form-label"],["type","text","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","name","categoria","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["type","number","name","precio","required","","min","1",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["name","descripcion","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","imagen",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-success","w-100","fs-5","mt-3"],[1,"position-fixed","top-50","start-50","translate-middle","alert","alert-success","shadow-lg","text-center","px-5","py-4","fs-4",2,"z-index","1050","width","auto","max-width","90%"],[1,"invalid-feedback"]],template:function(t,r){if(t&1){let i=St();ne(0,I9,2,0,"div",4),A(1,"div",5)(2,"div",6)(3,"div",7)(4,"h2",8),k(5,"Registro de Producto"),S()(),A(6,"form",9,0),ee("ngSubmit",function(){return _e(i),be(r.onSubmit())}),A(8,"div")(9,"label",10),k(10,"Nombre:"),S(),A(11,"input",11,1),Pt("ngModelChange",function(s){return _e(i),zt(r.nombre,s)||(r.nombre=s),be(s)}),S(),ne(13,C9,2,0,"div",12),S(),A(14,"div")(15,"label",10),k(16,"Categor\xEDa:"),S(),A(17,"input",13,2),Pt("ngModelChange",function(s){return _e(i),zt(r.categoria,s)||(r.categoria=s),be(s)}),S(),ne(19,D9,2,0,"div",12),S(),A(20,"div")(21,"label",10),k(22,"Precio:"),S(),A(23,"input",14,3),Pt("ngModelChange",function(s){return _e(i),zt(r.precio,s)||(r.precio=s),be(s)}),S(),ne(25,T9,2,0,"div",12),S(),A(26,"div")(27,"label",10),k(28,"Descripci\xF3n:"),S(),A(29,"textarea",15),Pt("ngModelChange",function(s){return _e(i),zt(r.descripcion,s)||(r.descripcion=s),be(s)}),S()(),A(30,"div")(31,"label",10),k(32,"Imagen (URL):"),S(),A(33,"input",16),Pt("ngModelChange",function(s){return _e(i),zt(r.imagen,s)||(r.imagen=s),be(s)}),S()(),A(34,"button",17),k(35,"Guardar Producto"),S()()()()}if(t&2){let i=Of(12),o=Of(18),s=Of(24);W("ngIf",r.mostrarMensajeExito),V(11),Rt("ngModel",r.nombre),W("ngClass",co(12,KI,i.invalid&&i.touched)),V(2),W("ngIf",i.invalid&&i.touched),V(4),Rt("ngModel",r.categoria),W("ngClass",co(14,KI,o.invalid&&o.touched)),V(2),W("ngIf",o.invalid&&o.touched),V(4),Rt("ngModel",r.precio),W("ngClass",co(16,KI,s.invalid&&s.touched)),V(2),W("ngIf",s.invalid&&s.touched),V(4),Rt("ngModel",r.descripcion),V(4),Rt("ngModel",r.imagen)}},dependencies:[Dn,Eo,tn,ks,Cn,wo,Fu,Os,pr,Nu,Le,Di,pt,dr],encapsulation:2})};var QI=(n,e,t)=>({"bi-caret-up-fill":n,"bi-caret-down-fill":e,"bi-caret-down":t}),S9=n=>["/editar-producto",n];function x9(n,e){if(n&1&&(A(0,"tr")(1,"td"),k(2),S(),A(3,"td"),k(4),S(),A(5,"td"),k(6),kn(7,"currency"),S(),A(8,"td")(9,"a",10),k(10," Editar "),S()()()),n&2){let t=e.$implicit;V(2),je(t.nombre),V(2),je(t.categoria),V(2),je(Xa(7,4,t.precio,"ARS")),V(3),W("routerLink",co(7,S9,t.id))}}var Sm=class n{constructor(e){this.productoService=e}productos=[];terminoBusqueda="";campoOrden="nombre";ordenAscendente=!0;ngOnInit(){this.cargarProductos()}cargarProductos(){this.productoService.listarProductos().subscribe({next:e=>{this.productos=e,console.log("Productos cargados:",e)},error:e=>console.error("Error al cargar productos:",e)})}ordenarPor(e){this.campoOrden===e?this.ordenAscendente=!this.ordenAscendente:(this.campoOrden=e,this.ordenAscendente=!0)}productosFiltrados(){let e=this.terminoBusqueda.toLowerCase();return this.productos.filter(r=>r.nombre.toLowerCase().includes(e)||r.categoria.toLowerCase().includes(e)).sort((r,i)=>{let o=r[this.campoOrden],s=i[this.campoOrden];return o<s?this.ordenAscendente?-1:1:o>s?this.ordenAscendente?1:-1:0})}static \u0275fac=function(t){return new(t||n)(q(Tn))};static \u0275cmp=we({type:n,selectors:[["app-listado"]],decls:22,vars:17,consts:[[1,"container-fluid","min-vh-100","pt-5","mt-5",2,"background","url('URL_DE_TU_IMAGEN') no-repeat center center fixed","background-size","cover"],[1,"card","shadow-lg","bg-light","bg-opacity-75","p-4","w-100","mx-auto",2,"max-width","1000px"],[1,"text-center","mb-4"],[1,"mb-3"],["type","text","placeholder","Buscar por nombre o categor\xEDa",1,"form-control",3,"ngModelChange","ngModel"],[1,"table","table-hover","table-bordered","align-middle","text-center","shadow-sm"],[1,"table-success"],[2,"cursor","pointer",3,"click"],[1,"bi",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h2",2),k(3,"Listado de Productos"),S(),A(4,"div",3)(5,"input",4),Pt("ngModelChange",function(o){return zt(r.terminoBusqueda,o)||(r.terminoBusqueda=o),o}),S()(),A(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),ee("click",function(){return r.ordenarPor("nombre")}),k(10," Nombre "),se(11,"i",8),S(),A(12,"th",7),ee("click",function(){return r.ordenarPor("categoria")}),k(13," Categor\xEDa "),se(14,"i",8),S(),A(15,"th",7),ee("click",function(){return r.ordenarPor("precio")}),k(16," Precio "),se(17,"i",8),S(),A(18,"th"),k(19,"Acciones"),S()()(),A(20,"tbody"),ne(21,x9,11,9,"tr",9),S()()()()),t&2&&(V(5),Rt("ngModel",r.terminoBusqueda),V(6),W("ngClass",lo(5,QI,r.campoOrden==="nombre"&&r.ordenAscendente,r.campoOrden==="nombre"&&!r.ordenAscendente,r.campoOrden!=="nombre")),V(3),W("ngClass",lo(9,QI,r.campoOrden==="categoria"&&r.ordenAscendente,r.campoOrden==="categoria"&&!r.ordenAscendente,r.campoOrden!=="categoria")),V(3),W("ngClass",lo(13,QI,r.campoOrden==="precio"&&r.ordenAscendente,r.campoOrden==="precio"&&!r.ordenAscendente,r.campoOrden!=="precio")),V(4),W("ngForOf",r.productosFiltrados()))},dependencies:[Le,Di,wn,Ti,Dn,tn,Cn,pr,fr,kt],encapsulation:2})};var YI=(n,e,t)=>({"bi-caret-up-fill":n,"bi-caret-down-fill":e,"bi-caret-down":t}),A9=n=>["/editar-producto",n];function M9(n,e){if(n&1&&(A(0,"tr")(1,"td"),k(2),S(),A(3,"td"),k(4),S(),A(5,"td"),k(6),S(),A(7,"td")(8,"a",8),k(9," Editar "),S()()()),n&2){let t=e.$implicit;V(2),je(t.nombre),V(2),je(t.categoria),V(2),lt("$",t.precio,""),V(2),W("routerLink",co(4,A9,t.id))}}var xm=class n{constructor(e){this.productoService=e}productos=[];campoOrden="";ordenAscendente=!0;ngOnInit(){this.cargarProductos()}cargarProductos(){this.productoService.listarProductos().subscribe({next:e=>{this.productos=e,console.log("Productos cargados:",e)},error:e=>console.error("Error al cargar productos:",e)})}ordenarPor(e){this.campoOrden===e?this.ordenAscendente=!this.ordenAscendente:(this.campoOrden=e,this.ordenAscendente=!0),this.productos.sort((t,r)=>{let i=t[e]??"",o=r[e]??"",s=i.toString().toLowerCase(),a=o.toString().toLowerCase();return s<a?this.ordenAscendente?-1:1:s>a?this.ordenAscendente?1:-1:0})}static \u0275fac=function(t){return new(t||n)(q(Tn))};static \u0275cmp=we({type:n,selectors:[["app-editar"]],decls:20,vars:16,consts:[[1,"container-fluid","d-flex","justify-content-center","align-items-start","pt-5","mt-5",2,"background","url('URL_DE_TU_IMAGEN') no-repeat center center","background-size","cover","min-height","100vh"],[1,"card","shadow-lg","bg-light","bg-opacity-75","p-4","w-100",2,"max-width","1000px"],[1,"text-center","mb-4"],[1,"table","table-hover","table-bordered","align-middle","text-center","shadow-sm"],[1,"table-success"],[2,"cursor","pointer",3,"click"],[1,"bi",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h2",2),k(3,"Listado de Productos"),S(),A(4,"table",3)(5,"thead",4)(6,"tr")(7,"th",5),ee("click",function(){return r.ordenarPor("nombre")}),k(8," Nombre "),se(9,"i",6),S(),A(10,"th",5),ee("click",function(){return r.ordenarPor("categoria")}),k(11," Categor\xEDa "),se(12,"i",6),S(),A(13,"th",5),ee("click",function(){return r.ordenarPor("precio")}),k(14," Precio "),se(15,"i",6),S(),A(16,"th"),k(17,"Acciones"),S()()(),A(18,"tbody"),ne(19,M9,10,6,"tr",7),S()()()()),t&2&&(V(9),W("ngClass",lo(4,YI,r.campoOrden==="nombre"&&r.ordenAscendente,r.campoOrden==="nombre"&&!r.ordenAscendente,r.campoOrden!=="nombre")),V(3),W("ngClass",lo(8,YI,r.campoOrden==="categoria"&&r.ordenAscendente,r.campoOrden==="categoria"&&!r.ordenAscendente,r.campoOrden!=="categoria")),V(3),W("ngClass",lo(12,YI,r.campoOrden==="precio"&&r.ordenAscendente,r.campoOrden==="precio"&&!r.ordenAscendente,r.campoOrden!=="precio")),V(4),W("ngForOf",r.productos))},dependencies:[Dn,Le,Di,wn,kt],encapsulation:2})};function R9(n,e){if(n&1){let t=St();A(0,"form",7),ee("ngSubmit",function(){_e(t);let i=me();return be(i.onSubmit())}),A(1,"div")(2,"label",8),k(3,"Nombre:"),S(),A(4,"input",9),Pt("ngModelChange",function(i){_e(t);let o=me();return zt(o.producto.nombre,i)||(o.producto.nombre=i),be(i)}),S()(),A(5,"div")(6,"label",8),k(7,"Categor\xEDa:"),S(),A(8,"input",10),Pt("ngModelChange",function(i){_e(t);let o=me();return zt(o.producto.categoria,i)||(o.producto.categoria=i),be(i)}),S()(),A(9,"div")(10,"label",8),k(11,"Precio:"),S(),A(12,"input",11),Pt("ngModelChange",function(i){_e(t);let o=me();return zt(o.producto.precio,i)||(o.producto.precio=i),be(i)}),S()(),A(13,"div",12)(14,"button",13),k(15,"Guardar Cambios"),S(),A(16,"a",14),k(17,"Cancelar"),S()()()}if(n&2){let t=me();V(4),Rt("ngModel",t.producto.nombre),V(4),Rt("ngModel",t.producto.categoria),V(4),Rt("ngModel",t.producto.precio)}}function P9(n,e){n&1&&(A(0,"p",15),k(1,"Cargando producto..."),S())}function N9(n,e){n&1&&(A(0,"div",16),se(1,"i",17),A(2,"span"),k(3,"\xA1Los cambios han sido guardados con \xE9xito!"),S()())}var Am=class n{constructor(e,t,r){this.route=e;this.router=t;this.productoService=r}producto;guardado=!1;cargando=!1;error=null;ngOnInit(){let e=Number(this.route.snapshot.params.id);if(!e){this.error="ID de producto inv\xE1lido";return}this.cargando=!0,this.productoService.obtenerProductoPorId(e).subscribe({next:t=>{this.producto=t,this.cargando=!1},error:t=>{console.error("Error al cargar producto",t),this.error="Error al cargar el producto",this.cargando=!1}})}onSubmit(){if(!this.producto.id){this.error="Producto sin ID. No se puede actualizar.";return}this.productoService.actualizarProducto(this.producto.id,this.producto).subscribe({next:()=>{this.guardado=!0,setTimeout(()=>this.guardado=!1,3e3)},error:e=>{console.error("Error al guardar cambios:",e),alert("Ocurri\xF3 un error al guardar los cambios.")}}),this.productoService.actualizarProducto(this.producto.id,this.producto).subscribe({next:()=>{alert("Producto actualizado correctamente."),this.router.navigate(["/gestion-producto/listado"])},error:e=>{console.error("Error al actualizar producto:",e),this.error="Ocurri\xF3 un error al actualizar el producto."}})}static \u0275fac=function(t){return new(t||n)(q(Yn),q(Qe),q(Tn))};static \u0275cmp=we({type:n,selectors:[["app-editar-producto"]],decls:8,vars:3,consts:[[1,"container-fluid","vh-100","d-flex","justify-content-center","align-items-center",2,"background","url('URL_DE_TU_IMAGEN') no-repeat center center","background-size","cover"],[1,"card","shadow-lg","bg-light","bg-opacity-75","p-4",2,"width","500px"],[1,"card-header","bg-warning","text-white","text-center"],[1,"mb-0","fs-3"],["class","card-body d-flex flex-column gap-3 fs-5",3,"ngSubmit",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],["class","alert alert-success mt-4 text-center d-flex align-items-center justify-content-center gap-2",4,"ngIf"],[1,"card-body","d-flex","flex-column","gap-3","fs-5",3,"ngSubmit"],[1,"form-label"],["type","text","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","categoria","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","precio","required","","min","1",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","mt-2"],["type","submit",1,"btn","btn-warning","text-white","w-50","me-2"],["routerLink","/gestion-producto/modificar",1,"btn","btn-outline-secondary","w-50"],[1,"text-center","mt-3"],[1,"alert","alert-success","mt-4","text-center","d-flex","align-items-center","justify-content-center","gap-2"],[1,"bi","bi-check-circle-fill","fs-4"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),k(4,"Editar Producto"),S()(),ne(5,R9,18,3,"form",4)(6,P9,2,0,"p",5)(7,N9,4,0,"div",6),S()()),t&2&&(V(5),W("ngIf",r.producto),V(),W("ngIf",!r.producto),V(),W("ngIf",r.guardado))},dependencies:[Dn,Eo,tn,ks,Cn,wo,Fu,Os,pr,Nu,Le,pt,kt],encapsulation:2})};function k9(n,e){if(n&1){let t=St();A(0,"tr")(1,"td"),k(2),S(),A(3,"td"),k(4),S(),A(5,"td"),k(6),kn(7,"currency"),S(),A(8,"td",7)(9,"div",8)(10,"button",9),ee("click",function(){let i=_e(t).$implicit,o=me();return be(o.prepararEliminacion(i))}),se(11,"i",10),k(12," Eliminar "),S()()()()}if(n&2){let t=e.$implicit;V(2),je(t.nombre),V(2),je(t.categoria),V(2),je(Xa(7,3,t.precio,"ARS"))}}function O9(n,e){if(n&1){let t=St();A(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h5",15),se(5,"i",16),k(6," Confirmar eliminaci\xF3n "),S(),A(7,"button",17),ee("click",function(){_e(t);let i=me();return be(i.cancelarEliminacion())}),S()(),A(8,"div",18)(9,"p"),k(10,"\xBFEst\xE1 seguro que desea eliminar "),A(11,"strong"),k(12),S(),k(13,"?"),S()(),A(14,"div",19)(15,"button",20),ee("click",function(){_e(t);let i=me();return be(i.confirmarEliminacion())}),se(16,"i",21),k(17),S(),A(18,"button",22),ee("click",function(){_e(t);let i=me();return be(i.cancelarEliminacion())}),se(19,"i",23),k(20," Cancelar "),S()()()()()}if(n&2){let t=me();V(12),lt('"',t.productoAEliminar.nombre,'"'),V(3),W("disabled",t.eliminando),V(2),lt(" ",t.eliminando?"Eliminando...":"Confirmar"," ")}}var Mm=class n{constructor(e){this.productoService=e}productos=[];productoAEliminar=null;eliminando=!1;ngOnInit(){this.cargarProductos()}cargarProductos(){this.productoService.listarProductos().subscribe({next:e=>{this.productos=e,console.log("Productos cargados:",e)},error:e=>{console.error("Error al cargar productos:",e)}})}prepararEliminacion(e){this.productoAEliminar=e}cancelarEliminacion(){this.productoAEliminar=null}confirmarEliminacion(){this.productoAEliminar&&(this.eliminando=!0,this.productoService.eliminarProducto(this.productoAEliminar.id).subscribe({next:()=>{this.productos=this.productos.filter(e=>e.id!==this.productoAEliminar?.id),this.productoAEliminar=null},error:e=>{console.error("Error al eliminar producto:",e),alert("Error al eliminar el producto.")},complete:()=>{this.eliminando=!1}}))}handleEscapeKey(e){this.productoAEliminar&&this.cancelarEliminacion()}static \u0275fac=function(t){return new(t||n)(q(Tn))};static \u0275cmp=we({type:n,selectors:[["app-eliminar-producto"]],hostBindings:function(t,r){t&1&&ee("keydown.escape",function(o){return r.handleEscapeKey(o)},!1,lA)},decls:18,vars:2,consts:[[1,"container-fluid","d-flex","justify-content-center","align-items-start","pt-5","mt-5",2,"background","url('URL_DE_TU_IMAGEN') no-repeat center center","background-size","cover","min-height","100vh"],[1,"card","shadow-lg","bg-light","bg-opacity-75","p-4","w-100",2,"max-width","1000px"],[1,"text-center","mb-4"],[1,"table","table-hover","table-bordered","align-middle","text-center","shadow-sm"],[1,"table-primary"],[4,"ngFor","ngForOf"],["class","custom-modal-backdrop",4,"ngIf"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"btn","btn-outline-danger","btn-sm","d-flex","align-items-center","gap-1",3,"click"],[1,"bi","bi-trash-fill"],[1,"custom-modal-backdrop"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],[1,"bi","bi-exclamation-triangle-fill","me-2"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-danger",3,"click","disabled"],[1,"bi","bi-trash3"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h2",2),k(3,"Seleccione el producto a eliminar"),S(),A(4,"table",3)(5,"thead",4)(6,"tr")(7,"th"),k(8,"Nombre"),S(),A(9,"th"),k(10,"Categor\xEDa"),S(),A(11,"th"),k(12,"Precio"),S(),A(13,"th"),k(14,"Acci\xF3n"),S()()(),A(15,"tbody"),ne(16,k9,13,6,"tr",5),S()()()(),ne(17,O9,21,3,"div",6)),t&2&&(V(16),W("ngForOf",r.productos),V(),W("ngIf",r.productoAEliminar))},dependencies:[Dn,Le,wn,pt,Ti],styles:[".custom-modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0009;z-index:1040;display:flex;align-items:center;justify-content:center}.modal-dialog[_ngcontent-%COMP%]{max-width:600px;width:90%}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:.75rem;padding:1.5rem;box-shadow:0 0 30px #0006}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding-bottom:.75rem}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}.modal-body[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;font-size:1rem}.modal-footer[_ngcontent-%COMP%]{border-top:none;display:flex;justify-content:flex-end;gap:.5rem}.custom-modal-backdrop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.navbar[_ngcontent-%COMP%]{z-index:1060!important}.custom-modal-backdrop[_ngcontent-%COMP%]{pointer-events:none}"]})};var Bo=class n{constructor(e){this.http=e}apiUrlBanco="https://api.bcra.gob.ar/estadisticascambiarias/v1.0/Cotizaciones/USD";getTipoCambio(e,t){return this.http.get(`${this.apiUrlBanco}?fechaDesde=${e}&fechaHasta=${t}`)}static \u0275fac=function(t){return new(t||n)(Z(Nt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var qc=class n{constructor(e){this.http=e}apiUrl="http://localhost:3000";crearFactura(e,t){return this.http.post(`${this.apiUrl}/crear-factura`,{cliente_id:e,productos:t})}obtenerFacturasEmitidas(){return this.http.get("http://localhost:3000/facturas/exportar-csv")}static \u0275fac=function(t){return new(t||n)(Z(Nt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function F9(n,e){if(n&1&&(A(0,"tr")(1,"td"),k(2),S(),A(3,"td"),k(4),S(),A(5,"td"),k(6),kn(7,"currency"),S(),A(8,"td",10),k(9),kn(10,"currency"),S(),A(11,"td"),k(12),kn(13,"currency"),S(),A(14,"td",10),k(15),kn(16,"currency"),S()()),n&2){let t=e.$implicit,r=me();V(2),je(t.nombre),V(2),je(t.cantidad||1),V(2),je(Is(7,6,t.precio,"ARS","symbol","1.2-2")),V(3),lt(" ",Is(10,11,r.calcularTotalARS(t.precio,t.cantidad),"ARS","symbol","1.2-2")," "),V(3),lt(" ",Is(13,16,t.precio/r.tipoCambio,"USD","symbol","1.2-2")," "),V(3),lt(" ",Is(16,21,r.calcularTotalUSD(t.precio,t.cantidad),"USD","symbol","1.2-2")," ")}}var Wc=class n{constructor(e,t){this.tipoCambioService=e;this.facturaService=t}productos=[];confirmarCompra=new it;tipoCambio=0;ngOnInit(){let e="2024-01-01",t=new Date().toISOString().split("T")[0];this.tipoCambioService.getTipoCambio(e,t).subscribe({next:r=>{let i=r?.results?.[0]?.detalle;i?.length>0&&(this.tipoCambio=Number(i[0].tipoCotizacion))},error:r=>{console.error("Error al obtener tipo de cambio:",r),this.tipoCambio=0}})}calcularTotalARS(e,t=1){return e*t}calcularTotalUSD(e,t=1){return!this.tipoCambio||this.tipoCambio<=0?0:this.calcularTotalARS(e,t)/this.tipoCambio}getTotalCantidad(){return this.productos.reduce((e,t)=>e+(t.cantidad||1),0)}getTotalARS(){return this.productos.reduce((e,t)=>e+this.calcularTotalARS(t.precio,t.cantidad),0)}getTotalUSD(){return this.productos.reduce((e,t)=>e+this.calcularTotalUSD(t.precio,t.cantidad),0)}onConfirmarCompra(){if(!this.productos||this.productos.length===0)return;let e=1,t=this.productos.map(r=>({producto_id:r.id,cantidad:r.cantidad||1,precio_unitario:r.precio}));this.facturaService.crearFactura(e,t).subscribe({next:()=>{this.confirmarCompra.emit({productos:this.productos,totalARS:this.getTotalARS(),totalUSD:this.getTotalUSD(),tipoCambio:this.tipoCambio}),this.productos=[]},error:r=>{console.error("\u274C Error al crear factura:",r),alert("Ocurri\xF3 un error al crear la factura")}})}static \u0275fac=function(t){return new(t||n)(q(Bo),q(qc))};static \u0275cmp=we({type:n,selectors:[["app-factura"]],inputs:{productos:"productos"},outputs:{confirmarCompra:"confirmarCompra"},decls:37,vars:15,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"overflow-x-auto","shadow-md","rounded-lg","mb-4"],[1,"table","table-bordered","text-center","align-middle","w-100"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"table-light","fw-semibold"],[1,"text-success"],[1,"d-flex","justify-content-end","mt-4","gap-2"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-check-circle","me-2"],[1,"text-success","fw-semibold"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th"),k(6,"Producto"),S(),A(7,"th"),k(8,"Cantidad"),S(),A(9,"th"),k(10,"Precio Unitario ARS"),S(),A(11,"th"),k(12,"Total ARS"),S(),A(13,"th"),k(14,"Precio Unitario USD"),S(),A(15,"th"),k(16,"Total USD"),S()()(),A(17,"tbody"),ne(18,F9,17,26,"tr",4),S(),A(19,"tfoot",5)(20,"tr")(21,"td"),k(22,"Total"),S(),A(23,"td"),k(24),S(),se(25,"td"),A(26,"td",6),k(27),kn(28,"currency"),S(),se(29,"td"),A(30,"td",6),k(31),kn(32,"currency"),S()()()()(),A(33,"div",7)(34,"button",8),ee("click",function(){return r.onConfirmarCompra()}),se(35,"i",9),k(36," Confirmar Compra "),S()()()),t&2&&(V(18),W("ngForOf",r.productos),V(6),je(r.getTotalCantidad()),V(3),je(Is(28,5,r.getTotalARS(),"ARS","symbol","1.2-2")),V(4),je(Is(32,10,r.getTotalUSD(),"USD","symbol","1.2-2")),V(3),W("disabled",!r.productos||r.productos.length===0))},dependencies:[Le,wn,Ti],encapsulation:2})};var Rm=class n{app=Hu(L9);db=ym(this.app);sendMessage(e,t,r,i){return M(this,null,function*(){let o=bd(this.db,`conversations/${e}/messages`);yield WI(o,{text:t,senderName:r,senderRole:i,timestamp:new Date})})}getMessagesRealtime(e,t){let r=bd(this.db,`conversations/${e}/messages`),i=qI(r,hO("timestamp"));mO(i,o=>{let s=o.docs.map(a=>j({id:a.id},a.data()));t(s)})}getConversations(e){return M(this,null,function*(){let t=bd(this.db,"conversations"),r=qI(t,dO("participants","array-contains",e));return(yield gO(r)).docs.map(o=>j({id:o.id},o.data()))})}createConversation(e){return M(this,null,function*(){let t=bd(this.db,"conversations");return(yield WI(t,{participants:e,createdAt:new Date})).id})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})},L9={apiKey:"AIzaSyDkPpRlEopZBiUoFt8GKoD6KLWkws4HqkQ",authDomain:"comercio-7a648.firebaseapp.com",projectId:"comercio-7a648",storageBucket:"comercio-7a648.firebasestorage.app",messagingSenderId:"246230784294",appId:"1:246230784294:web:c288085c03729ddca849e7",measurementId:"G-4VYBQ02Y6L"};var j9=["messagesContainer"];function U9(n,e){if(n&1&&(A(0,"div",8)(1,"div",9)(2,"span",10),k(3),S(),A(4,"span",11),k(5),S()(),A(6,"div",12),k(7),S()()),n&2){let t=e.$implicit;W("ngClass",t.senderRole==="Administrador"?"message admin":"message client"),V(3),je(t.senderName),V(2),lt("(",t.senderRole,")"),V(2),lt(" ",t.text," ")}}var Pm=class n{constructor(e){this.chatService=e}userId="";userName="";userRole="";conversationId="";messages=[];newMessage="";ngOnInit(){return M(this,null,function*(){let e=JSON.parse(localStorage.getItem("usuario")||"{}");if(this.userId=e?.id||"",this.userName=e?.nombre||"Usuario An\xF3nimo",this.userRole=e?.rol||"user",!this.userId){console.error("No se encontr\xF3 el usuario en localStorage");return}this.conversationId="chat-global";let t=wd(this.chatService.db,"conversations",this.conversationId);(yield bm(t)).exists()||(yield wm(t,{participants:[],createdAt:new Date})),this.chatService.getMessagesRealtime(this.conversationId,i=>{this.messages=i})})}sendMessage(){return M(this,null,function*(){if(!this.conversationId||!this.newMessage.trim())return;let e=JSON.parse(localStorage.getItem("usuario")||"{}"),t=`${e?.nombre||""} ${e?.apellido||""}`.trim(),i=e?.rol_id===2?"Administrador":"Cliente";yield this.chatService.sendMessage(this.conversationId,this.newMessage,t,i),this.newMessage=""})}messagesContainer;ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch{}}static \u0275fac=function(t){return new(t||n)(q(Rm))};static \u0275cmp=we({type:n,selectors:[["app-chat"]],viewQuery:function(t,r){if(t&1&&ao(j9,5),t&2){let i;Ii(i=Ci())&&(r.messagesContainer=i.first)}},decls:10,vars:2,consts:[["messagesContainer",""],[1,"chat-container"],[1,"chat-title"],[1,"messages"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"input-area"],["type","text","placeholder","Escribe tu mensaje...",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"],[3,"ngClass"],[1,"message-meta"],[1,"sender-name"],[1,"sender-role"],[1,"message-text"]],template:function(t,r){if(t&1){let i=St();A(0,"div",1)(1,"h2",2),k(2,"Chat"),S(),A(3,"div",3,0),ne(5,U9,8,4,"div",4),S(),A(6,"div",5)(7,"input",6),Pt("ngModelChange",function(s){return _e(i),zt(r.newMessage,s)||(r.newMessage=s),be(s)}),ee("keyup.enter",function(){return _e(i),be(r.sendMessage())}),S(),A(8,"button",7),ee("click",function(){return _e(i),be(r.sendMessage())}),k(9,"Enviar"),S()()()}t&2&&(V(5),W("ngForOf",r.messages),V(2),Rt("ngModel",r.newMessage))},dependencies:[Dn,tn,Cn,pr,Le,Di,wn],styles:[".chat-container[_ngcontent-%COMP%]{width:100%;max-width:500px;height:100%;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#f9f9f9;border-radius:10px;padding:15px;box-shadow:0 0 10px #0000001a;margin:0 auto;box-sizing:border-box}.chat-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px;color:#333}.messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:10px;margin-bottom:15px;background-color:#fff;border-radius:8px;border:1px solid #ddd;max-height:350px}.message[_ngcontent-%COMP%]{max-width:80%;padding:10px 12px;margin:8px 0;border-radius:12px;word-wrap:break-word;position:relative;font-size:14px}.message-meta[_ngcontent-%COMP%]{font-size:12px;margin-bottom:5px;color:#555}.sender-name[_ngcontent-%COMP%]{font-weight:700}.sender-role[_ngcontent-%COMP%]{font-style:italic;margin-left:5px}.message.admin[_ngcontent-%COMP%]{align-self:flex-start;background-color:#fcebea;border:1px solid #f5c6cb;color:#721c24}.message.client[_ngcontent-%COMP%]{align-self:flex-end;background-color:#e6f7ff;border:1px solid #bee5eb;color:#0c5460}.input-area[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.input-area[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;padding:10px;border-radius:20px;border:1px solid #ccc;outline:none;transition:border-color .2s}.input-area[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#007bff}.input-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:20px;background-color:#007bff;color:#fff;border:none;transition:background-color .2s;white-space:nowrap}.input-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}@media (max-width: 600px){.chat-container[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:0;height:100vh;max-width:none}.messages[_ngcontent-%COMP%]{max-height:60vh;font-size:13px}.message[_ngcontent-%COMP%]{font-size:13px}.input-area[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.input-area[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .input-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;border-radius:10px}.input-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px}}"]})};var Nm=class n{productosCarrito=[];constructor(){}agregarProducto(e){let t=this.productosCarrito.find(r=>r.id===e.id);t?t.cantidad=e.cantidad??1:this.productosCarrito.push(te(j({},e),{cantidad:e.cantidad??1}))}eliminarProducto(e){this.productosCarrito=this.productosCarrito.filter(t=>t.id!==e)}vaciarCarrito(){this.productosCarrito=[]}obtenerProductos(){return[...this.productosCarrito]}obtenerTotal(){return this.productosCarrito.reduce((e,t)=>e+t.precio*(t.cantidad||1),0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function H9(n,e){if(n&1&&(A(0,"div",14),k(1),S()),n&2){let t=me();V(),lt(" Tipo de cambio USD: ",t.tipoCambio," ")}}function $9(n,e){if(n&1){let t=St();A(0,"tr")(1,"td"),k(2),S(),A(3,"td"),k(4),S(),A(5,"td"),k(6),kn(7,"currency"),S(),A(8,"td")(9,"input",15),Pt("ngModelChange",function(i){let o=_e(t).$implicit;return zt(o.seleccionado,i)||(o.seleccionado=i),be(i)}),ee("change",function(){let i=_e(t).$implicit,o=me();return be(o.actualizarCarrito(i))}),S()(),A(10,"td")(11,"input",16),Pt("ngModelChange",function(i){let o=_e(t).$implicit;return zt(o.cantidad,i)||(o.cantidad=i),be(i)}),ee("input",function(){let i=_e(t).$implicit,o=me();return be(o.actualizarCarrito(i))}),S()()()}if(n&2){let t=e.$implicit;V(2),je(t.nombre),V(2),je(t.categoria),V(2),je(Xa(7,6,t.precio,"ARS")),V(3),Rt("ngModel",t.seleccionado),V(2),Rt("ngModel",t.cantidad),W("disabled",!t.seleccionado)}}function z9(n,e){if(n&1){let t=St();A(0,"button",17),ee("click",function(){_e(t);let i=me();return be(i.cerrarFactura())}),k(1," Deshacer "),S()}}function q9(n,e){if(n&1){let t=St();A(0,"div",18)(1,"div",19)(2,"div",20)(3,"h4",21),k(4,"Factura"),S(),A(5,"button",22),ee("click",function(){_e(t);let i=me();return be(i.cerrarFactura())}),S()(),A(6,"app-factura",23),ee("confirmarCompra",function(i){_e(t);let o=me();return be(o.manejarConfirmacionCompra(i))}),S()()()}if(n&2){let t=me();V(6),W("productos",t.carritoService.obtenerProductos())}}function W9(n,e){n&1&&(A(0,"div",24),k(1,` \u{1F389} \xA1Compra confirmada con \xE9xito!
`),S())}var km=class n{constructor(e,t,r,i,o){this.productoService=e;this.tipoCambioService=t;this.carritoService=r;this.router=i;this.facturaService=o}productosDisponibles=[];mostrarFactura=!1;mostrarExito=!1;tipoCambio=0;ngOnInit(){this.cargarProductos(),this.obtenerTipoCambio(),document.addEventListener("keydown",this.escListener)}ngOnDestroy(){document.removeEventListener("keydown",this.escListener)}escListener=e=>{e.key==="Escape"&&this.mostrarFactura&&this.cerrarFactura()};cargarProductos(){this.productoService.listarProductos().subscribe({next:e=>{this.productosDisponibles=e.map(t=>te(j({},t),{seleccionado:!1,cantidad:1}))},error:e=>console.error("Error al cargar productos:",e)})}actualizarCarrito(e){if(e.seleccionado){let t=te(j({},e),{cantidad:e.cantidad??1});this.carritoService.agregarProducto(t)}else this.carritoService.eliminarProducto(e.id)}confirmarSeleccion(){this.mostrarFactura=!0}cerrarFactura(){this.mostrarFactura=!1}manejarConfirmacionCompra(e){this.carritoService.vaciarCarrito(),this.mostrarFactura=!1,this.mostrarExito=!0,setTimeout(()=>{this.router.navigate(["/gestion"])},3e3)}obtenerTipoCambio(){let e=new Date().toISOString().split("T")[0];this.tipoCambioService.getTipoCambio(e,e).subscribe({next:t=>{t&&t.length>0&&(this.tipoCambio=t[0].tipoCotizacion)},error:t=>console.error("Error al obtener tipo de cambio:",t)})}descargarCSV(){this.facturaService.obtenerFacturasEmitidas().subscribe(e=>{console.log("Datos recibidos:",e);let t=this.convertirAFormatoCSV(e),r=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download="facturas.csv",o.click()})}convertirAFormatoCSV(e){let t=["Fecha","Cliente","Producto","Cantidad","Precio Unitario","Total Producto","Total Factura"],r=new Map;e.forEach(s=>{let a=s.factura_id;r.has(a)||r.set(a,{fecha:s.fecha?s.fecha.split("T")[0]:"",cliente:`${s.cliente_nombre??""} ${s.cliente_apellido??""}`,total_factura:Number(s.total)||0,productos:[]}),r.get(a)?.productos.push({producto:s.producto_nombre||"",cantidad:Number(s.cantidad)||0,precio_unitario:Number(s.precio_unitario)||0,total_producto:Number(s.cantidad*s.precio_unitario)||0})});let i=[];for(let[s,a]of r.entries())a.productos.forEach(c=>{i.push([a.fecha,a.cliente,c.producto,c.cantidad.toString(),c.precio_unitario.toFixed(2),c.total_producto.toFixed(2),""])}),i.push(["","","","","","Total Factura:",a.total_factura.toFixed(2)]);return[t,...i].map(s=>s.map(a=>`"${a.replace(/"/g,'""')}"`).join(",")).join(`
`)}static \u0275fac=function(t){return new(t||n)(q(Tn),q(Bo),q(Nm),q(Qe),q(qc))};static \u0275cmp=we({type:n,selectors:[["app-factura-carrito"]],decls:30,vars:6,consts:[[1,"container","py-5"],[1,"card","shadow-lg","bg-light","bg-opacity-75","p-4"],[1,"text-center","mb-4"],["class","alert alert-info text-center",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","table-bordered","align-middle","text-center","shadow-sm"],[1,"table-primary"],[4,"ngFor","ngForOf"],[1,"text-end","mt-3","d-flex","justify-content-end","gap-2"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-primary",3,"click"],["class","modal-factura-backdrop",4,"ngIf"],["class","alert alert-success text-center position-fixed top-50 start-50 translate-middle shadow-lg p-5 rounded fs-4 fw-bold","style","z-index: 2000; width: 90%; max-width: 600px;",4,"ngIf"],[1,"alert","alert-info","text-center"],["type","checkbox",3,"ngModelChange","change","ngModel"],["type","number","min","1",1,"form-control","text-center","input-cantidad",2,"max-width","80px",3,"ngModelChange","input","ngModel","disabled"],[1,"btn","btn-secondary",3,"click"],[1,"modal-factura-backdrop"],[1,"modal-factura-content"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"m-0"],["aria-label","Cerrar",1,"btn-close",3,"click"],[3,"confirmarCompra","productos"],[1,"alert","alert-success","text-center","position-fixed","top-50","start-50","translate-middle","shadow-lg","p-5","rounded","fs-4","fw-bold",2,"z-index","2000","width","90%","max-width","600px"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h2",2),k(3,"Productos Disponibles"),S(),ne(4,H9,2,1,"div",3),A(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th"),k(10,"Nombre"),S(),A(11,"th"),k(12,"Categor\xEDa"),S(),A(13,"th"),k(14,"Precio"),S(),A(15,"th"),k(16,"Seleccionar"),S(),A(17,"th"),k(18,"Cantidad"),S()()(),A(19,"tbody"),ne(20,$9,12,9,"tr",7),S()()(),A(21,"div",8),ne(22,z9,2,0,"button",9),A(23,"button",10),ee("click",function(){return r.confirmarSeleccion()}),k(24," Confirmar selecci\xF3n "),S(),A(25,"button",11),ee("click",function(){return r.descargarCSV()}),k(26," Exportar facturas emitidas a CSV "),S()()()(),se(27,"app-chat"),ne(28,q9,7,1,"div",12)(29,W9,2,0,"div",13)),t&2&&(V(4),W("ngIf",r.tipoCambio),V(16),W("ngForOf",r.productosDisponibles),V(2),W("ngIf",r.mostrarFactura),V(),W("disabled",r.carritoService.obtenerProductos().length===0),V(5),W("ngIf",r.mostrarFactura),V(),W("ngIf",r.mostrarExito))},dependencies:[Dn,tn,ks,T0,Cn,Os,pr,Le,wn,pt,Ti,Wc,Pm],styles:[".modal-factura-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0009;z-index:1050;display:flex;align-items:center;justify-content:center;padding:1rem}.modal-factura-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:.75rem;padding:1.5rem;max-width:900px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 0 30px #0006}.alert-success[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInScale .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.8) translate(-50%,-50%)}to{opacity:1;transform:scale(1) translate(-50%,-50%)}}.input-cantidad[_ngcontent-%COMP%]{max-width:80px;text-align:center;margin:0 auto;display:block}"]})};function Dd(n){return n+.5|0}var Ho=(n,e,t)=>Math.max(Math.min(n,t),e);function Id(n){return Ho(Dd(n*2.55),0,255)}function $o(n){return Ho(Dd(n*255),0,255)}function $i(n){return Ho(Dd(n/2.55)/100,0,1)}function wO(n){return Ho(Dd(n*100),0,100)}var er={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ZI=[..."0123456789ABCDEF"],G9=n=>ZI[n&15],K9=n=>ZI[(n&240)>>4]+ZI[n&15],Om=n=>(n&240)>>4===(n&15),Q9=n=>Om(n.r)&&Om(n.g)&&Om(n.b)&&Om(n.a);function Y9(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&er[n[1]]*17,g:255&er[n[2]]*17,b:255&er[n[3]]*17,a:e===5?er[n[4]]*17:255}:(e===7||e===9)&&(t={r:er[n[1]]<<4|er[n[2]],g:er[n[3]]<<4|er[n[4]],b:er[n[5]]<<4|er[n[6]],a:e===9?er[n[7]]<<4|er[n[8]]:255})),t}var X9=(n,e)=>n<255?e(n):"";function J9(n){var e=Q9(n)?G9:K9;return n?"#"+e(n.r)+e(n.g)+e(n.b)+X9(n.a,e):void 0}var Z9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function DO(n,e,t){let r=e*Math.min(t,1-t),i=(o,s=(o+n/30)%12)=>t-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function eG(n,e,t){let r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function tG(n,e,t){let r=DO(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function nG(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function eC(n){let t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),s=Math.min(t,r,i),a=(o+s)/2,c,l,d;return o!==s&&(d=o-s,l=a>.5?d/(2-o-s):d/(o+s),c=nG(t,r,i,d,o),c=c*60+.5),[c|0,l||0,a]}function tC(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map($o)}function nC(n,e,t){return tC(DO,n,e,t)}function rG(n,e,t){return tC(tG,n,e,t)}function iG(n,e,t){return tC(eG,n,e,t)}function TO(n){return(n%360+360)%360}function oG(n){let e=Z9.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Id(+e[5]):$o(+e[5]));let i=TO(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?r=rG(i,o,s):e[1]==="hsv"?r=iG(i,o,s):r=nC(i,o,s),{r:r[0],g:r[1],b:r[2],a:t}}function sG(n,e){var t=eC(n);t[0]=TO(t[0]+e),t=nC(t),n.r=t[0],n.g=t[1],n.b=t[2]}function aG(n){if(!n)return;let e=eC(n),t=e[0],r=wO(e[1]),i=wO(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${$i(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var EO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},IO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cG(){let n={},e=Object.keys(IO),t=Object.keys(EO),r,i,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],i=0;i<t.length;i++)o=t[i],a=a.replace(o,EO[o]);o=parseInt(IO[s],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}var Fm;function lG(n){Fm||(Fm=cG(),Fm.transparent=[0,0,0,0]);let e=Fm[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var uG=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dG(n){let e=uG.exec(n),t=255,r,i,o;if(e){if(e[7]!==r){let s=+e[7];t=e[8]?Id(s):Ho(s*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?Id(r):Ho(r,0,255)),i=255&(e[4]?Id(i):Ho(i,0,255)),o=255&(e[6]?Id(o):Ho(o,0,255)),{r,g:i,b:o,a:t}}}function hG(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${$i(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var JI=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Gc=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function fG(n,e,t){let r=Gc($i(n.r)),i=Gc($i(n.g)),o=Gc($i(n.b));return{r:$o(JI(r+t*(Gc($i(e.r))-r))),g:$o(JI(i+t*(Gc($i(e.g))-i))),b:$o(JI(o+t*(Gc($i(e.b))-o))),a:n.a+t*(e.a-n.a)}}function Lm(n,e,t){if(n){let r=eC(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=nC(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function SO(n,e){return n&&Object.assign(e||{},n)}function CO(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=$o(n[3]))):(e=SO(n,{r:0,g:0,b:0,a:1}),e.a=$o(e.a)),e}function pG(n){return n.charAt(0)==="r"?dG(n):oG(n)}var Cd=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=CO(e):t==="string"&&(r=Y9(e)||lG(e)||pG(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=SO(this._rgb);return e&&(e.a=$i(e.a)),e}set rgb(e){this._rgb=CO(e)}rgbString(){return this._valid?hG(this._rgb):void 0}hexString(){return this._valid?J9(this._rgb):void 0}hslString(){return this._valid?aG(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,o,s=t===o?.5:t,a=2*s-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;o=1-l,r.r=255&l*r.r+o*i.r+.5,r.g=255&l*r.g+o*i.g+.5,r.b=255&l*r.b+o*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=fG(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=$o(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Dd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Lm(this._rgb,2,e),this}darken(e){return Lm(this._rgb,2,-e),this}saturate(e){return Lm(this._rgb,1,e),this}desaturate(e){return Lm(this._rgb,1,-e),this}rotate(e){return sG(this._rgb,e),this}};function ei(){}var VO=(()=>{let n=0;return()=>n++})();function Ee(n){return n==null}function Ye(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ce(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ot(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Sn(n,e){return ot(n)?n:e}function ce(n,e){return typeof n>"u"?e:n}var jO=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,sC=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function We(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Be(n,e,t,r){let i,o,s;if(Ye(n))if(o=n.length,r)for(i=o-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<o;i++)e.call(t,n[i],i);else if(Ce(n))for(s=Object.keys(n),o=s.length,i=0;i<o;i++)e.call(t,n[s[i]],s[i])}function xd(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Hm(n){if(Ye(n))return n.map(Hm);if(Ce(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=Hm(n[t[i]]);return e}return n}function UO(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function gG(n,e,t,r){if(!UO(n))return;let i=e[n],o=t[n];Ce(i)&&Ce(o)?Qc(i,o,r):e[n]=Hm(o)}function Qc(n,e,t){let r=Ye(e)?e:[e],i=r.length;if(!Ce(n))return n;t=t||{};let o=t.merger||gG,s;for(let a=0;a<i;++a){if(s=r[a],!Ce(s))continue;let c=Object.keys(s);for(let l=0,d=c.length;l<d;++l)o(c[l],n,s,t)}return n}function Xc(n,e){return Qc(n,e,{merger:mG})}function mG(n,e,t){if(!UO(n))return;let r=e[n],i=t[n];Ce(r)&&Ce(i)?Xc(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Hm(i))}var xO={"":n=>n,x:n=>n.x,y:n=>n.y};function yG(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function vG(n){let e=yG(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function Wi(n,e){return(xO[e]||(xO[e]=vG(e)))(n)}function Wm(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Jc=n=>typeof n<"u",zi=n=>typeof n=="function",aC=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function BO(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Oe=Math.PI,Xe=2*Oe,_G=Xe+Oe,$m=Number.POSITIVE_INFINITY,bG=Oe/180,dt=Oe/2,ta=Oe/4,AO=Oe*2/3,qi=Math.log10,Er=Math.sign;function Zc(n,e,t){return Math.abs(n-e)<t}function cC(n){let e=Math.round(n);n=Zc(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(qi(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function HO(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function wG(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ia(n){return!wG(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function $O(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function lC(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function tr(n){return n*(Oe/180)}function Gm(n){return n*(180/Oe)}function uC(n){if(!ot(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function dC(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),o=Math.atan2(r,t);return o<-.5*Oe&&(o+=Xe),{angle:o,distance:i}}function zm(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function EG(n,e){return(n-e+_G)%Xe-Oe}function Wt(n){return(n%Xe+Xe)%Xe}function el(n,e,t,r){let i=Wt(n),o=Wt(e),s=Wt(t),a=Wt(o-i),c=Wt(s-i),l=Wt(i-o),d=Wt(i-s);return i===o||i===s||r&&o===s||a>c&&l<d}function Mt(n,e,t){return Math.max(e,Math.min(t,n))}function zO(n){return Mt(n,-32768,32767)}function ti(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function Km(n,e,t){t=t||(s=>n[s]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}var Jr=(n,e,t,r)=>Km(n,t,r?i=>{let o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),qO=(n,e,t)=>Km(n,t,r=>n[r][e]>=t);function WO(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var GO=["push","pop","shift","splice","unshift"];function KO(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),GO.forEach(t=>{let r="_onData"+Wm(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){let s=i.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...o)}),s}})})}function hC(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(GO.forEach(o=>{delete n[o]}),delete n._chartjs)}function fC(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var pC=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function gC(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,pC.call(window,()=>{r=!1,n.apply(e,t)}))}}function QO(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var Qm=n=>n==="start"?"left":n==="end"?"right":"center",Gt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,YO=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function mC(n,e,t){let r=e.length,i=0,o=r;if(n._sorted){let{iScale:s,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=s.axis,{min:h,max:f,minDefined:p,maxDefined:y}=s.getUserBounds();if(p){if(i=Math.min(Jr(c,d,h).lo,t?r:Jr(e,d,s.getPixelForValue(h)).lo),l){let v=c.slice(0,i+1).reverse().findIndex(_=>!Ee(_[a.axis]));i-=Math.max(0,v)}i=Mt(i,0,r-1)}if(y){let v=Math.max(Jr(c,s.axis,f,!0).hi+1,t?0:Jr(e,d,s.getPixelForValue(f),!0).hi+1);if(l){let _=c.slice(v-1).findIndex(T=>!Ee(T[a.axis]));v+=Math.max(0,_)}o=Mt(v,i,r)-i}else o=r-i}return{start:i,count:o}}function yC(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}var Vm=n=>n===0||n===1,MO=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Xe/t)),RO=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Xe/t)+1,Kc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*dt)+1,easeOutSine:n=>Math.sin(n*dt),easeInOutSine:n=>-.5*(Math.cos(Oe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Vm(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Vm(n)?n:MO(n,.075,.3),easeOutElastic:n=>Vm(n)?n:RO(n,.075,.3),easeInOutElastic(n){return Vm(n)?n:n<.5?.5*MO(n*2,.1125,.45):.5+.5*RO(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Kc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Kc.easeInBounce(n*2)*.5:Kc.easeOutBounce(n*2-1)*.5+.5};function vC(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function _C(n){return vC(n)?n:new Cd(n)}function rC(n){return vC(n)?n:new Cd(n).saturate(.5).darken(.1).hexString()}var IG=["x","y","borderWidth","radius","tension"],CG=["color","borderColor","backgroundColor"];function DG(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:CG},numbers:{type:"number",properties:IG}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function TG(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var PO=new Map;function SG(n,e){e=e||{};let t=n+JSON.stringify(e),r=PO.get(t);return r||(r=new Intl.NumberFormat(n,e),PO.set(t,r)),r}function tl(n,e,t){return SG(e,t).format(n)}var XO={values(n){return Ye(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,o=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),o=xG(n,t)}let s=qi(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),tl(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(qi(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?XO.numeric.call(this,n,e,t):""}};function xG(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Ad={formatters:XO};function AG(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ad.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var qo=Object.create(null),Ym=Object.create(null);function Td(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function iC(n,e,t){return typeof e=="string"?Qc(Td(n,e),t):Qc(Td(n,""),e)}var oC=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>rC(i.backgroundColor),this.hoverBorderColor=(r,i)=>rC(i.borderColor),this.hoverColor=(r,i)=>rC(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return iC(this,e,t)}get(e){return Td(this,e)}describe(e,t){return iC(Ym,e,t)}override(e,t){return iC(qo,e,t)}route(e,t,r,i){let o=Td(this,e),s=Td(this,r),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=s[i];return Ce(c)?Object.assign({},l,c):ce(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},Ze=new oC({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[DG,TG,AG]);function MG(n){return!n||Ee(n.size)||Ee(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Sd(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function JO(n,e,t,r){r=r||{};let i=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let s=0,a=t.length,c,l,d,h,f;for(c=0;c<a;c++)if(h=t[c],h!=null&&!Ye(h))s=Sd(n,i,o,s,h);else if(Ye(h))for(l=0,d=h.length;l<d;l++)f=h[l],f!=null&&!Ye(f)&&(s=Sd(n,i,o,s,f));n.restore();let p=o.length/2;if(p>t.length){for(c=0;c<p;c++)delete i[o[c]];o.splice(0,p)}return s}function Wo(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function bC(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Xm(n,e,t,r){wC(n,e,t,r,null)}function wC(n,e,t,r,i){let o,s,a,c,l,d,h,f,p=e.pointStyle,y=e.rotation,v=e.radius,_=(y||0)*bG;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(_),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(v)||v<=0)){switch(n.beginPath(),p){default:i?n.ellipse(t,r,i/2,v,0,0,Xe):n.arc(t,r,v,0,Xe),n.closePath();break;case"triangle":d=i?i/2:v,n.moveTo(t+Math.sin(_)*d,r-Math.cos(_)*v),_+=AO,n.lineTo(t+Math.sin(_)*d,r-Math.cos(_)*v),_+=AO,n.lineTo(t+Math.sin(_)*d,r-Math.cos(_)*v),n.closePath();break;case"rectRounded":l=v*.516,c=v-l,s=Math.cos(_+ta)*c,h=Math.cos(_+ta)*(i?i/2-l:c),a=Math.sin(_+ta)*c,f=Math.sin(_+ta)*(i?i/2-l:c),n.arc(t-h,r-a,l,_-Oe,_-dt),n.arc(t+f,r-s,l,_-dt,_),n.arc(t+h,r+a,l,_,_+dt),n.arc(t-f,r+s,l,_+dt,_+Oe),n.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*v,d=i?i/2:c,n.rect(t-d,r-c,2*d,2*c);break}_+=ta;case"rectRot":h=Math.cos(_)*(i?i/2:v),s=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),n.moveTo(t-h,r-a),n.lineTo(t+f,r-s),n.lineTo(t+h,r+a),n.lineTo(t-f,r+s),n.closePath();break;case"crossRot":_+=ta;case"cross":h=Math.cos(_)*(i?i/2:v),s=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s);break;case"star":h=Math.cos(_)*(i?i/2:v),s=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s),_+=ta,h=Math.cos(_)*(i?i/2:v),s=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s);break;case"line":s=i?i/2:Math.cos(_)*v,a=Math.sin(_)*v,n.moveTo(t-s,r-a),n.lineTo(t+s,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(_)*(i?i/2:v),r+Math.sin(_)*v);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Zr(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Md(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Rd(n){n.restore()}function ZO(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function eF(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function RG(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ee(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function PG(n,e,t,r,i){if(i.strikethrough||i.underline){let o=n.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,c=t-o.actualBoundingBoxAscent,l=t+o.actualBoundingBoxDescent,d=i.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(s,d),n.lineTo(a,d),n.stroke()}}function NG(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Go(n,e,t,r,i,o={}){let s=Ye(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",c,l;for(n.save(),n.font=i.string,RG(n,o),c=0;c<s.length;++c)l=s[c],o.backdrop&&NG(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Ee(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(l,t,r,o.maxWidth)),n.fillText(l,t,r,o.maxWidth),PG(n,t,r,l,o),r+=Number(i.lineHeight);n.restore()}function nl(n,e){let{x:t,y:r,w:i,h:o,radius:s}=e;n.arc(t+s.topLeft,r+s.topLeft,s.topLeft,1.5*Oe,Oe,!0),n.lineTo(t,r+o-s.bottomLeft),n.arc(t+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,Oe,dt,!0),n.lineTo(t+i-s.bottomRight,r+o),n.arc(t+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,dt,0,!0),n.lineTo(t+i,r+s.topRight),n.arc(t+i-s.topRight,r+s.topRight,s.topRight,0,-dt,!0),n.lineTo(t+s.topLeft,r)}var kG=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,OG=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function FG(n,e){let t=(""+n).match(kG);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var LG=n=>+n||0;function Jm(n,e){let t={},r=Ce(e),i=r?Object.keys(e):e,o=Ce(n)?r?s=>ce(n[s],n[e[s]]):s=>n[s]:()=>n;for(let s of i)t[s]=LG(o(s));return t}function EC(n){return Jm(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ko(n){return Jm(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Kt(n){let e=EC(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ct(n,e){n=n||{},e=e||Ze.font;let t=ce(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=ce(n.style,e.style);r&&!(""+r).match(OG)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:ce(n.family,e.family),lineHeight:FG(ce(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:ce(n.weight,e.weight),string:""};return i.string=MG(i),i}function rl(n,e,t,r){let i=!0,o,s,a;for(o=0,s=n.length;o<s;++o)if(a=n[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&Ye(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function tF(n,e,t){let{min:r,max:i}=n,o=sC(e,(i-r)/2),s=(a,c)=>t&&a===0?0:a+c;return{min:s(r,-Math.abs(o)),max:s(i,o)}}function Gi(n,e){return Object.assign(Object.create(n),e)}function Zm(n,e=[""],t,r,i=()=>n[0]){let o=t||n;typeof r>"u"&&(r=iF("_fallback",n));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:a=>Zm([a,...n],e,o,r)};return new Proxy(s,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return nF(a,c,()=>qG(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return kO(a).includes(c)},ownKeys(a){return kO(a)},set(a,c,l){let d=a._storage||(a._storage=i());return a[c]=d[c]=l,delete a._keys,!0}})}function ra(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:IC(n,r),setContext:o=>ra(n,o,t,r),override:o=>ra(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,s){return delete o[s],delete n[s],!0},get(o,s,a){return nF(o,s,()=>jG(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(n,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,s)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,s){return Reflect.has(n,s)},ownKeys(){return Reflect.ownKeys(n)},set(o,s,a){return n[s]=a,delete o[s],!0}})}function IC(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:zi(t)?t:()=>t,isIndexable:zi(r)?r:()=>r}}var VG=(n,e)=>n?n+Wm(e):e,CC=(n,e)=>Ce(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function nF(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let r=t();return n[e]=r,r}function jG(n,e,t){let{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=n,a=r[e];return zi(a)&&s.isScriptable(e)&&(a=UG(e,a,n,t)),Ye(a)&&a.length&&(a=BG(e,a,n,s.isIndexable)),CC(e,a)&&(a=ra(a,i,o&&o[e],s)),a}function UG(n,e,t,r){let{_proxy:i,_context:o,_subProxy:s,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(o,s||r);return a.delete(n),CC(n,c)&&(c=DC(i._scopes,i,n,c)),c}function BG(n,e,t,r){let{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(Ce(e[0])){let c=e,l=i._scopes.filter(d=>d!==c);e=[];for(let d of c){let h=DC(l,i,n,d);e.push(ra(h,o,s&&s[n],a))}}return e}function rF(n,e,t){return zi(n)?n(e,t):n}var HG=(n,e)=>n===!0?e:typeof n=="string"?Wi(e,n):void 0;function $G(n,e,t,r,i){for(let o of e){let s=HG(t,o);if(s){n.add(s);let a=rF(s._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(s===!1&&typeof r<"u"&&t!==r)return null}return!1}function DC(n,e,t,r){let i=e._rootScopes,o=rF(e._fallback,t,r),s=[...n,...i],a=new Set;a.add(r);let c=NO(a,s,t,o||t,r);return c===null||typeof o<"u"&&o!==t&&(c=NO(a,s,o,c,r),c===null)?!1:Zm(Array.from(a),[""],i,o,()=>zG(e,t,r))}function NO(n,e,t,r,i){for(;t;)t=$G(n,e,t,r,i);return t}function zG(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return Ye(i)&&Ce(t)?t:i||{}}function qG(n,e,t,r){let i;for(let o of e)if(i=iF(VG(o,n),t),typeof i<"u")return CC(n,i)?DC(t,r,n,i):i}function iF(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function kO(n){let e=n._keys;return e||(e=n._keys=WG(n._scopes)),e}function WG(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function TC(n,e,t,r){let{iScale:i}=n,{key:o="r"}=this._parsing,s=new Array(r),a,c,l,d;for(a=0,c=r;a<c;++a)l=a+t,d=e[l],s[a]={r:i.parse(Wi(d,o),l)};return s}var GG=Number.EPSILON||1e-14,Yc=(n,e)=>e<n.length&&!n[e].skip&&n[e],oF=n=>n==="x"?"y":"x";function KG(n,e,t,r){let i=n.skip?e:n,o=e,s=t.skip?e:t,a=zm(o,i),c=zm(s,o),l=a/(a+c),d=c/(a+c);l=isNaN(l)?0:l,d=isNaN(d)?0:d;let h=r*l,f=r*d;return{previous:{x:o.x-h*(s.x-i.x),y:o.y-h*(s.y-i.y)},next:{x:o.x+f*(s.x-i.x),y:o.y+f*(s.y-i.y)}}}function QG(n,e,t){let r=n.length,i,o,s,a,c,l=Yc(n,0);for(let d=0;d<r-1;++d)if(c=l,l=Yc(n,d+1),!(!c||!l)){if(Zc(e[d],0,GG)){t[d]=t[d+1]=0;continue}i=t[d]/e[d],o=t[d+1]/e[d],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),t[d]=i*s*e[d],t[d+1]=o*s*e[d])}}function YG(n,e,t="x"){let r=oF(t),i=n.length,o,s,a,c=Yc(n,0);for(let l=0;l<i;++l){if(s=a,a=c,c=Yc(n,l+1),!a)continue;let d=a[t],h=a[r];s&&(o=(d-s[t])/3,a[`cp1${t}`]=d-o,a[`cp1${r}`]=h-o*e[l]),c&&(o=(c[t]-d)/3,a[`cp2${t}`]=d+o,a[`cp2${r}`]=h+o*e[l])}}function XG(n,e="x"){let t=oF(e),r=n.length,i=Array(r).fill(0),o=Array(r),s,a,c,l=Yc(n,0);for(s=0;s<r;++s)if(a=c,c=l,l=Yc(n,s+1),!!c){if(l){let d=l[e]-c[e];i[s]=d!==0?(l[t]-c[t])/d:0}o[s]=a?l?Er(i[s-1])!==Er(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}QG(n,i,o),YG(n,o,e)}function jm(n,e,t){return Math.max(Math.min(n,t),e)}function JG(n,e){let t,r,i,o,s,a=Zr(n[0],e);for(t=0,r=n.length;t<r;++t)s=o,o=a,a=t<r-1&&Zr(n[t+1],e),o&&(i=n[t],s&&(i.cp1x=jm(i.cp1x,e.left,e.right),i.cp1y=jm(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=jm(i.cp2x,e.left,e.right),i.cp2y=jm(i.cp2y,e.top,e.bottom)))}function sF(n,e,t,r,i){let o,s,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")XG(n,i);else{let l=r?n[n.length-1]:n[0];for(o=0,s=n.length;o<s;++o)a=n[o],c=KG(l,a,n[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&JG(n,t)}function ey(){return typeof window<"u"&&typeof document<"u"}function ty(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function qm(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var ny=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function ZG(n,e){return ny(n).getPropertyValue(e)}var e7=["top","right","bottom","left"];function na(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let o=e7[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var t7=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function n7(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r,s=!1,a,c;if(t7(i,o,n.target))a=i,c=o;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,s=!0}return{x:a,y:c,box:s}}function Qo(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=ny(t),o=i.boxSizing==="border-box",s=na(i,"padding"),a=na(i,"border","width"),{x:c,y:l,box:d}=n7(n,t),h=s.left+(d&&a.left),f=s.top+(d&&a.top),{width:p,height:y}=e;return o&&(p-=s.width+a.width,y-=s.height+a.height),{x:Math.round((c-h)/p*t.width/r),y:Math.round((l-f)/y*t.height/r)}}function r7(n,e,t){let r,i;if(e===void 0||t===void 0){let o=n&&ty(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{let s=o.getBoundingClientRect(),a=ny(o),c=na(a,"border","width"),l=na(a,"padding");e=s.width-l.width-c.width,t=s.height-l.height-c.height,r=qm(a.maxWidth,o,"clientWidth"),i=qm(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||$m,maxHeight:i||$m}}var Um=n=>Math.round(n*10)/10;function aF(n,e,t,r){let i=ny(n),o=na(i,"margin"),s=qm(i.maxWidth,n,"clientWidth")||$m,a=qm(i.maxHeight,n,"clientHeight")||$m,c=r7(n,e,t),{width:l,height:d}=c;if(i.boxSizing==="content-box"){let f=na(i,"border","width"),p=na(i,"padding");l-=p.width+f.width,d-=p.height+f.height}return l=Math.max(0,l-o.width),d=Math.max(0,r?l/r:d-o.height),l=Um(Math.min(l,s,c.maxWidth)),d=Um(Math.min(d,a,c.maxHeight)),l&&!d&&(d=Um(l/2)),(e!==void 0||t!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,l=Um(Math.floor(d*r))),{width:l,height:d}}function SC(n,e,t){let r=e||1,i=Math.floor(n.height*r),o=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let s=n.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${n.height}px`,s.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||s.height!==i||s.width!==o?(n.currentDevicePixelRatio=r,s.height=i,s.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var cF=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};ey()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function xC(n,e){let t=ZG(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function zo(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function lF(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function uF(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},s=zo(n,i,t),a=zo(i,o,t),c=zo(o,e,t),l=zo(s,a,t),d=zo(a,c,t);return zo(l,d,t)}var i7=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},o7=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function oa(n,e,t){return n?i7(e,t):o7()}function AC(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function MC(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function dF(n){return n==="angle"?{between:el,compare:EG,normalize:Wt}:{between:ti,compare:(e,t)=>e-t,normalize:e=>e}}function OO({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function s7(n,e,t){let{property:r,start:i,end:o}=t,{between:s,normalize:a}=dF(r),c=e.length,{start:l,end:d,loop:h}=n,f,p;if(h){for(l+=c,d+=c,f=0,p=c;f<p&&s(a(e[l%c][r]),i,o);++f)l--,d--;l%=c,d%=c}return d<l&&(d+=c),{start:l,end:d,loop:h,style:n.style}}function RC(n,e,t){if(!t)return[n];let{property:r,start:i,end:o}=t,s=e.length,{compare:a,between:c,normalize:l}=dF(r),{start:d,end:h,loop:f,style:p}=s7(n,e,t),y=[],v=!1,_=null,T,P,O,U=()=>c(i,O,T)&&a(i,O)!==0,L=()=>a(o,T)===0||c(o,O,T),B=()=>v||U(),I=()=>!v||L();for(let w=d,E=d;w<=h;++w)P=e[w%s],!P.skip&&(T=l(P[r]),T!==O&&(v=c(T,i,o),_===null&&B()&&(_=a(T,i)===0?w:E),_!==null&&I()&&(y.push(OO({start:_,end:w,loop:f,count:s,style:p})),_=null),E=w,O=T));return _!==null&&y.push(OO({start:_,end:h,loop:f,count:s,style:p})),y}function PC(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let o=RC(r[i],n.points,e);o.length&&t.push(...o)}return t}function a7(n,e,t,r){let i=0,o=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&n[o%e].skip;)o--;return o%=e,{start:i,end:o}}function c7(n,e,t,r){let i=n.length,o=[],s=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%i];l.skip||l.stop?a.skip||(r=!1,o.push({start:e%i,end:(c-1)%i,loop:r}),e=s=l.stop?c:null):(s=c,a.skip&&(e=c)),a=l}return s!==null&&o.push({start:e%i,end:s%i,loop:r}),o}function hF(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let o=!!n._loop,{start:s,end:a}=a7(t,i,o,r);if(r===!0)return FO(n,[{start:s,end:a,loop:o}],t,e);let c=a<s?a+i:a,l=!!n._fullLoop&&s===0&&a===i-1;return FO(n,c7(t,s,c,l),t,e)}function FO(n,e,t,r){return!r||!r.setContext||!t?e:l7(n,e,t,r)}function l7(n,e,t,r){let i=n._chart.getContext(),o=LO(n.options),{_datasetIndex:s,options:{spanGaps:a}}=n,c=t.length,l=[],d=o,h=e[0].start,f=h;function p(y,v,_,T){let P=a?-1:1;if(y!==v){for(y+=c;t[y%c].skip;)y-=P;for(;t[v%c].skip;)v+=P;y%c!==v%c&&(l.push({start:y%c,end:v%c,loop:_,style:T}),d=T,h=v%c)}}for(let y of e){h=a?h:y.start;let v=t[h%c],_;for(f=h+1;f<=y.end;f++){let T=t[f%c];_=LO(r.setContext(Gi(i,{type:"segment",p0:v,p1:T,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:s}))),u7(_,d)&&p(h,f-1,y.loop,d),v=T,d=_}h<f-1&&p(h,f-1,y.loop,d)}return l}function LO(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function u7(n,e){if(!e)return!1;let t=[],r=function(i,o){return vC(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function Bm(n,e,t){return n.options.clip?n[t]:e[t]}function d7(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:Bm(t,e,"left"),right:Bm(t,e,"right"),top:Bm(r,e,"top"),bottom:Bm(r,e,"bottom")}:e}function NC(n,e){let t=e._clip;if(t.disabled)return!1;let r=d7(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}var qC=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let o=t.listeners[i],s=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=pC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let o=r.items,s=o.length-1,a=!1,c;for(;s>=0;--s)c=o[s],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Ki=new qC,fF="transparent",h7={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=_C(n||fF),i=r.valid&&_C(e||fF);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},WC=class{constructor(e,t,r,i){let o=t[r];i=rl([e.to,i,o,e.from]);let s=rl([e.from,o,i]);this._active=!0,this._fn=e.fn||h7[e.type||typeof s],this._easing=Kc[e.easing]||Kc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],o=r-this._start,s=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=rl([e.to,t,i,e.from]),this._from=rl([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,o=this._from,s=this._loop,a=this._to,c;if(this._active=o!==a&&(s||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=o;return}c=t/r%2,c=s&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(o,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},dy=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ce(e))return;let t=Object.keys(Ze.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let o=e[i];if(!Ce(o))return;let s={};for(let a of t)s[a]=o[a];(Ye(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,s)})})}_animateOptions(e,t){let r=t.options,i=p7(e,r);if(!i)return[];let o=this._createAnimations(i,r);return r.$shared&&f7(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){let r=this._properties,i=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now(),c;for(c=s.length-1;c>=0;--c){let l=s[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,t));continue}let d=t[l],h=o[l],f=r.get(l);if(h)if(f&&h.active()){h.update(f,d,a);continue}else h.cancel();if(!f||!f.duration){e[l]=d;continue}o[l]=h=new WC(f,e,l,d),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return Ki.add(this._chart,r),!0}};function f7(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function p7(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function pF(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function g7(n,e,t){if(t===!1)return!1;let r=pF(n,t),i=pF(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function m7(n){let e,t,r,i;return Ce(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function fL(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function gF(n,e,t,r={}){let i=n.keys,o=r.mode==="single",s,a,c,l;if(e===null)return;let d=!1;for(s=0,a=i.length;s<a;++s){if(c=+i[s],c===t){if(d=!0,r.all)continue;break}l=n.values[c],ot(l)&&(o||e===0||Er(e)===Er(l))&&(e+=l)}return!d&&!r.all?0:e}function y7(n,e){let{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",s=Object.keys(n),a=new Array(s.length),c,l,d;for(c=0,l=s.length;c<l;++c)d=s[c],a[c]={[i]:d,[o]:n[d]};return a}function kC(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function v7(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function _7(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function b7(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function mF(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function yF(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:a}=r,c=o.axis,l=s.axis,d=v7(o,s,r),h=e.length,f;for(let p=0;p<h;++p){let y=e[p],{[c]:v,[l]:_}=y,T=y._stacks||(y._stacks={});f=T[l]=b7(i,d,v),f[a]=_,f._top=mF(f,s,!0,r.type),f._bottom=mF(f,s,!1,r.type);let P=f._visualValues||(f._visualValues={});P[a]=_}}function OC(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function w7(n,e){return Gi(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function E7(n,e,t){return Gi(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Pd(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}var FC=n=>n==="reset"||n==="none",vF=(n,e)=>e?n:Object.assign({},n),I7=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:fL(t,!0),values:null},Xo=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=kC(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Pd(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),o=(f,p,y,v)=>f==="x"?p:f==="r"?v:y,s=r.xAxisID=ce(i.xAxisID,OC(t,"x")),a=r.yAxisID=ce(i.yAxisID,OC(t,"y")),c=r.rAxisID=ce(i.rAxisID,OC(t,"r")),l=r.indexAxis,d=r.iAxisID=o(l,s,a,c),h=r.vAxisID=o(l,a,s,c);r.xScale=this.getScaleForId(s),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&hC(this._data,this),t._stacked&&Pd(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(Ce(r)){let o=this._cachedMeta;this._data=y7(r,o)}else if(i!==r){if(i){hC(i,this);let o=this._cachedMeta;Pd(o),o._parsed=[]}r&&Object.isExtensible(r)&&KO(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),o=!1;this._dataCheck();let s=r._stacked;r._stacked=kC(r.vScale,r),r.stack!==i.stack&&(o=!0,Pd(r),r.stack=i.stack),this._resyncElements(t),(o||s!==r._stacked)&&(yF(this,r._parsed),r._stacked=kC(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:o}=this,{iScale:s,_stacked:a}=i,c=s.axis,l=t===0&&r===o.length?!0:i._sorted,d=t>0&&i._parsed[t-1],h,f,p;if(this._parsing===!1)i._parsed=o,i._sorted=!0,p=o;else{Ye(o[t])?p=this.parseArrayData(i,o,t,r):Ce(o[t])?p=this.parseObjectData(i,o,t,r):p=this.parsePrimitiveData(i,o,t,r);let y=()=>f[c]===null||d&&f[c]<d[c];for(h=0;h<r;++h)i._parsed[h+t]=f=p[h],l&&(y()&&(l=!1),d=f);i._sorted=l}a&&yF(this,p)}parsePrimitiveData(t,r,i,o){let{iScale:s,vScale:a}=t,c=s.axis,l=a.axis,d=s.getLabels(),h=s===a,f=new Array(o),p,y,v;for(p=0,y=o;p<y;++p)v=p+i,f[p]={[c]:h||s.parse(d[v],v),[l]:a.parse(r[v],v)};return f}parseArrayData(t,r,i,o){let{xScale:s,yScale:a}=t,c=new Array(o),l,d,h,f;for(l=0,d=o;l<d;++l)h=l+i,f=r[h],c[l]={x:s.parse(f[0],h),y:a.parse(f[1],h)};return c}parseObjectData(t,r,i,o){let{xScale:s,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=new Array(o),h,f,p,y;for(h=0,f=o;h<f;++h)p=h+i,y=r[p],d[h]={x:s.parse(Wi(y,c),p),y:a.parse(Wi(y,l),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let o=this.chart,s=this._cachedMeta,a=r[t.axis],c={keys:fL(o,!0),values:r._stacks[t.axis]._visualValues};return gF(c,a,s.index,{mode:i})}updateRangeFromParsed(t,r,i,o){let s=i[r.axis],a=s===null?NaN:s,c=o&&i._stacks[r.axis];o&&c&&(o.values=c,a=gF(o,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,o=i._parsed,s=i._sorted&&t===i.iScale,a=o.length,c=this._getOtherScale(t),l=I7(r,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=_7(c),p,y;function v(){y=o[p];let _=y[c.axis];return!ot(y[t.axis])||h>_||f<_}for(p=0;p<a&&!(!v()&&(this.updateRangeFromParsed(d,t,y,l),s));++p);if(s){for(p=a-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(d,t,y,l);break}}return d}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],o,s,a;for(o=0,s=r.length;o<s;++o)a=r[o][t.axis],ot(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,o=r.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=m7(ce(this.options.clip,g7(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,o=i.data||[],s=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||o.length-c,d=this.options.drawActiveElementsOnTop,h;for(i.dataset&&i.dataset.draw(t,s,c,l),h=c;h<c+l;++h){let f=o[h];f.hidden||(f.active&&d?a.push(f):f.draw(t,s))}for(h=0;h<a.length;++h)a[h].draw(t,s)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let o=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];s=a.$context||(a.$context=E7(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=w7(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!r,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let o=r==="active",s=this._cachedDataOpts,a=t+"-"+r,c=s[a],l=this.enableOptionSharing&&Jc(i);if(c)return vF(c,l);let d=this.chart.config,h=d.datasetElementScopeKeys(this._type,t),f=o?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),h),y=Object.keys(Ze.elements[t]),v=()=>this.getContext(i,o,r),_=d.resolveNamedOptions(p,y,v,f);return _.$shared&&(_.$shared=l,s[a]=Object.freeze(vF(_,l))),_}_resolveAnimations(t,r,i){let o=this.chart,s=this._cachedDataOpts,a=`animation-${r}`,c=s[a];if(c)return c;let l;if(o.options.animation!==!1){let h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,r),p=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(p,this.getContext(t,i,r))}let d=new dy(o,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||FC(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),o=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(r,s)||s!==o;return this.updateSharedOptions(s,r,i),{sharedOptions:s,includeOptions:a}}updateElement(t,r,i,o){FC(o)?Object.assign(t,i):this._resolveAnimations(r,o).update(t,i)}updateSharedOptions(t,r,i){t&&!FC(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,o){t.active=o;let s=this.getStyle(r,o);this._resolveAnimations(r,i,o).update(t,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,l,d]of this._syncList)this[c](l,d);this._syncList=[];let o=i.length,s=r.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,t):s<o&&this._removeElements(s,o-s)}_insertElements(t,r,i=!0){let o=this._cachedMeta,s=o.data,a=t+r,c,l=d=>{for(d.length+=r,c=d.length-1;c>=a;c--)d[c]=d[c-r]};for(l(s),c=t;c<a;++c)s[c]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,r),i&&this.updateElements(s,t,r,"reset")}updateElements(t,r,i,o){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let o=i._parsed.splice(t,r);i._stacked&&Pd(i,o)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,o]=t;this[r](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function C7(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,o=t.length;i<o;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=fC(r.sort((i,o)=>i-o))}return n._cache.$bar}function D7(n){let e=n.iScale,t=C7(e,n.type),r=e._length,i,o,s,a,c=()=>{s===32767||s===-32768||(Jc(a)&&(r=Math.min(r,Math.abs(s-a)||r)),a=s)};for(i=0,o=t.length;i<o;++i)s=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)s=e.getPixelForTick(i),c();return r}function T7(n,e,t,r){let i=t.barThickness,o,s;return Ee(i)?(o=e.min*t.categoryPercentage,s=t.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:e.pixels[n]-o/2}}function S7(n,e,t,r){let i=e.pixels,o=i[n],s=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,c=t.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);let l=o-(o-Math.min(s,a))/2*c;return{chunk:Math.abs(a-s)/2*c/r,ratio:t.barPercentage,start:l}}function x7(n,e,t,r){let i=t.parse(n[0],r),o=t.parse(n[1],r),s=Math.min(i,o),a=Math.max(i,o),c=s,l=a;Math.abs(s)>Math.abs(a)&&(c=a,l=s),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:o,min:s,max:a}}function pL(n,e,t,r){return Ye(n)?x7(n,e,t,r):e[t.axis]=t.parse(n,r),e}function _F(n,e,t,r){let i=n.iScale,o=n.vScale,s=i.getLabels(),a=i===o,c=[],l,d,h,f;for(l=t,d=t+r;l<d;++l)f=e[l],h={},h[i.axis]=a||i.parse(s[l],l),c.push(pL(f,h,o,l));return c}function LC(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function A7(n,e,t){return n!==0?Er(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function M7(n){let e,t,r,i,o;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:t,end:r,reverse:e,top:i,bottom:o}}function R7(n,e,t,r){let i=e.borderSkipped,o={};if(!i){n.borderSkipped=o;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:c,top:l,bottom:d}=M7(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=d:(o[bF(d,s,a,c)]=!0,i=l)),o[bF(i,s,a,c)]=!0,n.borderSkipped=o}function bF(n,e,t,r){return r?(n=P7(n,e,t),n=wF(n,t,e)):n=wF(n,e,t),n}function P7(n,e,t){return n===e?t:n===t?e:n}function wF(n,e,t){return n==="start"?e:n==="end"?t:n}function N7(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var k7=(()=>{class n extends Xo{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,o){return _F(t,r,i,o)}parseArrayData(t,r,i,o){return _F(t,r,i,o)}parseObjectData(t,r,i,o){let{iScale:s,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=s.axis==="x"?c:l,h=a.axis==="x"?c:l,f=[],p,y,v,_;for(p=i,y=i+o;p<y;++p)_=r[p],v={},v[s.axis]=s.parse(Wi(_,d),p),f.push(pL(Wi(_,h),v,a,p));return f}updateRangeFromParsed(t,r,i,o){super.updateRangeFromParsed(t,r,i,o);let s=i._custom;s&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:o}=r,s=this.getParsed(t),a=s._custom,c=LC(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),d=c.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,o);for(let y=r;y<r+i;y++){let v=this.getParsed(y),_=s||Ee(v[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),T=this._calculateBarIndexPixels(y,h),P=(v._stacks||{})[c.axis],O={horizontal:d,base:_.base,enableBorderRadius:!P||LC(v._custom)||a===P._top||a===P._bottom,x:d?_.head:T.center,y:d?T.center:_.head,height:d?T.size:Math.abs(_.size),width:d?Math.abs(_.size):T.size};p&&(O.options=f||this.resolveDataElementOptions(y,t[y].active?"active":o));let U=O.options||t[y].options;R7(O,U,P,a),N7(O,U,h.ratio),this.updateElement(t[y],y,O,o)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(r),l=c&&c[i.axis],d=h=>{let f=h._parsed.find(y=>y[i.axis]===l),p=f&&f[h.vScale.axis];if(Ee(p)||isNaN(p))return!0};for(let h of o)if(!(r!==void 0&&d(h))&&((s===!1||a.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){let t={},r=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[ce(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){let o=this._getStacks(t,i),s=r!==void 0?o.indexOf(r):-1;return s===-1?o.length-1:s}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,o=[],s,a;for(s=0,a=r.data.length;s<a;++s)o.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));let c=t.barThickness;return{min:c||D7(r),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:o},options:{base:s,minBarLength:a}}=this,c=s||0,l=this.getParsed(t),d=l._custom,h=LC(d),f=l[r.axis],p=0,y=i?this.applyStack(r,l,i):f,v,_;y!==f&&(p=y-f,y=f),h&&(f=d.barStart,y=d.barEnd-d.barStart,f!==0&&Er(f)!==Er(d.barEnd)&&(p=0),p+=f);let T=!Ee(s)&&!h?s:p,P=r.getPixelForValue(T);if(this.chart.getDataVisibility(t)?v=r.getPixelForValue(p+y):v=P,_=v-P,Math.abs(_)<a){_=A7(_,r,c)*a,f===c&&(P-=_/2);let O=r.getPixelForDecimal(0),U=r.getPixelForDecimal(1),L=Math.min(O,U),B=Math.max(O,U);P=Math.max(Math.min(P,B),L),v=P+_,i&&!h&&(l._stacks[r.axis]._visualValues[o]=r.getValueForPixel(v)-r.getValueForPixel(P))}if(P===r.getPixelForValue(c)){let O=Er(_)*r.getLineWidthForValue(c)/2;P+=O,_-=O}return{size:_,base:P,head:v,center:v+_/2}}_calculateBarIndexPixels(t,r){let i=r.scale,o=this.options,s=o.skipNull,a=ce(o.maxBarThickness,1/0),c,l,d=this._getAxisCount();if(r.grouped){let h=s?this._getStackCount(t):r.stackCount,f=o.barThickness==="flex"?S7(t,r,o,h*d):T7(t,r,o,h*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,y=this._getAxis().indexOf(ce(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+y;c=f.start+f.chunk*v+f.chunk/2,l=Math.min(a,f.chunk*f.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,o=i.length,s=0;for(;s<o;++s)this.getParsed(s)[r.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}return n})(),O7=(()=>{class n extends Xo{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,o){let s=super.parsePrimitiveData(t,r,i,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+i).radius;return s}parseArrayData(t,r,i,o){let s=super.parseArrayData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=ce(c[2],this.resolveDataElementOptions(a+i).radius)}return s}parseObjectData(t,r,i,o){let s=super.parseObjectData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=ce(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y),d=a._custom;return{label:i[t]||"",value:"("+c+", "+l+(d?", "+d:"")+")"}}update(t){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(r,o),h=a.axis,f=c.axis;for(let p=r;p<r+i;p++){let y=t[p],v=!s&&this.getParsed(p),_={},T=_[h]=s?a.getPixelForDecimal(.5):a.getPixelForValue(v[h]),P=_[f]=s?c.getBasePixel():c.getPixelForValue(v[f]);_.skip=isNaN(T)||isNaN(P),d&&(_.options=l||this.resolveDataElementOptions(p,y.active?"active":o),s&&(_.options.radius=0)),this.updateElement(y,p,_,o)}}resolveDataElementOptions(t,r){let i=this.getParsed(t),o=super.resolveDataElementOptions(t,r);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return r!=="active"&&(o.radius=0),o.radius+=ce(i&&i._custom,s),o}}return n})();function F7(n,e,t){let r=1,i=1,o=0,s=0;if(e<Xe){let a=n,c=a+e,l=Math.cos(a),d=Math.sin(a),h=Math.cos(c),f=Math.sin(c),p=(O,U,L)=>el(O,a,c,!0)?1:Math.max(U,U*t,L,L*t),y=(O,U,L)=>el(O,a,c,!0)?-1:Math.min(U,U*t,L,L*t),v=p(0,l,h),_=p(dt,d,f),T=y(Oe,l,h),P=y(Oe+dt,d,f);r=(v-T)/2,i=(_-P)/2,o=-(v+T)/2,s=-(_+P)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}var hD=(()=>{class n extends Xo{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:o,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){let i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let s=l=>+i[l];if(Ce(i[t])){let{key:l="value"}=this._parsing;s=d=>+Wi(i[d],l)}let a,c;for(a=t,c=t+r;a<c;++a)o._parsed[a]=s(a)}}_getRotation(){return tr(this.options.rotation-90)}_getCircumference(){return tr(this.options.circumference)}_getRotationExtents(){let t=Xe,r=-Xe;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let o=this.chart.getDatasetMeta(i).controller,s=o._getRotation(),a=o._getCircumference();t=Math.min(t,s),r=Math.max(r,s+a)}return{rotation:t,circumference:r-t}}update(t){let r=this.chart,{chartArea:i}=r,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(jO(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:y,offsetX:v,offsetY:_}=F7(f,h,l),T=(i.width-a)/p,P=(i.height-a)/y,O=Math.max(Math.min(T,P)/2,0),U=sC(this.options.radius,O),L=Math.max(U*l,0),B=(U-L)/this._getVisibleDatasetWeightTotal();this.offsetX=v*U,this.offsetY=_*U,o.total=this.calculateTotal(),this.outerRadius=U-B*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-B*d,0),this.updateElements(s,0,s.length,t)}_circumference(t,r){let i=this.options,o=this._cachedMeta,s=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*s/Xe)}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,c=a.chartArea,d=a.options.animation,h=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=s&&d.animateScale,y=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:_,includeOptions:T}=this._getSharedOptions(r,o),P=this._getRotation(),O;for(O=0;O<r;++O)P+=this._circumference(O,s);for(O=r;O<r+i;++O){let U=this._circumference(O,s),L=t[O],B={x:h+this.offsetX,y:f+this.offsetY,startAngle:P,endAngle:P+U,circumference:U,outerRadius:v,innerRadius:y};T&&(B.options=_||this.resolveDataElementOptions(O,L.active?"active":o)),P+=U,this.updateElement(L,O,B,o)}}calculateTotal(){let t=this._cachedMeta,r=t.data,i=0,o;for(o=0;o<r.length;o++){let s=t._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!r[o].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){let r=this._cachedMeta.total;return r>0&&!isNaN(t)?Xe*(Math.abs(t)/r):0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=tl(r._parsed[t],i.options.locale);return{label:o[t]||"",value:s}}getMaxBorderWidth(t){let r=0,i=this.chart,o,s,a,c,l;if(!t){for(o=0,s=i.data.datasets.length;o<s;++o)if(i.isDatasetVisible(o)){a=i.getDatasetMeta(o),t=a.data,c=a.controller;break}}if(!t)return 0;for(o=0,s=t.length;o<s;++o)l=c.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,o=t.length;i<o;++i){let s=this.resolveDataElementOptions(i);r=Math.max(r,s.offset||0,s.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(ce(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),L7=(()=>{class n extends Xo{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:o=[],_dataset:s}=r,a=this.chart._animationsDisabled,{start:c,count:l}=mC(r,o,a);this._drawStart=c,this._drawCount=l,yC(r)&&(c=0,l=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=o;let d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:d},t),this.updateElements(o,c,l,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,o),p=a.axis,y=c.axis,{spanGaps:v,segment:_}=this.options,T=ia(v)?v:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||s||o==="none",O=r+i,U=t.length,L=r>0&&this.getParsed(r-1);for(let B=0;B<U;++B){let I=t[B],w=P?I:{};if(B<r||B>=O){w.skip=!0;continue}let E=this.getParsed(B),D=Ee(E[y]),x=w[p]=a.getPixelForValue(E[p],B),R=w[y]=s||D?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,E,l):E[y],B);w.skip=isNaN(x)||isNaN(R)||D,w.stop=B>0&&Math.abs(E[p]-L[p])>T,_&&(w.parsed=E,w.raw=d.data[B]),f&&(w.options=h||this.resolveDataElementOptions(B,I.active?"active":o)),P||this.updateElement(I,B,w,o),L=E}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,o=t.data||[];if(!o.length)return i;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,s,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),gL=(()=>{class n extends Xo{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:o,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=tl(r._parsed[t].r,i.options.locale);return{label:o[t]||"",value:s}}parseObjectData(t,r,i,o){return TC.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){let t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<r.min&&(r.min=s),s>r.max&&(r.max=s))}),r}_updateRadius(){let t=this.chart,r=t.chartArea,i=t.options,o=Math.min(r.right-r.left,r.bottom-r.top),s=Math.max(o/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),c=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,l=a.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,f=d.yCenter,p=d.getIndexAngle(0)-.5*Oe,y=p,v,_=360/this.countVisibleElements();for(v=0;v<r;++v)y+=this._computeAngle(v,o,_);for(v=r;v<r+i;v++){let T=t[v],P=y,O=y+this._computeAngle(v,o,_),U=a.getDataVisibility(v)?d.getDistanceFromCenterForValue(this.getParsed(v).r):0;y=O,s&&(l.animateScale&&(U=0),l.animateRotate&&(P=O=p));let L={x:h,y:f,innerRadius:0,outerRadius:U,startAngle:P,endAngle:O,options:this.resolveDataElementOptions(v,T.active?"active":o)};this.updateElement(T,v,L,o)}}countVisibleElements(){let t=this._cachedMeta,r=0;return t.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?tr(this.resolveDataElementOptions(t,r).angle||i):0}}return n})(),V7=(()=>{class n extends hD{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),j7=(()=>{class n extends Xo{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,o){return TC.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta,i=r.dataset,o=r.data||[],s=r.iScale.getLabels();if(i.points=o,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(i,void 0,c,t)}this.updateElements(o,0,o.length,t)}updateElements(t,r,i,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let c=r;c<r+i;c++){let l=t[c],d=this.resolveDataElementOptions(c,l.active?"active":o),h=s.getPointPositionForValue(c,this.getParsed(c).r),f=a?s.xCenter:h.x,p=a?s.yCenter:h.y,y={x:f,y:p,angle:h.angle,skip:isNaN(f)||isNaN(p),options:d};this.updateElement(l,c,y,o)}}}return n})(),U7=(()=>{class n extends Xo{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y);return{label:i[t]||"",value:"("+c+", "+l+")"}}update(t){let r=this._cachedMeta,{data:i=[]}=r,o=this.chart._animationsDisabled,{start:s,count:a}=mC(r,i,o);if(this._drawStart=s,this._drawCount=a,yC(r)&&(s=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=i;let d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(c,void 0,{animated:!o,options:d},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,s,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(r,o),f=this.getSharedOptions(h),p=this.includeOptions(o,f),y=a.axis,v=c.axis,{spanGaps:_,segment:T}=this.options,P=ia(_)?_:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||s||o==="none",U=r>0&&this.getParsed(r-1);for(let L=r;L<r+i;++L){let B=t[L],I=this.getParsed(L),w=O?B:{},E=Ee(I[v]),D=w[y]=a.getPixelForValue(I[y],L),x=w[v]=s||E?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,I,l):I[v],L);w.skip=isNaN(D)||isNaN(x)||E,w.stop=L>0&&Math.abs(I[y]-U[y])>P,T&&(w.parsed=I,w.raw=d.data[L]),p&&(w.options=f||this.resolveDataElementOptions(L,B.active?"active":o)),O||this.updateElement(B,L,w,o),U=I}this.updateSharedOptions(f,o,h)}getMaxOverflow(){let t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let c=0;for(let l=r.length-1;l>=0;--l)c=Math.max(c,r[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!r.length)return o;let s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(o,s,a)/2}}return n})(),B7=Object.freeze({__proto__:null,BarController:k7,BubbleController:O7,DoughnutController:hD,LineController:L7,PieController:V7,PolarAreaController:gL,RadarController:j7,ScatterController:U7});function sa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var GC=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return sa()}parse(){return sa()}format(){return sa()}add(){return sa()}diff(){return sa()}startOf(){return sa()}endOf(){return sa()}},H7={_date:GC};function $7(n,e,t,r){let{controller:i,data:o,_sorted:s}=n,a=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&s&&o.length){let l=a._reversePixels?qO:Jr;if(r){if(i._sharedOptions){let d=o[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){let f=l(o,e,t-h),p=l(o,e,t+h);return{lo:f.lo,hi:p.hi}}}}else{let d=l(o,e,t);if(c){let{vScale:h}=i._cachedMeta,{_parsed:f}=n,p=f.slice(0,d.lo+1).reverse().findIndex(v=>!Ee(v[h.axis]));d.lo-=Math.max(0,p);let y=f.slice(d.hi).findIndex(v=>!Ee(v[h.axis]));d.hi+=Math.max(0,y)}return d}}return{lo:0,hi:o.length-1}}function Hd(n,e,t,r,i){let o=n.getSortedVisibleDatasetMetas(),s=t[e];for(let a=0,c=o.length;a<c;++a){let{index:l,data:d}=o[a],{lo:h,hi:f}=$7(o[a],e,s,i);for(let p=h;p<=f;++p){let y=d[p];y.skip||r(y,l,p)}}}function z7(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let o=e?Math.abs(r.x-i.x):0,s=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function VC(n,e,t,r,i){let o=[];return!i&&!n.isPointInArea(e)||Hd(n,t,e,function(a,c,l){!i&&!Zr(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&o.push({element:a,datasetIndex:c,index:l})},!0),o}function q7(n,e,t,r){let i=[];function o(s,a,c){let{startAngle:l,endAngle:d}=s.getProps(["startAngle","endAngle"],r),{angle:h}=dC(s,{x:e.x,y:e.y});el(h,l,d)&&i.push({element:s,datasetIndex:a,index:c})}return Hd(n,t,e,o),i}function W7(n,e,t,r,i,o){let s=[],a=z7(t),c=Number.POSITIVE_INFINITY;function l(d,h,f){let p=d.inRange(e.x,e.y,i);if(r&&!p)return;let y=d.getCenterPoint(i);if(!(!!o||n.isPointInArea(y))&&!p)return;let _=a(e,y);_<c?(s=[{element:d,datasetIndex:h,index:f}],c=_):_===c&&s.push({element:d,datasetIndex:h,index:f})}return Hd(n,t,e,l),s}function jC(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?q7(n,e,t,i):W7(n,e,t,r,i,o)}function EF(n,e,t,r,i){let o=[],s=t==="x"?"inXRange":"inYRange",a=!1;return Hd(n,t,e,(c,l,d)=>{c[s]&&c[s](e[t],i)&&(o.push({element:c,datasetIndex:l,index:d}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:o}var G7={evaluateInteractionItems:Hd,modes:{index(n,e,t,r){let i=Qo(e,n),o=t.axis||"x",s=t.includeInvisible||!1,a=t.intersect?VC(n,i,o,r,s):jC(n,i,o,!1,r,s),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let d=a[0].index,h=l.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:d})}),c):[]},dataset(n,e,t,r){let i=Qo(e,n),o=t.axis||"xy",s=t.includeInvisible||!1,a=t.intersect?VC(n,i,o,r,s):jC(n,i,o,!1,r,s);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let d=0;d<l.length;++d)a.push({element:l[d],datasetIndex:c,index:d})}return a},point(n,e,t,r){let i=Qo(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return VC(n,i,o,r,s)},nearest(n,e,t,r){let i=Qo(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return jC(n,i,o,t.intersect,r,s)},x(n,e,t,r){let i=Qo(e,n);return EF(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=Qo(e,n);return EF(n,i,"y",t.intersect,r)}}},mL=["left","top","right","bottom"];function Nd(n,e){return n.filter(t=>t.pos===e)}function IF(n,e){return n.filter(t=>mL.indexOf(t.pos)===-1&&t.box.axis===e)}function kd(n,e){return n.sort((t,r)=>{let i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function K7(n){let e=[],t,r,i,o,s,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:s,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}function Q7(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:o}=t;if(!r||!mL.includes(i))continue;let s=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function Y7(n,e){let t=Q7(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,o,s,a;for(o=0,s=n.length;o<s;++o){a=n[o];let{fullSize:c}=a.box,l=t[a.stack],d=l&&a.stackWeight/l.weight;a.horizontal?(a.width=d?d*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=d?d*i:c&&e.availableHeight)}return t}function X7(n){let e=K7(n),t=kd(e.filter(l=>l.box.fullSize),!0),r=kd(Nd(e,"left"),!0),i=kd(Nd(e,"right")),o=kd(Nd(e,"top"),!0),s=kd(Nd(e,"bottom")),a=IF(e,"x"),c=IF(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(c).concat(s).concat(a),chartArea:Nd(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:o.concat(s).concat(a)}}function CF(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function yL(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function J7(n,e,t,r){let{pos:i,box:o}=t,s=n.maxPadding;if(!Ce(i)){t.size&&(n[i]-=t.size);let h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?o.height:o.width),t.size=h.size/h.count,n[i]+=t.size}o.getPadding&&yL(s,o.getPadding());let a=Math.max(0,e.outerWidth-CF(s,n,"left","right")),c=Math.max(0,e.outerHeight-CF(s,n,"top","bottom")),l=a!==n.w,d=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:d}:{same:d,other:l}}function Z7(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function eK(n,e){let t=e.maxPadding;function r(i){let o={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{o[s]=Math.max(e[s],t[s])}),o}return r(n?["left","right"]:["top","bottom"])}function Ld(n,e,t,r){let i=[],o,s,a,c,l,d;for(o=0,s=n.length,l=0;o<s;++o){a=n[o],c=a.box,c.update(a.width||e.w,a.height||e.h,eK(a.horizontal,e));let{same:h,other:f}=J7(e,t,a,r);l|=h&&i.length,d=d||f,c.fullSize||i.push(a)}return l&&Ld(i,e,t,r)||d}function ry(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function DF(n,e,t,r){let i=t.padding,{x:o,y:s}=e;for(let a of n){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/l.weight||1;if(a.horizontal){let h=e.w*d,f=l.size||c.height;Jc(l.start)&&(s=l.start),c.fullSize?ry(c,i.left,s,t.outerWidth-i.right-i.left,f):ry(c,e.left+l.placed,s,h,f),l.start=s,l.placed+=h,s=c.bottom}else{let h=e.h*d,f=l.size||c.width;Jc(l.start)&&(o=l.start),c.fullSize?ry(c,o,i.top,f,t.outerHeight-i.bottom-i.top):ry(c,o,e.top+l.placed,f,h),l.start=o,l.placed+=h,o=c.right}}e.x=o,e.y=s}var on={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=Kt(n.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(t-i.height,0),a=X7(n.boxes),c=a.vertical,l=a.horizontal;Be(n.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});let d=c.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/d,hBoxMaxHeight:s/2}),f=Object.assign({},i);yL(f,Kt(r));let p=Object.assign({maxPadding:f,w:o,h:s,x:i.left,y:i.top},i),y=Y7(c.concat(l),h);Ld(a.fullSize,p,h,y),Ld(c,p,h,y),Ld(l,p,h,y)&&Ld(c,p,h,y),Z7(p),DF(a.leftAndTop,p,h,y),p.x+=p.w,p.y+=p.h,DF(a.rightAndBottom,p,h,y),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Be(a.chartArea,v=>{let _=v.box;Object.assign(_,n.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},hy=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},KC=class extends hy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},ly="$chartjs",tK={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},TF=n=>n===null||n==="";function nK(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[ly]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",TF(i)){let o=xC(n,"width");o!==void 0&&(n.width=o)}if(TF(r))if(n.style.height==="")n.height=n.width/(e||2);else{let o=xC(n,"height");o!==void 0&&(n.height=o)}return n}var vL=cF?{passive:!0}:!1;function rK(n,e,t){n&&n.addEventListener(e,t,vL)}function iK(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,vL)}function oK(n,e){let t=tK[n.type]||n.type,{x:r,y:i}=Qo(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function fy(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function sK(n,e,t){let r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||fy(a.addedNodes,r),s=s&&!fy(a.removedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function aK(n,e,t){let r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||fy(a.removedNodes,r),s=s&&!fy(a.addedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var jd=new Map,SF=0;function _L(){let n=window.devicePixelRatio;n!==SF&&(SF=n,jd.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function cK(n,e){jd.size||window.addEventListener("resize",_L),jd.set(n,e)}function lK(n){jd.delete(n),jd.size||window.removeEventListener("resize",_L)}function uK(n,e,t){let r=n.canvas,i=r&&ty(r);if(!i)return;let o=gC((a,c)=>{let l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),s=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,d=c.contentRect.height;l===0&&d===0||o(l,d)});return s.observe(i),cK(n,o),s}function UC(n,e,t){t&&t.disconnect(),e==="resize"&&lK(n)}function dK(n,e,t){let r=n.canvas,i=gC(o=>{n.ctx!==null&&t(oK(o,n))},n);return rK(r,e,i),i}var QC=class extends hy{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(nK(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[ly])return!1;let r=t[ly].initial;["height","width"].forEach(o=>{let s=r[o];Ee(s)?t.removeAttribute(o):t.setAttribute(o,s)});let i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[ly],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),s={attach:sK,detach:aK,resize:uK}[t]||dK;i[t]=s(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:UC,detach:UC,resize:UC}[t]||iK)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return aF(e,t,r,i)}isAttached(e){let t=e&&ty(e);return!!(t&&t.isConnected)}};function hK(n){return!ey()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?KC:QC}var Ir=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return ia(this.x)&&ia(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}};function fK(n,e){let t=n.options.ticks,r=pK(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?mK(e):[],s=o.length,a=o[0],c=o[s-1],l=[];if(s>i)return yK(e,l,o,s/i),l;let d=gK(o,e,i);if(s>0){let h,f,p=s>1?Math.round((c-a)/(s-1)):null;for(iy(e,l,d,Ee(p)?0:a-p,a),h=0,f=s-1;h<f;h++)iy(e,l,d,o[h],o[h+1]);return iy(e,l,d,c,Ee(p)?e.length:c+p),l}return iy(e,l,d),l}function pK(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function gK(n,e,t){let r=vK(n),i=e.length/t;if(!r)return Math.max(i,1);let o=HO(r);for(let s=0,a=o.length-1;s<a;s++){let c=o[s];if(c>i)return c}return Math.max(i,1)}function mK(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function yK(n,e,t,r){let i=0,o=t[0],s;for(r=Math.ceil(r),s=0;s<n.length;s++)s===o&&(e.push(n[s]),i++,o=t[i*r])}function iy(n,e,t,r,i){let o=ce(r,0),s=Math.min(ce(i,n.length),n.length),a=0,c,l,d;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),d=o;d<0;)a++,d=Math.round(o+a*t);for(l=Math.max(o,0);l<s;l++)l===d&&(e.push(n[l]),a++,d=Math.round(o+a*t))}function vK(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var _K=n=>n==="left"?"right":n==="right"?"left":n,xF=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,AF=(n,e)=>Math.min(e||n,n);function MF(n,e){let t=[],r=n.length/e,i=n.length,o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function bK(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,s=n._endPixel,a=1e-6,c=n.getPixelForTick(i),l;if(!(t&&(r===1?l=Math.max(c-o,s-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<o-a||c>s+a)))return c}function wK(n,e){Be(n,t=>{let r=t.gc,i=r.length/2,o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function Od(n){return n.drawTicks?n.tickLength:0}function RF(n,e){if(!n.display)return 0;let t=Ct(n.font,e),r=Kt(n.padding);return(Ye(n.text)?n.text.length:1)*t.lineHeight+r.height}function EK(n,e){return Gi(n,{scale:e,type:"scale"})}function IK(n,e,t){return Gi(n,{tick:t,index:e,type:"tick"})}function CK(n,e,t){let r=Qm(n);return(t&&e!=="right"||!t&&e==="right")&&(r=_K(r)),r}function DK(n,e,t,r){let{top:i,left:o,bottom:s,right:a,chart:c}=n,{chartArea:l,scales:d}=c,h=0,f,p,y,v=s-i,_=a-o;if(n.isHorizontal()){if(p=Gt(r,o,a),Ce(t)){let T=Object.keys(t)[0],P=t[T];y=d[T].getPixelForValue(P)+v-e}else t==="center"?y=(l.bottom+l.top)/2+v-e:y=xF(n,t,e);f=a-o}else{if(Ce(t)){let T=Object.keys(t)[0],P=t[T];p=d[T].getPixelForValue(P)-_+e}else t==="center"?p=(l.left+l.right)/2-_+e:p=xF(n,t,e);y=Gt(r,s,i),h=t==="left"?-dt:dt}return{titleX:p,titleY:y,maxWidth:f,rotation:h}}var ca=class n extends Ir{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Sn(e,Number.POSITIVE_INFINITY),t=Sn(t,Number.NEGATIVE_INFINITY),r=Sn(r,Number.POSITIVE_INFINITY),i=Sn(i,Number.NEGATIVE_INFINITY),{min:Sn(e,r),max:Sn(t,i),minDefined:ot(e),maxDefined:ot(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),s;if(i&&o)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)s=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,s.min)),o||(r=Math.max(r,s.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:Sn(t,Sn(r,t)),max:Sn(r,Sn(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){We(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tF(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?MF(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=fK(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){We(this.options.afterUpdate,[this])}beforeSetDimensions(){We(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){We(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),We(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){We(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=We(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){We(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){We(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=AF(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation,s=i,a,c,l;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,p=Mt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),c=this.maxHeight-Od(e.grid)-t.padding-RF(e.title,this.chart.options.font),l=Math.sqrt(h*h+f*f),s=Gm(Math.min(Math.asin(Mt((d.highest.height+6)/a,-1,1)),Math.asin(Mt(c/l,-1,1))-Math.asin(Mt(f/l,-1,1)))),s=Math.max(i,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){We(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){We(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let c=RF(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Od(o)+c):(e.height=this.maxHeight,e.width=Od(o)+c),r.display&&this.ticks.length){let{first:l,last:d,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,y=tr(this.labelRotation),v=Math.cos(y),_=Math.sin(y);if(a){let T=r.mirror?0:_*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+T+p)}else{let T=r.mirror?0:v*h.width+_*f.height;e.width=Math.min(this.maxWidth,e.width+T+p)}this._calculatePadding(l,d,_,v)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:o,padding:s},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,p=0;c?l?(f=i*e.width,p=r*t.height):(f=r*e.height,p=i*t.width):o==="start"?p=t.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-d+s)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+s)*this.width/(this.width-h),0)}else{let d=t.height/2,h=e.height/2;o==="start"?(d=0,h=e.height):o==="end"&&(d=t.height,h=0),this.paddingTop=d+s,this.paddingBottom=h+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){We(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Ee(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=MF(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:o}=this,s=[],a=[],c=Math.floor(t/AF(t,r)),l=0,d=0,h,f,p,y,v,_,T,P,O,U,L;for(h=0;h<t;h+=c){if(y=e[h].label,v=this._resolveTickFontOptions(h),i.font=_=v.string,T=o[_]=o[_]||{data:{},gc:[]},P=v.lineHeight,O=U=0,!Ee(y)&&!Ye(y))O=Sd(i,T.data,T.gc,O,y),U=P;else if(Ye(y))for(f=0,p=y.length;f<p;++f)L=y[f],!Ee(L)&&!Ye(L)&&(O=Sd(i,T.data,T.gc,O,L),U+=P);s.push(O),a.push(U),l=Math.max(O,l),d=Math.max(U,d)}wK(o,t);let B=s.indexOf(l),I=a.indexOf(d),w=E=>({width:s[E]||0,height:a[E]||0});return{first:w(0),last:w(t-1),widest:w(B),highest:w(I),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return zO(this._alignToPixels?Wo(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=IK(this.getContext(),e,r))}return this.$context||(this.$context=EK(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=tr(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,c=o?o.highest.height+s:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:o,position:s,border:a}=i,c=o.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Od(o),p=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,_=v/2,T=function(Ge){return Wo(r,Ge,v)},P,O,U,L,B,I,w,E,D,x,R,C;if(s==="top")P=T(this.bottom),I=this.bottom-f,E=P-_,x=T(e.top)+_,C=e.bottom;else if(s==="bottom")P=T(this.top),x=e.top,C=T(e.bottom)-_,I=P+_,E=this.top+f;else if(s==="left")P=T(this.right),B=this.right-f,w=P-_,D=T(e.left)+_,R=e.right;else if(s==="right")P=T(this.left),D=e.left,R=T(e.right)-_,B=P+_,w=this.left+f;else if(t==="x"){if(s==="center")P=T((e.top+e.bottom)/2+.5);else if(Ce(s)){let Ge=Object.keys(s)[0],$e=s[Ge];P=T(this.chart.scales[Ge].getPixelForValue($e))}x=e.top,C=e.bottom,I=P+_,E=I+f}else if(t==="y"){if(s==="center")P=T((e.left+e.right)/2);else if(Ce(s)){let Ge=Object.keys(s)[0],$e=s[Ge];P=T(this.chart.scales[Ge].getPixelForValue($e))}B=P-_,w=B-f,D=e.left,R=e.right}let rt=ce(i.ticks.maxTicksLimit,h),Ae=Math.max(1,Math.ceil(h/rt));for(O=0;O<h;O+=Ae){let Ge=this.getContext(O),$e=o.setContext(Ge),jt=a.setContext(Ge),gt=$e.lineWidth,oi=$e.color,la=jt.dash||[],sn=jt.dashOffset,st=$e.tickWidth,si=$e.tickColor,nr=$e.tickBorderDash||[],ai=$e.tickBorderDashOffset;U=bK(this,O,c),U!==void 0&&(L=Wo(r,U,gt),l?B=w=D=R=L:I=E=x=C=L,p.push({tx1:B,ty1:I,tx2:w,ty2:E,x1:D,y1:x,x2:R,y2:C,width:gt,color:oi,borderDash:la,borderDashOffset:sn,tickWidth:st,tickColor:si,tickBorderDash:nr,tickBorderDashOffset:ai}))}return this._ticksLength=h,this._borderValue=P,p}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:o}=r,s=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:d,mirror:h}=o,f=Od(r.grid),p=f+d,y=h?-d:p,v=-tr(this.labelRotation),_=[],T,P,O,U,L,B,I,w,E,D,x,R,C="middle";if(i==="top")B=this.bottom-y,I=this._getXAxisLabelAlignment();else if(i==="bottom")B=this.top+y,I=this._getXAxisLabelAlignment();else if(i==="left"){let Ae=this._getYAxisLabelAlignment(f);I=Ae.textAlign,L=Ae.x}else if(i==="right"){let Ae=this._getYAxisLabelAlignment(f);I=Ae.textAlign,L=Ae.x}else if(t==="x"){if(i==="center")B=(e.top+e.bottom)/2+p;else if(Ce(i)){let Ae=Object.keys(i)[0],Ge=i[Ae];B=this.chart.scales[Ae].getPixelForValue(Ge)+p}I=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")L=(e.left+e.right)/2-p;else if(Ce(i)){let Ae=Object.keys(i)[0],Ge=i[Ae];L=this.chart.scales[Ae].getPixelForValue(Ge)}I=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?C="top":c==="end"&&(C="bottom"));let rt=this._getLabelSizes();for(T=0,P=a.length;T<P;++T){O=a[T],U=O.label;let Ae=o.setContext(this.getContext(T));w=this.getPixelForTick(T)+o.labelOffset,E=this._resolveTickFontOptions(T),D=E.lineHeight,x=Ye(U)?U.length:1;let Ge=x/2,$e=Ae.color,jt=Ae.textStrokeColor,gt=Ae.textStrokeWidth,oi=I;s?(L=w,I==="inner"&&(T===P-1?oi=this.options.reverse?"left":"right":T===0?oi=this.options.reverse?"right":"left":oi="center"),i==="top"?l==="near"||v!==0?R=-x*D+D/2:l==="center"?R=-rt.highest.height/2-Ge*D+D:R=-rt.highest.height+D/2:l==="near"||v!==0?R=D/2:l==="center"?R=rt.highest.height/2-Ge*D:R=rt.highest.height-x*D,h&&(R*=-1),v!==0&&!Ae.showLabelBackdrop&&(L+=D/2*Math.sin(v))):(B=w,R=(1-x)*D/2);let la;if(Ae.showLabelBackdrop){let sn=Kt(Ae.backdropPadding),st=rt.heights[T],si=rt.widths[T],nr=R-sn.top,ai=0-sn.left;switch(C){case"middle":nr-=st/2;break;case"bottom":nr-=st;break}switch(I){case"center":ai-=si/2;break;case"right":ai-=si;break;case"inner":T===P-1?ai-=si:T>0&&(ai-=si/2);break}la={left:ai,top:nr,width:si+sn.width,height:st+sn.height,color:Ae.backdropColor}}_.push({label:U,font:E,textOffset:R,options:{rotation:v,color:$e,strokeColor:jt,strokeWidth:gt,textAlign:oi,textBaseline:C,translation:[L,B],backdrop:la}})}return _}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-tr(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,c=s.widest.width,l,d;return t==="left"?i?(d=this.right+o,r==="near"?l="left":r==="center"?(l="center",d+=c/2):(l="right",d+=c)):(d=this.right-a,r==="near"?l="right":r==="center"?(l="center",d-=c/2):(l="left",d=this.left)):t==="right"?i?(d=this.left+o,r==="near"?l="right":r==="center"?(l="center",d-=c/2):(l="left",d-=c)):(d=this.left+a,r==="near"?l="left":r==="center"?(l="center",d+=c/2):(l="right",d=this.right)):l="right",{textAlign:l,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,s),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,s,a=(c,l,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(o=0,s=i.length;o<s;++o){let c=i[o];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),s=r.display?o.width:0;if(!s)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,d,h,f;this.isHorizontal()?(l=Wo(e,this.left,s)-s/2,d=Wo(e,this.right,a)+a/2,h=f=c):(h=Wo(e,this.top,s)-s/2,f=Wo(e,this.bottom,a)+a/2,l=d=c),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(l,h),t.lineTo(d,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&Md(r,i);let o=this.getLabelItems(e);for(let s of o){let a=s.options,c=s.font,l=s.label,d=s.textOffset;Go(r,l,0,d,c,a)}i&&Rd(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let o=Ct(r.font),s=Kt(r.padding),a=r.align,c=o.lineHeight/2;t==="bottom"||t==="center"||Ce(t)?(c+=s.bottom,Ye(r.text)&&(c+=o.lineHeight*(r.text.length-1))):c+=s.top;let{titleX:l,titleY:d,maxWidth:h,rotation:f}=DK(this,c,t,a);Go(e,r.text,0,0,o,{color:r.color,maxWidth:h,rotation:f,textAlign:CK(a,t,i),textBaseline:"middle",translation:[l,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=ce(e.grid&&e.grid.z,-1),i=ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],o,s;for(o=0,s=t.length;o<s;++o){let a=t[o];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Ct(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},ol=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;xK(t)&&(r=this.register(t));let i=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,TK(e,s,r),this.override&&Ze.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Ze[i]&&(delete Ze[i][r],this.override&&delete qo[r])}};function TK(n,e,t){let r=Qc(Object.create(null),[t?Ze.get(t):{},Ze.get(e),n.defaults]);Ze.set(e,r),n.defaultRoutes&&SK(e,n.defaultRoutes),n.descriptors&&Ze.describe(e,n.descriptors)}function SK(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),s=e[t].split("."),a=s.pop(),c=s.join(".");Ze.route(o,i,c,a)})}function xK(n){return"id"in n&&"defaults"in n}var YC=class{constructor(){this.controllers=new ol(Xo,"datasets",!0),this.elements=new ol(Ir,"elements"),this.plugins=new ol(Object,"plugins"),this.scales=new ol(ca,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Be(i,s=>{let a=r||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,t,r){let i=Wm(e);We(r["before"+i],[],r),t[e](r),We(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},ri=new YC,XC=class{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let o=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,r,i){i=i||{};for(let o of e){let s=o.plugin,a=s[r],c=[t,i,o.options];if(We(a,c,s)===!1&&i.cancelable)return!1}return!0}invalidate(){Ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=ce(r.options&&r.options.plugins,{}),o=AK(r);return i===!1&&!t?[]:RK(e,o,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(o,s)=>o.filter(a=>!s.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function AK(n){let e={},t=[],r=Object.keys(ri.plugins.items);for(let o=0;o<r.length;o++)t.push(ri.getPlugin(r[o]));let i=n.plugins||[];for(let o=0;o<i.length;o++){let s=i[o];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function MK(n,e){return!e&&n===!1?null:n===!0?{}:n}function RK(n,{plugins:e,localIds:t},r,i){let o=[],s=n.getContext();for(let a of e){let c=a.id,l=MK(r[c],i);l!==null&&o.push({plugin:a,options:PK(n.config,{plugin:a,local:t[c]},l,s)})}return o}function PK(n,{plugin:e,local:t},r,i){let o=n.pluginScopeKeys(e),s=n.getOptionScopes(r,o);return t&&e.defaults&&s.push(e.defaults),n.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function JC(n,e){let t=Ze.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function NK(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function kK(n,e){return n===e?"_index_":"_value_"}function PF(n){if(n==="x"||n==="y"||n==="r")return n}function OK(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function ZC(n,...e){if(PF(n))return n;for(let t of e){let r=t.axis||OK(t.position)||n.length>1&&PF(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function NF(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function FK(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return NF(n,"x",t[0])||NF(n,"y",t[0])}return{}}function LK(n,e){let t=qo[n.type]||{scales:{}},r=e.scales||{},i=JC(n.type,e),o=Object.create(null);return Object.keys(r).forEach(s=>{let a=r[s];if(!Ce(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let c=ZC(s,a,FK(s,n),Ze.scales[a.type]),l=kK(c,i),d=t.scales||{};o[s]=Xc(Object.create(null),[{axis:c},a,d[c],d[l]])}),n.data.datasets.forEach(s=>{let a=s.type||n.type,c=s.indexAxis||JC(a,e),d=(qo[a]||{}).scales||{};Object.keys(d).forEach(h=>{let f=NK(h,c),p=s[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Xc(o[p],[{axis:f},r[p],d[h]])})}),Object.keys(o).forEach(s=>{let a=o[s];Xc(a,[Ze.scales[a.type],Ze.scale])}),o}function bL(n){let e=n.options||(n.options={});e.plugins=ce(e.plugins,{}),e.scales=LK(n,e)}function wL(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function VK(n){return n=n||{},n.data=wL(n.data),bL(n),n}var kF=new Map,EL=new Set;function oy(n,e){let t=kF.get(n);return t||(t=e(),kF.set(n,t),EL.add(t)),t}var Fd=(n,e,t)=>{let r=Wi(e,t);r!==void 0&&n.add(r)},eD=class{constructor(e){this._config=VK(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=wL(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),bL(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return oy(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return oy(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return oy(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return oy(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:o}=this,s=this._cachedScopes(e,r),a=s.get(t);if(a)return a;let c=new Set;t.forEach(d=>{e&&(c.add(e),d.forEach(h=>Fd(c,e,h))),d.forEach(h=>Fd(c,i,h)),d.forEach(h=>Fd(c,qo[o]||{},h)),d.forEach(h=>Fd(c,Ze,h)),d.forEach(h=>Fd(c,Ym,h))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),EL.has(t)&&s.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,qo[t]||{},Ze.datasets[t]||{},{type:t},Ze,Ym]}resolveNamedOptions(e,t,r,i=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=OF(this._resolverCache,e,i),c=s;if(UK(s,t)){o.$shared=!1,r=zi(r)?r():r;let l=this.createResolver(e,r,a);c=ra(s,r,l)}for(let l of t)o[l]=c[l];return o}createResolver(e,t,r=[""],i){let{resolver:o}=OF(this._resolverCache,e,r);return Ce(t)?ra(o,t,void 0,i):o}};function OF(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),o=r.get(i);return o||(o={resolver:Zm(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,o)),o}var jK=n=>Ce(n)&&Object.getOwnPropertyNames(n).some(e=>zi(n[e]));function UK(n,e){let{isScriptable:t,isIndexable:r}=IC(n);for(let i of e){let o=t(i),s=r(i),a=(s||o)&&n[i];if(o&&(zi(a)||jK(a))||s&&Ye(a))return!0}return!1}var BK="4.5.0",HK=["top","bottom","left","right","chartArea"];function FF(n,e){return n==="top"||n==="bottom"||HK.indexOf(n)===-1&&e==="x"}function LF(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function VF(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),We(t&&t.onComplete,[n],e)}function $K(n){let e=n.chart,t=e.options.animation;We(t&&t.onProgress,[n],e)}function IL(n){return ey()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var uy={},jF=n=>{let e=IL(n);return Object.values(uy).filter(t=>t.canvas===e).pop()};function zK(n,e,t){let r=Object.keys(n);for(let i of r){let o=+i;if(o>=e){let s=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=s)}}}function qK(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}var ii=(()=>{class n{static defaults=Ze;static instances=uy;static overrides=qo;static registry=ri;static version=BK;static getChart=jF;static register(...t){ri.add(...t),UF()}static unregister(...t){ri.remove(...t),UF()}constructor(t,r){let i=this.config=new eD(r),o=IL(t),s=jF(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||hK(o)),this.platform.updateConfig(i);let c=this.platform.acquireContext(o,a.aspectRatio),l=c&&c.canvas,d=l&&l.height,h=l&&l.width;if(this.id=VO(),this.ctx=c,this.canvas=l,this.width=h,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new XC,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=QO(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],uy[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ki.listen(this,"complete",VF),Ki.listen(this,"progress",$K),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:o,_aspectRatio:s}=this;return Ee(t)?r&&s?s:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ri}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():SC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bC(this.canvas,this.ctx),this}stop(){return Ki.stop(this),this}resize(t,r){Ki.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,o=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,t,r,s),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,SC(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),We(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};Be(r,(i,o)=>{i.id=o})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,o=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),s=[];r&&(s=s.concat(Object.keys(r).map(a=>{let c=r[a],l=ZC(a,c),d=l==="r",h=l==="x";return{options:c,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),Be(s,a=>{let c=a.options,l=c.id,d=ZC(l,c),h=ce(c.type,a.dtype);(c.position===void 0||FF(c.position,d)!==FF(a.dposition))&&(c.position=a.dposition),o[l]=!0;let f=null;if(l in i&&i[l].type===h)f=i[l];else{let p=ri.getScale(h);f=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(c,t)}),Be(o,(a,c)=>{a||delete i[c]}),Be(i,a=>{on.configure(this,a,a.options),on.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((o,s)=>o.index-s.index),i>r){for(let o=r;o<i;++o)this._destroyDatasetMeta(o);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(LF("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,o)=>{r.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,o;for(this._removeUnreferencedMetasets(),i=0,o=r.length;i<o;i++){let s=r[i],a=this.getDatasetMeta(i),c=s.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=s.indexAxis||JC(c,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=ri.getController(c),{datasetElementType:d,dataElementType:h}=Ze.datasets[c];Object.assign(l,{dataElementType:ri.getElement(h),datasetElementType:d&&ri.getElement(d)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Be(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,h=this.data.datasets.length;d<h;d++){let{controller:f}=this.getDatasetMeta(d),p=!o&&s.indexOf(f)===-1;f.buildOrUpdateElements(p),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),o||Be(s,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(LF("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Be(this.scales,t=>{on.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!aC(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:o,count:s}of r){let a=i==="_removeElements"?-s:s;zK(t,o,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=s=>new Set(t.filter(a=>a[0]===s).map((a,c)=>c+","+a.splice(1).join(","))),o=i(0);for(let s=1;s<r;s++)if(!aC(o,i(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;on.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Be(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,zi(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),o={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(r),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ki.has(this)?this.attached&&!Ki.running(this)&&Ki.start(this):(this.draw(),VF({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],o,s;for(o=0,s=r.length;o<s;++o){let a=r[o];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i={meta:t,index:t.index,cancelable:!0},o=NC(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&Md(r,o),t.controller.draw(),o&&Rd(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Zr(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,o){let s=G7.modes[r];return typeof s=="function"?s(this,t,i,o):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,o=i.filter(s=>s&&s._dataset===r).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=Gi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let o=i?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,o);Jc(r)?(s.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(s,{visible:i}),this.update(c=>c.datasetIndex===t?o:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),Ki.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),bC(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete uy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(s,a)=>{r.addEventListener(this,s,a),t[s]=a},o=(s,a,c)=>{s.offsetX=a,s.offsetY=c,this._eventHandler(s)};Be(this.options.events,s=>i(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(l,d)=>{r.addEventListener(this,l,d),t[l]=d},o=(l,d)=>{t[l]&&(r.removeEventListener(this,l,d),delete t[l])},s=(l,d)=>{this.canvas&&this.resize(l,d)},a,c=()=>{o("attach",c),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){Be(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Be(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let o=i?"set":"remove",s,a,c,l;for(r==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:s,index:a})=>{let c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[a],index:a}});!xd(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let o=this.options.hover,s=(l,d)=>l.filter(h=>!d.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),a=s(r,t),c=i?t:s(t,r);a.length&&this.updateHoverStyle(a,o.mode,!1),c.length&&o.mode&&this.updateHoverStyle(c,o.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},o=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;let s=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(s||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:o=[],options:s}=this,a=r,c=this._getActiveElements(t,o,i,a),l=BO(t),d=qK(t,this._lastEvent,i,l);i&&(this._lastEvent=null,We(s.onHover,[t,c,this],this),l&&We(s.onClick,[t,c,this],this));let h=!xd(c,o);return(h||r)&&(this._active=c,this._updateHoverStyles(c,o,r)),this._lastEvent=d,h}_getActiveElements(t,r,i,o){if(t.type==="mouseout")return[];if(!i)return r;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}}return n})();function UF(){return Be(ii.instances,n=>n._plugins.invalidate())}function WK(n,e,t){let{startAngle:r,x:i,y:o,outerRadius:s,innerRadius:a,options:c}=e,{borderWidth:l,borderJoinStyle:d}=c,h=Math.min(l/s,Wt(r-t));if(n.beginPath(),n.arc(i,o,s-l/2,r+h/2,t-h/2),a>0){let f=Math.min(l/a,Wt(r-t));n.arc(i,o,a+l/2,t-f/2,r+f/2,!0)}else{let f=Math.min(l/2,s*Wt(r-t));if(d==="round")n.arc(i,o,f,t-Oe/2,r+Oe/2,!0);else if(d==="bevel"){let p=2*f*f,y=-p*Math.cos(t+Oe/2)+i,v=-p*Math.sin(t+Oe/2)+o,_=p*Math.cos(r+Oe/2)+i,T=p*Math.sin(r+Oe/2)+o;n.lineTo(y,v),n.lineTo(_,T)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function GK(n,e,t){let{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:c}=e,l=i/a;n.beginPath(),n.arc(o,s,a,r-l,t+l),c>i?(l=i/c,n.arc(o,s,c,t+l,r-l,!0)):n.arc(o,s,i,t+dt,r-dt),n.closePath(),n.clip()}function KK(n){return Jm(n,["outerStart","outerEnd","innerStart","innerEnd"])}function QK(n,e,t,r){let i=KK(n.options.borderRadius),o=(t-e)/2,s=Math.min(o,r*e/2),a=c=>{let l=(t-Math.min(o,c))*r/2;return Mt(c,0,Math.min(o,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Mt(i.innerStart,0,s),innerEnd:Mt(i.innerEnd,0,s)}}function il(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function py(n,e,t,r,i,o){let{x:s,y:a,startAngle:c,pixelMargin:l,innerRadius:d}=e,h=Math.max(e.outerRadius+r+t-l,0),f=d>0?d+r+t+l:0,p=0,y=i-c;if(r){let Ae=d>0?d-r:0,Ge=h>0?h-r:0,$e=(Ae+Ge)/2,jt=$e!==0?y*$e/($e+r):y;p=(y-jt)/2}let v=Math.max(.001,y*h-t/Oe)/h,_=(y-v)/2,T=c+_+p,P=i-_-p,{outerStart:O,outerEnd:U,innerStart:L,innerEnd:B}=QK(e,f,h,P-T),I=h-O,w=h-U,E=T+O/I,D=P-U/w,x=f+L,R=f+B,C=T+L/x,rt=P-B/R;if(n.beginPath(),o){let Ae=(E+D)/2;if(n.arc(s,a,h,E,Ae),n.arc(s,a,h,Ae,D),U>0){let gt=il(w,D,s,a);n.arc(gt.x,gt.y,U,D,P+dt)}let Ge=il(R,P,s,a);if(n.lineTo(Ge.x,Ge.y),B>0){let gt=il(R,rt,s,a);n.arc(gt.x,gt.y,B,P+dt,rt+Math.PI)}let $e=(P-B/f+(T+L/f))/2;if(n.arc(s,a,f,P-B/f,$e,!0),n.arc(s,a,f,$e,T+L/f,!0),L>0){let gt=il(x,C,s,a);n.arc(gt.x,gt.y,L,C+Math.PI,T-dt)}let jt=il(I,T,s,a);if(n.lineTo(jt.x,jt.y),O>0){let gt=il(I,E,s,a);n.arc(gt.x,gt.y,O,T-dt,E)}}else{n.moveTo(s,a);let Ae=Math.cos(E)*h+s,Ge=Math.sin(E)*h+a;n.lineTo(Ae,Ge);let $e=Math.cos(D)*h+s,jt=Math.sin(D)*h+a;n.lineTo($e,jt)}n.closePath()}function YK(n,e,t,r,i){let{fullCircles:o,startAngle:s,circumference:a}=e,c=e.endAngle;if(o){py(n,e,t,r,c,i);for(let l=0;l<o;++l)n.fill();isNaN(a)||(c=s+(a%Xe||Xe))}return py(n,e,t,r,c,i),n.fill(),c}function XK(n,e,t,r,i){let{fullCircles:o,startAngle:s,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:p}=c,y=c.borderAlign==="inner";if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=f,y?(n.lineWidth=l*2,n.lineJoin=d||"round"):(n.lineWidth=l,n.lineJoin=d||"bevel");let v=e.endAngle;if(o){py(n,e,t,r,v,i);for(let _=0;_<o;++_)n.stroke();isNaN(a)||(v=s+(a%Xe||Xe))}y&&GK(n,e,v),c.selfJoin&&v-s>=Oe&&p===0&&d!=="miter"&&WK(n,e,v),o||(py(n,e,t,r,v,i),n.stroke())}var tD=class extends Ir{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){let i=this.getProps(["x","y"],r),{angle:o,distance:s}=dC(i,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,p=ce(h,c-a),y=el(o,a,c)&&a!==c,v=p>=Xe||y,_=ti(s,l+f,d+f);return v&&_}getCenterPoint(e){let{x:t,y:r,startAngle:i,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,d=(i+o)/2,h=(s+a+l+c)/2;return{x:t+Math.cos(d)*h,y:r+Math.sin(d)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:r}=this,i=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>Xe?Math.floor(r/Xe):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);let c=1-Math.sin(Math.min(Oe,r||0)),l=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,YK(e,this,l,o,s),XK(e,this,l,o,s),e.restore()}};function CL(n,e,t=e){n.lineCap=ce(t.borderCapStyle,e.borderCapStyle),n.setLineDash(ce(t.borderDash,e.borderDash)),n.lineDashOffset=ce(t.borderDashOffset,e.borderDashOffset),n.lineJoin=ce(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=ce(t.borderWidth,e.borderWidth),n.strokeStyle=ce(t.borderColor,e.borderColor)}function JK(n,e,t){n.lineTo(t.x,t.y)}function ZK(n){return n.stepped?ZO:n.tension||n.cubicInterpolationMode==="monotone"?eF:JK}function DL(n,e,t={}){let r=n.length,{start:i=0,end:o=r-1}=t,{start:s,end:a}=e,c=Math.max(i,s),l=Math.min(o,a),d=i<s&&o<s||i>a&&o>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!d?r+l-c:l-c}}function eQ(n,e,t,r){let{points:i,options:o}=e,{count:s,start:a,loop:c,ilen:l}=DL(i,t,r),d=ZK(o),{move:h=!0,reverse:f}=r||{},p,y,v;for(p=0;p<=l;++p)y=i[(a+(f?l-p:p))%s],!y.skip&&(h?(n.moveTo(y.x,y.y),h=!1):d(n,v,y,f,o.stepped),v=y);return c&&(y=i[(a+(f?l:0))%s],d(n,v,y,f,o.stepped)),!!c}function tQ(n,e,t,r){let i=e.points,{count:o,start:s,ilen:a}=DL(i,t,r),{move:c=!0,reverse:l}=r||{},d=0,h=0,f,p,y,v,_,T,P=U=>(s+(l?a-U:U))%o,O=()=>{v!==_&&(n.lineTo(d,_),n.lineTo(d,v),n.lineTo(d,T))};for(c&&(p=i[P(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[P(f)],p.skip)continue;let U=p.x,L=p.y,B=U|0;B===y?(L<v?v=L:L>_&&(_=L),d=(h*d+U)/++h):(O(),n.lineTo(U,L),y=B,h=0,v=_=L),T=L}O()}function nD(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?tQ:eQ}function nQ(n){return n.stepped?lF:n.tension||n.cubicInterpolationMode==="monotone"?uF:zo}function rQ(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),CL(n,e.options),n.stroke(i)}function iQ(n,e,t,r){let{segments:i,options:o}=e,s=nD(e);for(let a of i)CL(n,o,a.style),n.beginPath(),s(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var oQ=typeof Path2D=="function";function sQ(n,e,t,r){oQ&&!e.options.segment?rQ(n,e,t,r):iQ(n,e,t,r)}var yy=(()=>{class n extends Ir{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let o=i.spanGaps?this._loop:this._fullLoop;sF(this._points,i,t,o,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hF(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,o=t[r],s=this.points,a=PC(this,{property:r,start:o,end:o});if(!a.length)return;let c=[],l=nQ(i),d,h;for(d=0,h=a.length;d<h;++d){let{start:f,end:p}=a[d],y=s[f],v=s[p];if(y===v){c.push(y);continue}let _=Math.abs((o-y[r])/(v[r]-y[r])),T=l(y,v,_,i.stepped);T[r]=t[r],c.push(T)}return c.length===1?c[0]:c}pathSegment(t,r,i){return nD(this)(t,this,r,i)}path(t,r,i){let o=this.segments,s=nD(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of o)a&=s(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),sQ(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function BF(n,e,t,r){let i=n.options,{[t]:o}=n.getProps([t],r);return Math.abs(e-o)<i.radius+i.hitRadius}var aQ=(()=>{class n extends Ir{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(r-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,r){return BF(this,t,"x",r)}inYRange(t,r){return BF(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!Zr(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Xm(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function TL(n,e){let{x:t,y:r,base:i,width:o,height:s}=n.getProps(["x","y","base","width","height"],e),a,c,l,d,h;return n.horizontal?(h=s/2,a=Math.min(t,i),c=Math.max(t,i),l=r-h,d=r+h):(h=o/2,a=t-h,c=t+h,l=Math.min(r,i),d=Math.max(r,i)),{left:a,top:l,right:c,bottom:d}}function Yo(n,e,t,r){return n?0:Mt(e,t,r)}function cQ(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,o=EC(r);return{t:Yo(i.top,o.top,0,t),r:Yo(i.right,o.right,0,e),b:Yo(i.bottom,o.bottom,0,t),l:Yo(i.left,o.left,0,e)}}function lQ(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,o=Ko(i),s=Math.min(e,t),a=n.borderSkipped,c=r||Ce(i);return{topLeft:Yo(!c||a.top||a.left,o.topLeft,0,s),topRight:Yo(!c||a.top||a.right,o.topRight,0,s),bottomLeft:Yo(!c||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:Yo(!c||a.bottom||a.right,o.bottomRight,0,s)}}function uQ(n){let e=TL(n),t=e.right-e.left,r=e.bottom-e.top,i=cQ(n,t/2,r/2),o=lQ(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function BC(n,e,t,r){let i=e===null,o=t===null,a=n&&!(i&&o)&&TL(n,r);return a&&(i||ti(e,a.left,a.right))&&(o||ti(t,a.top,a.bottom))}function dQ(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function hQ(n,e){n.rect(e.x,e.y,e.w,e.h)}function HC(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-r,s=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+o,h:n.h+s,radius:n.radius}}var rD=class extends Ir{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:o,outer:s}=uQ(this),a=dQ(s.radius)?nl:hQ;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,HC(s,t,o)),e.clip(),a(e,HC(o,-t,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,HC(o,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return BC(this,e,t,r)}inXRange(e,t){return BC(this,e,null,t)}inYRange(e,t){return BC(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+i)/2:t,y:o?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},fQ=Object.freeze({__proto__:null,ArcElement:tD,BarElement:rD,LineElement:yy,PointElement:aQ}),iD=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],HF=iD.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function SL(n){return iD[n%iD.length]}function xL(n){return HF[n%HF.length]}function pQ(n,e){return n.borderColor=SL(e),n.backgroundColor=xL(e),++e}function gQ(n,e){return n.backgroundColor=n.data.map(()=>SL(e++)),e}function mQ(n,e){return n.backgroundColor=n.data.map(()=>xL(e++)),e}function yQ(n){let e=0;return(t,r)=>{let i=n.getDatasetMeta(r).controller;i instanceof hD?e=gQ(t,e):i instanceof gL?e=mQ(t,e):i&&(e=pQ(t,e))}}function $F(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function vQ(n){return n&&(n.borderColor||n.backgroundColor)}function _Q(){return Ze.borderColor!=="rgba(0,0,0,0.1)"||Ze.backgroundColor!=="rgba(0,0,0,0.1)"}var bQ={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:r},options:i}=n.config,{elements:o}=i,s=$F(r)||vQ(i)||o&&$F(o)||_Q();if(!t.forceOverride&&s)return;let a=yQ(n);r.forEach(a)}};function wQ(n,e,t,r,i){let o=i.samples||r;if(o>=t)return n.slice(e,e+t);let s=[],a=(t-2)/(o-2),c=0,l=e+t-1,d=e,h,f,p,y,v;for(s[c++]=n[d],h=0;h<o-2;h++){let _=0,T=0,P,O=Math.floor((h+1)*a)+1+e,U=Math.min(Math.floor((h+2)*a)+1,t)+e,L=U-O;for(P=O;P<U;P++)_+=n[P].x,T+=n[P].y;_/=L,T/=L;let B=Math.floor(h*a)+1+e,I=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:w,y:E}=n[d];for(p=y=-1,P=B;P<I;P++)y=.5*Math.abs((w-_)*(n[P].y-E)-(w-n[P].x)*(T-E)),y>p&&(p=y,f=n[P],v=P);s[c++]=f,d=v}return s[c++]=n[l],s}function EQ(n,e,t,r){let i=0,o=0,s,a,c,l,d,h,f,p,y,v,_=[],T=e+t-1,P=n[e].x,U=n[T].x-P;for(s=e;s<e+t;++s){a=n[s],c=(a.x-P)/U*r,l=a.y;let L=c|0;if(L===d)l<y?(y=l,h=s):l>v&&(v=l,f=s),i=(o*i+a.x)/++o;else{let B=s-1;if(!Ee(h)&&!Ee(f)){let I=Math.min(h,f),w=Math.max(h,f);I!==p&&I!==B&&_.push(te(j({},n[I]),{x:i})),w!==p&&w!==B&&_.push(te(j({},n[w]),{x:i}))}s>0&&B!==p&&_.push(n[B]),_.push(a),d=L,o=0,y=v=l,h=f=p=s}}return _}function AL(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function zF(n){n.data.datasets.forEach(e=>{AL(e)})}function IQ(n,e){let t=e.length,r=0,i,{iScale:o}=n,{min:s,max:a,minDefined:c,maxDefined:l}=o.getUserBounds();return c&&(r=Mt(Jr(e,o.axis,s).lo,0,t-1)),l?i=Mt(Jr(e,o.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var CQ={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){zF(n);return}let r=n.width;n.data.datasets.forEach((i,o)=>{let{_data:s,indexAxis:a}=i,c=n.getDatasetMeta(o),l=s||i.data;if(rl([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let d=n.scales[c.xAxisID];if(d.type!=="linear"&&d.type!=="time"||n.options.parsing)return;let{start:h,count:f}=IQ(c,l),p=t.threshold||4*r;if(f<=p){AL(i);return}Ee(s)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let y;switch(t.algorithm){case"lttb":y=wQ(l,h,f,r,t);break;case"min-max":y=EQ(l,h,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=y})},destroy(n){zF(n)}};function DQ(n,e,t){let r=n.segments,i=n.points,o=e.points,s=[];for(let a of r){let{start:c,end:l}=a;l=vy(c,l,i);let d=oD(t,i[c],i[l],a.loop);if(!e.segments){s.push({source:a,target:d,start:i[c],end:i[l]});continue}let h=PC(e,d);for(let f of h){let p=oD(t,o[f.start],o[f.end],f.loop),y=RC(a,i,p);for(let v of y)s.push({source:v,target:f,start:{[t]:qF(d,p,"start",Math.max)},end:{[t]:qF(d,p,"end",Math.min)}})}}return s}function oD(n,e,t,r){if(r)return;let i=e[n],o=t[n];return n==="angle"&&(i=Wt(i),o=Wt(o)),{property:n,start:i,end:o}}function TQ(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,o=[];return e.segments.forEach(({start:s,end:a})=>{a=vy(s,a,i);let c=i[s],l=i[a];r!==null?(o.push({x:c.x,y:r}),o.push({x:l.x,y:r})):t!==null&&(o.push({x:t,y:c.y}),o.push({x:t,y:l.y}))}),o}function vy(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function qF(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function ML(n,e){let t=[],r=!1;return Ye(n)?(r=!0,t=n):t=TQ(n,e),t.length?new yy({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function WF(n){return n&&n.fill!==!1}function SQ(n,e,t){let i=n[e].fill,o=[e],s;if(!t)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!ot(i))return i;if(s=n[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function xQ(n,e,t){let r=PQ(n);if(Ce(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return ot(i)&&Math.floor(i)===i?AQ(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function AQ(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function MQ(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Ce(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function RQ(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:Ce(n)?r=n.value:r=e.getBaseValue(),r}function PQ(n){let e=n.options,t=e.fill,r=ce(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function NQ(n){let{scale:e,index:t,line:r}=n,i=[],o=r.segments,s=r.points,a=kQ(e,t);a.push(ML({x:null,y:e.bottom},r));for(let c=0;c<o.length;c++){let l=o[c];for(let d=l.start;d<=l.end;d++)OQ(i,s[d],a)}return new yy({points:i,options:{}})}function kQ(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let o=r[i];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function OQ(n,e,t){let r=[];for(let i=0;i<t.length;i++){let o=t[i],{first:s,last:a,point:c}=FQ(o,e,"x");if(!(!c||s&&a)){if(s)r.unshift(c);else if(n.push(c),!a)break}}n.push(...r)}function FQ(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],o=n.segments,s=n.points,a=!1,c=!1;for(let l=0;l<o.length;l++){let d=o[l],h=s[d.start][t],f=s[d.end][t];if(ti(i,h,f)){a=i===h,c=i===f;break}}return{first:a,last:c,point:r}}var gy=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:o,radius:s}=this;return t=t||{start:0,end:Xe},e.arc(i,o,s,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,o=e.angle;return{x:t+Math.cos(o)*i,y:r+Math.sin(o)*i,angle:o}}};function LQ(n){let{chart:e,fill:t,line:r}=n;if(ot(t))return VQ(e,t);if(t==="stack")return NQ(n);if(t==="shape")return!0;let i=jQ(n);return i instanceof gy?i:ML(i,r)}function VQ(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function jQ(n){return(n.scale||{}).getPointPositionForValue?BQ(n):UQ(n)}function UQ(n){let{scale:e={},fill:t}=n,r=MQ(t,e);if(ot(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function BQ(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,s=RQ(t,e,o),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,o);return new gy({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(s)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,s));return a}function $C(n,e,t){let r=LQ(e),{chart:i,index:o,line:s,scale:a,axis:c}=e,l=s.options,d=l.fill,h=l.backgroundColor,{above:f=h,below:p=h}=d||{},y=i.getDatasetMeta(o),v=NC(i,y);r&&s.points.length&&(Md(n,t),HQ(n,{line:s,target:r,above:f,below:p,area:t,scale:a,axis:c,clip:v}),Rd(n))}function HQ(n,e){let{line:t,target:r,above:i,below:o,area:s,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let d=o;o!==i&&(l==="x"?(GF(n,r,s.top),zC(n,{line:t,target:r,color:i,scale:a,property:l,clip:c}),n.restore(),n.save(),GF(n,r,s.bottom)):l==="y"&&(KF(n,r,s.left),zC(n,{line:t,target:r,color:o,scale:a,property:l,clip:c}),n.restore(),n.save(),KF(n,r,s.right),d=i)),zC(n,{line:t,target:r,color:d,scale:a,property:l,clip:c}),n.restore()}function GF(n,e,t){let{segments:r,points:i}=e,o=!0,s=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,d=i[c],h=i[vy(c,l,i)];o?(n.moveTo(d.x,d.y),o=!1):(n.lineTo(d.x,t),n.lineTo(d.x,d.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function KF(n,e,t){let{segments:r,points:i}=e,o=!0,s=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,d=i[c],h=i[vy(c,l,i)];o?(n.moveTo(d.x,d.y),o=!1):(n.lineTo(t,d.y),n.lineTo(d.x,d.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(t,h.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function zC(n,e){let{line:t,target:r,property:i,color:o,scale:s,clip:a}=e,c=DQ(t,r,i);for(let{source:l,target:d,start:h,end:f}of c){let{style:{backgroundColor:p=o}={}}=l,y=r!==!0;n.save(),n.fillStyle=p,$Q(n,s,a,y&&oD(i,h,f)),n.beginPath();let v=!!t.pathSegment(n,l),_;if(y){v?n.closePath():QF(n,r,f,i);let T=!!r.pathSegment(n,d,{move:v,reverse:!0});_=v&&T,_||QF(n,r,h,i)}n.closePath(),n.fill(_?"evenodd":"nonzero"),n.restore()}}function $Q(n,e,t,r){let i=e.chart.chartArea,{property:o,start:s,end:a}=r||{};if(o==="x"||o==="y"){let c,l,d,h;o==="x"?(c=s,l=i.top,d=a,h=i.bottom):(c=i.left,l=s,d=i.right,h=a),n.beginPath(),t&&(c=Math.max(c,t.left),d=Math.min(d,t.right),l=Math.max(l,t.top),h=Math.min(h,t.bottom)),n.rect(c,l,d-c,h-l),n.clip()}}function QF(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var zQ={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],o,s,a,c;for(s=0;s<r;++s)o=n.getDatasetMeta(s),a=o.dataset,c=null,a&&a.options&&a instanceof yy&&(c={visible:n.isDatasetVisible(s),index:s,fill:xQ(a,s,r),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=c,i.push(c);for(s=0;s<r;++s)c=i[s],!(!c||c.fill===!1)&&(c.fill=SQ(i,s,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let s=i.length-1;s>=0;--s){let a=i[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),r&&a.fill&&$C(n.ctx,a,o))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let o=r[i].$filler;WF(o)&&$C(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!WF(r)||t.drawTime!=="beforeDatasetDraw"||$C(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},YF=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},qQ=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,my=class extends Ir{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=We(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=Ct(r.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=YF(r,o),l,d;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,d=this._fitRows(s,o,a,c)+10):(d=this.maxHeight,l=this._fitCols(s,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],d=i+a,h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((y,v)=>{let _=r+t/2+o.measureText(y.text).width;(v===0||l[l.length-1]+_+2*a>s)&&(h+=d,l[l.length-(v>0?0:1)]=0,p+=d,f++),c[v]={left:0,top:p,row:f,width:_,height:i},l[l.length-1]+=_+a}),h}_fitCols(e,t,r,i){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],d=s-e,h=a,f=0,p=0,y=0,v=0;return this.legendItems.forEach((_,T)=>{let{itemWidth:P,itemHeight:O}=WQ(r,t,o,_,i);T>0&&p+O+2*a>d&&(h+=f+a,l.push({width:f,height:p}),y+=f+a,v++,f=p=0),c[T]={left:y,top:p,col:v,width:P,height:O},f=Math.max(f,P),p+=O+a}),h+=f,l.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,s=oa(o,this.left,this.width);if(this.isHorizontal()){let a=0,c=Gt(r,this.left+i,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Gt(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=s.leftForLtr(s.x(c),l.width),c+=l.width+i}else{let a=0,c=Gt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Gt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=s.leftForLtr(s.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Md(e,this),this._draw(),Rd(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:s}=e,a=Ze.color,c=oa(e.rtl,this.left,this.width),l=Ct(s.font),{padding:d}=s,h=l.size,f=h/2,p;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:y,boxHeight:v,itemHeight:_}=YF(s,h),T=function(B,I,w){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;i.save();let E=ce(w.lineWidth,1);if(i.fillStyle=ce(w.fillStyle,a),i.lineCap=ce(w.lineCap,"butt"),i.lineDashOffset=ce(w.lineDashOffset,0),i.lineJoin=ce(w.lineJoin,"miter"),i.lineWidth=E,i.strokeStyle=ce(w.strokeStyle,a),i.setLineDash(ce(w.lineDash,[])),s.usePointStyle){let D={radius:v*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:E},x=c.xPlus(B,y/2),R=I+f;wC(i,D,x,R,s.pointStyleWidth&&y)}else{let D=I+Math.max((h-v)/2,0),x=c.leftForLtr(B,y),R=Ko(w.borderRadius);i.beginPath(),Object.values(R).some(C=>C!==0)?nl(i,{x,y:D,w:y,h:v,radius:R}):i.rect(x,D,y,v),i.fill(),E!==0&&i.stroke()}i.restore()},P=function(B,I,w){Go(i,w.text,B,I+_/2,l,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},O=this.isHorizontal(),U=this._computeTitleHeight();O?p={x:Gt(o,this.left+d,this.right-r[0]),y:this.top+d+U,line:0}:p={x:this.left+d,y:Gt(o,this.top+U+d,this.bottom-t[0].height),line:0},AC(this.ctx,e.textDirection);let L=_+d;this.legendItems.forEach((B,I)=>{i.strokeStyle=B.fontColor,i.fillStyle=B.fontColor;let w=i.measureText(B.text).width,E=c.textAlign(B.textAlign||(B.textAlign=s.textAlign)),D=y+f+w,x=p.x,R=p.y;c.setWidth(this.width),O?I>0&&x+D+d>this.right&&(R=p.y+=L,p.line++,x=p.x=Gt(o,this.left+d,this.right-r[p.line])):I>0&&R+L>this.bottom&&(x=p.x=x+t[p.line].width+d,p.line++,R=p.y=Gt(o,this.top+U+d,this.bottom-t[p.line].height));let C=c.x(x);if(T(C,R,B),x=YO(E,x+y+f,O?x+D:this.right,e.rtl),P(c.x(x),R,B),O)p.x+=D+d;else if(typeof B.text!="string"){let rt=l.lineHeight;p.y+=RL(B,rt)+d}else p.y+=L}),MC(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=Ct(t.font),i=Kt(t.padding);if(!t.display)return;let o=oa(e.rtl,this.left,this.width),s=this.ctx,a=t.position,c=r.size/2,l=i.top+c,d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+l,h=Gt(e.align,h,this.right-f);else{let y=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);d=l+Gt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}let p=Gt(a,h,h+f);s.textAlign=o.textAlign(Qm(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,Go(s,t.text,p,d,r)}_computeTitleHeight(){let e=this.options.title,t=Ct(e.font),r=Kt(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(ti(e,this.left,this.right)&&ti(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],ti(e,i.left,i.left+i.width)&&ti(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!QQ(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,o=qQ(i,r);i&&!o&&We(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&We(t.onHover,[e,r,this],this)}else r&&We(t.onClick,[e,r,this],this)}};function WQ(n,e,t,r,i){let o=GQ(r,n,e,t),s=KQ(i,r,e.lineHeight);return{itemWidth:o,itemHeight:s}}function GQ(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,s)=>o.length>s.length?o:s)),e+t.size/2+r.measureText(i).width}function KQ(n,e,t){let r=n;return typeof e.text!="string"&&(r=RL(e,t)),r}function RL(n,e){let t=n.text?n.text.length:0;return e*t}function QQ(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var YQ={id:"legend",_element:my,start(n,e,t){let r=n.legend=new my({ctx:n.ctx,options:t,chart:n});on.configure(n,r,t),on.addBox(n,r)},stop(n){on.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;on.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),d=Kt(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Ud=class extends Ir{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=Ye(r.text)?r.text.length:1;this._padding=Kt(r.padding);let o=i*Ct(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:o,options:s}=this,a=s.align,c=0,l,d,h;return this.isHorizontal()?(d=Gt(a,r,o),h=t+e,l=o-r):(s.position==="left"?(d=r+e,h=Gt(a,i,t),c=Oe*-.5):(d=o-e,h=Gt(a,t,i),c=Oe*.5),l=i-t),{titleX:d,titleY:h,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=Ct(t.font),o=r.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(o);Go(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:Qm(t.align),textBaseline:"middle",translation:[s,a]})}};function XQ(n,e){let t=new Ud({ctx:n.ctx,options:e,chart:n});on.configure(n,t,e),on.addBox(n,t),n.titleBlock=t}var JQ={id:"title",_element:Ud,start(n,e,t){XQ(n,t)},stop(n){let e=n.titleBlock;on.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;on.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},sy=new WeakMap,ZQ={id:"subtitle",start(n,e,t){let r=new Ud({ctx:n.ctx,options:t,chart:n});on.configure(n,r,t),on.addBox(n,r),sy.set(n,r)},stop(n){on.removeBox(n,sy.get(n)),sy.delete(n)},beforeUpdate(n,e,t){let r=sy.get(n);on.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Vd={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,o=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();r.add(c.x),i+=c.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=n.length;o<s;++o){let c=n[o].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),d=zm(e,l);d<i&&(i=d,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function ni(n,e){return e&&(Ye(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Qi(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function eY(n,e){let{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:n,label:s,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function XF(n,e){let t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:s,boxHeight:a}=e,c=Ct(e.bodyFont),l=Ct(e.titleFont),d=Ct(e.footerFont),h=o.length,f=i.length,p=r.length,y=Kt(e.padding),v=y.height,_=0,T=r.reduce((U,L)=>U+L.before.length+L.lines.length+L.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,h&&(v+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),T){let U=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;v+=p*U+(T-p)*c.lineHeight+(T-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let P=0,O=function(U){_=Math.max(_,t.measureText(U).width+P)};return t.save(),t.font=l.string,Be(n.title,O),t.font=c.string,Be(n.beforeBody.concat(n.afterBody),O),P=e.displayColors?s+2+e.boxPadding:0,Be(r,U=>{Be(U.before,O),Be(U.lines,O),Be(U.after,O)}),P=0,t.font=d.string,Be(n.footer,O),t.restore(),_+=y.width,{width:_,height:v}}function tY(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function nY(n,e,t,r){let{x:i,width:o}=r,s=t.caretSize+t.caretPadding;if(n==="left"&&i+o+s>e.width||n==="right"&&i-o-s<0)return!0}function rY(n,e,t,r){let{x:i,width:o}=t,{width:s,chartArea:{left:a,right:c}}=n,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=o/2?l="left":i>=s-o/2&&(l="right"),nY(l,n,e,t)&&(l="center"),l}function JF(n,e,t){let r=t.yAlign||e.yAlign||tY(n,t);return{xAlign:t.xAlign||e.xAlign||rY(n,e,t,r),yAlign:r}}function iY(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function oY(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function ZF(n,e,t,r){let{caretSize:i,caretPadding:o,cornerRadius:s}=n,{xAlign:a,yAlign:c}=t,l=i+o,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=Ko(s),y=iY(e,a),v=oY(e,c,l);return c==="center"?a==="left"?y+=l:a==="right"&&(y-=l):a==="left"?y-=Math.max(d,f)+i:a==="right"&&(y+=Math.max(h,p)+i),{x:Mt(y,0,r.width-e.width),y:Mt(v,0,r.height-e.height)}}function ay(n,e,t){let r=Kt(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function eL(n){return ni([],Qi(n))}function sY(n,e,t){return Gi(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function tL(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var PL={beforeTitle:ei,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:ei,beforeBody:ei,beforeLabel:ei,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Ee(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ei,afterBody:ei,beforeFooter:ei,footer:ei,afterFooter:ei};function xn(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?PL[e].call(t,r):i}var nL=(()=>{class n extends Ir{static positioners=Vd;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&r.options.animation&&i.animations,s=new dy(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=sY(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,o=xn(i,"beforeTitle",this,t),s=xn(i,"title",this,t),a=xn(i,"afterTitle",this,t),c=[];return c=ni(c,Qi(o)),c=ni(c,Qi(s)),c=ni(c,Qi(a)),c}getBeforeBody(t,r){return eL(xn(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,o=[];return Be(t,s=>{let a={before:[],lines:[],after:[]},c=tL(i,s);ni(a.before,Qi(xn(c,"beforeLabel",this,s))),ni(a.lines,xn(c,"label",this,s)),ni(a.after,Qi(xn(c,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(t,r){return eL(xn(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,o=xn(i,"beforeFooter",this,t),s=xn(i,"footer",this,t),a=xn(i,"afterFooter",this,t),c=[];return c=ni(c,Qi(o)),c=ni(c,Qi(s)),c=ni(c,Qi(a)),c}_createItems(t){let r=this._active,i=this.chart.data,o=[],s=[],a=[],c=[],l,d;for(l=0,d=r.length;l<d;++l)c.push(eY(this.chart,r[l]));return t.filter&&(c=c.filter((h,f,p)=>t.filter(h,f,p,i))),t.itemSort&&(c=c.sort((h,f)=>t.itemSort(h,f,i))),Be(c,h=>{let f=tL(t.callbacks,h);o.push(xn(f,"labelColor",this,h)),s.push(xn(f,"labelPointStyle",this,h)),a.push(xn(f,"labelTextColor",this,h))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let c=Vd[i.position].call(this,o,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=XF(this,i),d=Object.assign({},c,l),h=JF(this.chart,i,d),f=ZF(i,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,o){let s=this.getCaretPosition(t,i,o);r.lineTo(s.x1,s.y1),r.lineTo(s.x2,s.y2),r.lineTo(s.x3,s.y3)}getCaretPosition(t,r,i){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:f}=Ko(c),{x:p,y}=t,{width:v,height:_}=r,T,P,O,U,L,B;return s==="center"?(L=y+_/2,o==="left"?(T=p,P=T-a,U=L+a,B=L-a):(T=p+v,P=T+a,U=L-a,B=L+a),O=T):(o==="left"?P=p+Math.max(l,h)+a:o==="right"?P=p+v-Math.max(d,f)-a:P=this.caretX,s==="top"?(U=y,L=U-a,T=P-a,O=P+a):(U=y+_,L=U+a,T=P+a,O=P-a),B=U),{x1:T,x2:P,x3:O,y1:U,y2:L,y3:B}}drawTitle(t,r,i){let o=this.title,s=o.length,a,c,l;if(s){let d=oa(i.rtl,this.x,this.width);for(t.x=ay(this,i.titleAlign,i),r.textAlign=d.textAlign(i.titleAlign),r.textBaseline="middle",a=Ct(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<s;++l)r.fillText(o[l],d.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===s&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,o,s){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:d}=s,h=Ct(s.bodyFont),f=ay(this,"left",s),p=o.x(f),y=l<h.lineHeight?(h.lineHeight-l)/2:0,v=r.y+y;if(s.usePointStyle){let _={radius:Math.min(d,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},T=o.leftForLtr(p,d)+d/2,P=v+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,Xm(t,_,T,P),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Xm(t,_,T,P)}else{t.lineWidth=Ce(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let _=o.leftForLtr(p,d),T=o.leftForLtr(o.xPlus(p,1),d-2),P=Ko(a.borderRadius);Object.values(P).some(O=>O!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,nl(t,{x:_,y:v,w:d,h:l,radius:P}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),nl(t,{x:T,y:v+1,w:d-2,h:l-2,radius:P}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(_,v,d,l),t.strokeRect(_,v,d,l),t.fillStyle=a.backgroundColor,t.fillRect(T,v+1,d-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:d,boxPadding:h}=i,f=Ct(i.bodyFont),p=f.lineHeight,y=0,v=oa(i.rtl,this.x,this.width),_=function(E){r.fillText(E,v.x(t.x+y),t.y+p/2),t.y+=p+s},T=v.textAlign(a),P,O,U,L,B,I,w;for(r.textAlign=a,r.textBaseline="middle",r.font=f.string,t.x=ay(this,T,i),r.fillStyle=i.bodyColor,Be(this.beforeBody,_),y=c&&T!=="right"?a==="center"?d/2+h:d+2+h:0,L=0,I=o.length;L<I;++L){for(P=o[L],O=this.labelTextColors[L],r.fillStyle=O,Be(P.before,_),U=P.lines,c&&U.length&&(this._drawColorBox(r,t,L,v,i),p=Math.max(f.lineHeight,l)),B=0,w=U.length;B<w;++B)_(U[B]),p=f.lineHeight;Be(P.after,_)}y=0,p=f.lineHeight,Be(this.afterBody,_),t.y-=s}drawFooter(t,r,i){let o=this.footer,s=o.length,a,c;if(s){let l=oa(i.rtl,this.x,this.width);for(t.x=ay(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=Ct(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<s;++c)r.fillText(o[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,o){let{xAlign:s,yAlign:a}=this,{x:c,y:l}=t,{width:d,height:h}=i,{topLeft:f,topRight:p,bottomLeft:y,bottomRight:v}=Ko(o.cornerRadius);r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth,r.beginPath(),r.moveTo(c+f,l),a==="top"&&this.drawCaret(t,r,i,o),r.lineTo(c+d-p,l),r.quadraticCurveTo(c+d,l,c+d,l+p),a==="center"&&s==="right"&&this.drawCaret(t,r,i,o),r.lineTo(c+d,l+h-v),r.quadraticCurveTo(c+d,l+h,c+d-v,l+h),a==="bottom"&&this.drawCaret(t,r,i,o),r.lineTo(c+y,l+h),r.quadraticCurveTo(c,l+h,c,l+h-y),a==="center"&&s==="left"&&this.drawCaret(t,r,i,o),r.lineTo(c,l+f),r.quadraticCurveTo(c,l,c+f,l),r.closePath(),r.fill(),o.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,o=i&&i.x,s=i&&i.y;if(o||s){let a=Vd[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=XF(this,t),l=Object.assign({},a,this._size),d=JF(r,t,l),h=ZF(t,l,d,r);(o._to!==h.x||s._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=Kt(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,o,r),AC(t,r.textDirection),s.y+=a.top,this.drawTitle(s,t,r),this.drawBody(s,t,r),this.drawFooter(s,t,r),MC(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,o=t.map(({datasetIndex:c,index:l})=>{let d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[l],index:l}}),s=!xd(i,o),a=this._positionChanged(o,r);(s||a)&&(this._active=o,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(t,s,r,i),c=this._positionChanged(a,t),l=r||!xd(a,s)||c;return l&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,o){let s=this.options;if(t.type==="mouseout")return[];if(!o)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:o,options:s}=this,a=Vd[s.position].call(this,t,r);return a!==!1&&(i!==a.x||o!==a.y)}}return n})(),aY={id:"tooltip",_element:nL,positioners:Vd,afterInit(n,e,t){t&&(n.tooltip=new nL({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",te(j({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:PL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},cY=Object.freeze({__proto__:null,Colors:bQ,Decimation:CQ,Filler:zQ,Legend:YQ,SubTitle:ZQ,Title:JQ,Tooltip:aY}),lY=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function uY(n,e,t,r){let i=n.indexOf(e);if(i===-1)return lY(n,e,t,r);let o=n.lastIndexOf(e);return i!==o?t:i}var dY=(n,e)=>n===null?null:Mt(Math.round(n),0,e);function rL(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var hY=(()=>{class n extends ca{static id="category";static defaults={ticks:{callback:rL}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:o,label:s}of r)i[o]===s&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Ee(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:uY(i,t,ce(r,t),this._addedLabels),dY(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,o=[],s=this.getLabels();s=t===0&&r===s.length-1?s:s.slice(t,r+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)o.push({value:a});return o}getLabelForValue(t){return rL.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function fY(n,e){let t=[],{bounds:i,step:o,min:s,max:a,precision:c,count:l,maxTicks:d,maxDigits:h,includeBounds:f}=n,p=o||1,y=d-1,{min:v,max:_}=e,T=!Ee(s),P=!Ee(a),O=!Ee(l),U=(_-v)/(h+1),L=cC((_-v)/y/p)*p,B,I,w,E;if(L<1e-14&&!T&&!P)return[{value:v},{value:_}];E=Math.ceil(_/L)-Math.floor(v/L),E>y&&(L=cC(E*L/y/p)*p),Ee(c)||(B=Math.pow(10,c),L=Math.ceil(L*B)/B),i==="ticks"?(I=Math.floor(v/L)*L,w=Math.ceil(_/L)*L):(I=v,w=_),T&&P&&o&&$O((a-s)/o,L/1e3)?(E=Math.round(Math.min((a-s)/L,d)),L=(a-s)/E,I=s,w=a):O?(I=T?s:I,w=P?a:w,E=l-1,L=(w-I)/E):(E=(w-I)/L,Zc(E,Math.round(E),L/1e3)?E=Math.round(E):E=Math.ceil(E));let D=Math.max(uC(L),uC(I));B=Math.pow(10,Ee(c)?D:c),I=Math.round(I*B)/B,w=Math.round(w*B)/B;let x=0;for(T&&(f&&I!==s?(t.push({value:s}),I<s&&x++,Zc(Math.round((I+x*L)*B)/B,s,iL(s,U,n))&&x++):I<s&&x++);x<E;++x){let R=Math.round((I+x*L)*B)/B;if(P&&R>a)break;t.push({value:R})}return P&&f&&w!==a?t.length&&Zc(t[t.length-1].value,a,iL(a,U,n))?t[t.length-1].value=a:t.push({value:a}):(!P||w===a)&&t.push({value:w}),t}function iL(n,e,{horizontal:t,minRotation:r}){let i=tr(r),o=(t?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+n).length;return Math.min(e/o,s)}var sl=class extends ca{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ee(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this,s=c=>i=t?i:c,a=c=>o=r?o:c;if(e){let c=Er(i),l=Er(o);c<0&&l<0?a(0):c>0&&l>0&&s(0)}if(i===o){let c=o===0?1:Math.abs(o*.05);a(o+c),e||s(i-c)}this.min=i,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,s=fY(i,o);return e.bounds==="ticks"&&lC(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return tl(e,this.chart.options.locale,this.options.ticks.format)}},sD=class extends sl{static id="linear";static defaults={ticks:{callback:Ad.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=ot(e)?e:0,this.max=ot(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=tr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Bd=n=>Math.floor(qi(n)),aa=(n,e)=>Math.pow(10,Bd(n)+e);function oL(n){return n/Math.pow(10,Bd(n))===1}function sL(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function pY(n,e){let t=e-n,r=Bd(t);for(;sL(n,e,r)>10;)r++;for(;sL(n,e,r)<10;)r--;return Math.min(r,Bd(n))}function gY(n,{min:e,max:t}){e=Sn(n.min,e);let r=[],i=Bd(e),o=pY(e,t),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),c=i>o?Math.pow(10,i):0,l=Math.round((e-c)*s)/s,d=Math.floor((e-c)/a/10)*a*10,h=Math.floor((l-d)/Math.pow(10,o)),f=Sn(n.min,Math.round((c+d+h*Math.pow(10,o))*s)/s);for(;f<t;)r.push({value:f,major:oL(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,s=o>=0?1:s),f=Math.round((c+d+h*Math.pow(10,o))*s)/s;let p=Sn(n.max,f);return r.push({value:p,major:oL(p),significand:h}),r}var aD=class extends ca{static id="logarithmic";static defaults={ticks:{callback:Ad.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=sl.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return ot(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=ot(e)?Math.max(0,e):null,this.max=ot(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ot(this._userMin)&&(this.min=e===aa(this.min,0)?aa(this.min,-1):aa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,o=a=>r=e?r:a,s=a=>i=t?i:a;r===i&&(r<=0?(o(1),s(10)):(o(aa(r,-1)),s(aa(i,1)))),r<=0&&o(aa(i,-1)),i<=0&&s(aa(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=gY(t,this);return e.bounds==="ticks"&&lC(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":tl(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=qi(e),this._valueRange=qi(this.max)-qi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(qi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function cD(n){let e=n.ticks;if(e.display&&n.display){let t=Kt(e.backdropPadding);return ce(e.font&&e.font.size,Ze.font.size)+t.height}return 0}function mY(n,e,t){return t=Ye(t)?t:[t],{w:JO(n,e.string,t),h:t.length*e.lineHeight}}function aL(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function yY(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],o=n._pointLabels.length,s=n.options.pointLabels,a=s.centerPointLabels?Oe/o:0;for(let c=0;c<o;c++){let l=s.setContext(n.getPointLabelContext(c));i[c]=l.padding;let d=n.getPointPosition(c,n.drawingArea+i[c],a),h=Ct(l.font),f=mY(n.ctx,h,n._pointLabels[c]);r[c]=f;let p=Wt(n.getIndexAngle(c)+a),y=Math.round(Gm(p)),v=aL(y,d.x,f.w,0,180),_=aL(y,d.y,f.h,90,270);vY(t,e,p,v,_)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=wY(n,r,i)}function vY(n,e,t,r,i){let o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/o,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/s,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/s,n.b=Math.max(n.b,e.b+c))}function _Y(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=t,c=n.getPointPosition(e,r+i+s,o),l=Math.round(Gm(Wt(c.angle+dt))),d=CY(c.y,a.h,l),h=EY(l),f=IY(c.x,a.w,h);return{visible:!0,x:c.x,y:d,textAlign:h,left:f,top:d,right:f+a.w,bottom:d+a.h}}function bY(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:o}=n;return!(Zr({x:t,y:r},e)||Zr({x:t,y:o},e)||Zr({x:i,y:r},e)||Zr({x:i,y:o},e))}function wY(n,e,t){let r=[],i=n._pointLabels.length,o=n.options,{centerPointLabels:s,display:a}=o.pointLabels,c={extra:cD(o)/2,additionalAngle:s?Oe/i:0},l;for(let d=0;d<i;d++){c.padding=t[d],c.size=e[d];let h=_Y(n,d,c);r.push(h),a==="auto"&&(h.visible=bY(h,l),h.visible&&(l=h))}return r}function EY(n){return n===0||n===180?"center":n<180?"left":"right"}function IY(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function CY(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function DY(n,e,t){let{left:r,top:i,right:o,bottom:s}=t,{backdropColor:a}=e;if(!Ee(a)){let c=Ko(e.borderRadius),l=Kt(e.backdropPadding);n.fillStyle=a;let d=r-l.left,h=i-l.top,f=o-r+l.width,p=s-i+l.height;Object.values(c).some(y=>y!==0)?(n.beginPath(),nl(n,{x:d,y:h,w:f,h:p,radius:c}),n.fill()):n.fillRect(d,h,f,p)}}function TY(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let o=n._pointLabelItems[i];if(!o.visible)continue;let s=r.setContext(n.getPointLabelContext(i));DY(t,s,o);let a=Ct(s.font),{x:c,y:l,textAlign:d}=o;Go(t,n._pointLabels[i],c,l+a.lineHeight/2,a,{color:s.color,textAlign:d,textBaseline:"middle"})}}function NL(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Xe);else{let o=n.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let s=1;s<r;s++)o=n.getPointPosition(s,e),i.lineTo(o.x,o.y)}}function SY(n,e,t,r,i){let o=n.ctx,s=e.circular,{color:a,lineWidth:c}=e;!s&&!r||!a||!c||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=c,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),NL(n,t,s,r),o.closePath(),o.stroke(),o.restore())}function xY(n,e,t){return Gi(n,{label:t,index:e,type:"pointLabel"})}var lD=class extends sl{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ad.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Kt(cD(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=ot(e)&&!isNaN(e)?e:0,this.max=ot(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/cD(this.options))}generateTickLabels(e){sl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=We(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?yY(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=Xe/(this._pointLabels.length||1),r=this.options.startAngle||0;return Wt(e*t+tr(r))}getDistanceFromCenterForValue(e){if(Ee(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ee(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return xY(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-dt+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:o}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),NL(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:o}=t,s=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&TY(this,s),i.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);let f=this.getContext(h),p=i.setContext(f),y=o.setContext(f);SY(this,p,c,s,y)}}),r.display){for(e.save(),a=s-1;a>=0;a--){let d=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=d;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=r.setContext(this.getContext(c)),d=Ct(l.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=d.string,s=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let h=Kt(l.backdropPadding);e.fillRect(-s/2-h.left,-o-d.size/2-h.top,s+h.width,d.size+h.height)}Go(e,a.label,0,-o,d,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},_y={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},An=Object.keys(_y);function cL(n,e){return n-e}function lL(n,e){if(Ee(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts,s=e;return typeof r=="function"&&(s=r(s)),ot(s)||(s=typeof r=="string"?t.parse(s,r):t.parse(s)),s===null?null:(i&&(s=i==="week"&&(ia(o)||o===!0)?t.startOf(s,"isoWeek",o):t.startOf(s,i)),+s)}function uL(n,e,t,r){let i=An.length;for(let o=An.indexOf(n);o<i-1;++o){let s=_y[An[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(a*s.size))<=r)return An[o]}return An[i-1]}function AY(n,e,t,r,i){for(let o=An.length-1;o>=An.indexOf(t);o--){let s=An[o];if(_y[s].common&&n._adapter.diff(i,r,s)>=e-1)return s}return An[t?An.indexOf(t):0]}function MY(n){for(let e=An.indexOf(n)+1,t=An.length;e<t;++e)if(_y[An[e]].common)return An[e]}function dL(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=Km(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function RY(n,e,t,r){let i=n._adapter,o=+i.startOf(e[0].value,r),s=e[e.length-1].value,a,c;for(a=o;a<=s;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}function hL(n,e,t){let r=[],i={},o=e.length,s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,r.push({value:a,major:!1});return o===0||!t?r:RY(n,r,i,t)}var uD=(()=>{class n extends ca{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),o=this._adapter=new H7._date(t.adapters.date);o.init(r),Xc(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:lL(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:c}=this.getUserBounds();function l(d){!a&&!isNaN(d.min)&&(o=Math.min(o,d.min)),!c&&!isNaN(d.max)&&(s=Math.max(s,d.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=ot(o)&&!isNaN(o)?o:+r.startOf(Date.now(),i),s=ot(s)&&!isNaN(s)?s:+r.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,c=WO(o,s,a);return this._unit=r.unit||(i.autoSkip?uL(r.minUnit,this.min,this.max,this._getLabelCapacity(s)):AY(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:MY(this._unit),this.initOffsets(o),t.reverse&&c.reverse(),hL(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,o,s;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?r=1-o:r=(this.getDecimalForValue(t[1])-o)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=Mt(r,0,a),i=Mt(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,o=this.options,s=o.time,a=s.unit||uL(s.minUnit,r,i,this._getLabelCapacity(r)),c=ce(o.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,d=ia(l)||l===!0,h={},f=r,p,y;if(d&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,d?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let v=o.ticks.source==="data"&&this.getDataTimestamps();for(p=f,y=0;p<i;p=+t.add(p,c,a),y++)dL(h,p,v);return(p===i||o.bounds==="ticks"||y===1)&&dL(h,p,v),Object.keys(h).sort(cL).map(_=>+_)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let o=this.options.time.displayFormats,s=this._unit,a=r||o[s];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,o){let s=this.options,a=s.ticks.callback;if(a)return We(a,[t,r,i],this);let c=s.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&c[l],f=d&&c[d],p=i[r],y=d&&f&&p&&p.major;return this._adapter.format(t,o||(y?f:h))}generateTickLabels(t){let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],o.label=this._tickFormatFunction(o.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,o=tr(this.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(o),a=Math.sin(o),c=this._resolveTickFontOptions(0).size;return{w:i*s+c*a,h:i*a+c*s}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,o=i[r.unit]||i.millisecond,s=this._tickFormatFunction(t,0,hL(this,[t],this._majorUnit),o),a=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(r=0,i=o.length;r<i;++r)t=t.concat(o[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let o=this.getLabels();for(r=0,i=o.length;r<i;++r)t.push(lL(this,o[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return fC(t.sort(cL))}}return n})();function cy(n,e,t){let r=0,i=n.length-1,o,s,a,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Jr(n,"pos",e)),{pos:o,time:a}=n[r],{pos:s,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Jr(n,"time",e)),{time:o,pos:a}=n[r],{time:s,pos:c}=n[i]);let l=s-o;return l?a+(c-a)*(e-o)/l:a}var dD=class extends uD{static id="timeseries";static defaults=uD.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=cy(t,this.min),this._tableRange=cy(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],o=[],s,a,c,l,d;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,a=i.length;s<a;++s)d=i[s+1],c=i[s-1],l=i[s],Math.round((d+c)/2)!==l&&o.push({time:l,pos:s/(a-1)});return o}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(cy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return cy(this._table,r*this._tableRange+this._minPos,!0)}},PY=Object.freeze({__proto__:null,CategoryScale:hY,LinearScale:sD,LogarithmicScale:aD,RadialLinearScale:lD,TimeScale:uD,TimeSeriesScale:dD}),al=[B7,fQ,cY,PY];var NY=["canvasDolar"];function kY(n,e){n&1&&(A(0,"div",13),k(1,"Cargando datos\u2026"),S())}function OY(n,e){if(n&1&&(A(0,"div",14),k(1),S()),n&2){let t=me();V(),je(t.error)}}ii.register(...al);var by=class n{constructor(e,t){this.tipoCambioService=e;this.cdr=t}canvasRef;chart;currentWeekOffset=0;cargando=!1;error=null;rangoLabel="";preferVenta=!0;ngAfterViewInit(){this.cargarSemana(this.currentWeekOffset)}semanaAnterior(){this.currentWeekOffset-=1,this.cargarSemana(this.currentWeekOffset)}irAEstaSemana(){this.currentWeekOffset!==0&&(this.currentWeekOffset=0,this.cargarSemana(this.currentWeekOffset))}cargarSemana(e){this.cargando=!0,this.error=null;let{desde:t,hasta:r,label:i}=this.getWeekRange(e);this.rangoLabel=i,this.cdr.detectChanges(),this.tipoCambioService.getTipoCambio(t,r).subscribe({next:o=>{let c=(Array.isArray(o)?o:o?.results??o?.data??o?.cotizaciones??o?.items??o?.value??[]).map(h=>{let f=this.pickDate(h),p=this.pickValor(h,this.preferVenta);return{fecha:f,valor:p}}).filter(h=>typeof h.fecha=="string"&&h.fecha.length>0&&Number.isFinite(h.valor));if(c.sort((h,f)=>h.fecha.localeCompare(f.fecha)),console.log("Normalizado:",c),!c.length){this.error="No se encontraron datos para esta semana.",this.render([],[]),this.cargando=!1;return}let l=c.map(h=>h.fecha),d=c.map(h=>h.valor);this.render(l,d),this.cargando=!1},error:o=>{console.error("Error API:",o),this.error="No se pudo obtener la cotizaci\xF3n.",this.render([],[]),this.cargando=!1}})}render(e,t){this.chart&&this.chart.destroy(),this.chart=new ii(this.canvasRef.nativeElement,{type:"line",data:{labels:e,datasets:[{label:"Evoluci\xF3n del d\xF3lar (semana seleccionada)",data:t,borderColor:"blue",backgroundColor:"rgba(0,123,255,0.3)",fill:!0,tension:.3,pointRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Fecha"}},y:{title:{display:!0,text:"ARS"}}}}})}getWeekRange(e){let t=new Date,r=this.ymd(t),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),s=(i.getDay()+6)%7;i.setDate(i.getDate()-s),i.setDate(i.getDate()+e*7);let a=new Date(i),c=new Date(i);c.setDate(c.getDate()+6);let l=e===0&&c>t?t:c,d=this.ymd(a),h=this.ymd(l),f=`Semana del ${d} al ${h===r?`${h} (hoy)`:h}`;return{desde:d,hasta:h,label:f}}ymd(e){let t=e.getFullYear(),r=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0");return`${t}-${r}-${i}`}pickDate(e){let t=this.getFirst(e,["fecha","Fecha","date","Date","dia","Dia","fechaHora","FechaHora"]);if(!t)return null;try{let r=new Date(t);if(!isNaN(r.getTime()))return r.toISOString().slice(0,10)}catch{}return typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t)?t:String(t)}pickValor(e,t){let r=["tipoCotizacionVendedor","vendedor","venta","valorVenta","precioVenta","sell","ask","oficialVenta","mayoristaVenta","minoristaVenta","turistaVenta"],i=["tipoCotizacionComprador","comprador","compra","valorCompra","precioCompra","buy","bid","oficialCompra","mayoristaCompra","minoristaCompra","turistaCompra"],o=["tipoCotizacion","valor","cierre","promedio","oficial","mayorista","minorista","turista","precio"],s=t?[...r,...o]:[...i,...o];for(let c of s){let l=this.toNum(this.getFirst(e,[c,`cotizacion.${c}`,`datos.${c}`,`valores.${c}`]));if(Number.isFinite(l))return l}let a=NaN;return this.walk(e,(c,l)=>{if(/(fecha|dia|mes|anio|año|hora|id|codigo|código)/i.test(c))return;let d=this.toNum(l);Number.isFinite(d)&&d>=300&&d<=5e3&&(!Number.isFinite(a)||d>a)&&(a=d)}),a}toNum(e){if(e==null)return NaN;if(typeof e=="number")return e;if(typeof e=="string"){let t=e.replace(/\s/g,"").replace(/\./g,"").replace(",","."),r=Number(t);return isFinite(r)?r:NaN}return NaN}getFirst(e,t){for(let r of t){let i=this.getByPath(e,r);if(i!=null&&i!=="")return i}}getByPath(e,t){if(!e)return;let r=t.split("."),i=e;for(let o of r)if(i&&Object.prototype.hasOwnProperty.call(i,o))i=i[o];else return;return i}walk(e,t,r=""){if(e&&typeof e=="object")for(let i of Object.keys(e)){let o=r?`${r}.${i}`:i,s=e[i];t(o,s),s&&typeof s=="object"&&this.walk(s,t,o)}}static \u0275fac=function(t){return new(t||n)(q(Bo),q(cr))};static \u0275cmp=we({type:n,selectors:[["app-grafico-dolar"]],viewQuery:function(t,r){if(t&1&&ao(NY,5),t&2){let i;Ii(i=Ci())&&(r.canvasRef=i.first)}},decls:17,vars:4,consts:[["canvasDolar",""],[1,"container","py-3",2,"max-width","980px","position","relative","z-index","1"],[1,"text-center","mb-4"],[1,"d-inline-block","bg-primary","bg-opacity-75","text-white","px-4","py-2","rounded-3"],[1,"fw-semibold","m-0"],[1,"d-block","mt-1"],[1,"d-flex","flex-wrap","align-items-center","gap-2","mb-3"],[1,"btn","btn-light","text-primary","border-primary",3,"click"],[1,"btn","btn-light","text-dark","border-dark",3,"click","disabled"],["class","alert alert-info py-2",4,"ngIf"],["class","alert alert-danger py-2",4,"ngIf"],[1,"card","p-3",2,"min-height","420px"],["id","canvasDolar",2,"position","relative","z-index","0"],[1,"alert","alert-info","py-2"],[1,"alert","alert-danger","py-2"]],template:function(t,r){if(t&1){let i=St();A(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4),k(4,"Evoluci\xF3n del d\xF3lar"),S(),A(5,"small",5),k(6),S()()(),A(7,"div",6)(8,"button",7),ee("click",function(){return _e(i),be(r.semanaAnterior())}),k(9," \u2190 Semana anterior "),S(),A(10,"button",8),ee("click",function(){return _e(i),be(r.irAEstaSemana())}),k(11," Volver a semana actual "),S()(),ne(12,kY,2,0,"div",9)(13,OY,2,1,"div",10),A(14,"div",11),se(15,"canvas",12,0),S()()}t&2&&(V(6),je(r.rangoLabel),V(4),W("disabled",r.currentWeekOffset===0),V(2),W("ngIf",r.cargando),V(),W("ngIf",r.error))},dependencies:[Le,pt,fr],styles:["nav.navbar[_ngcontent-%COMP%]{z-index:9999!important;position:fixed;top:0;width:100%;left:0}#canvasDolar[_ngcontent-%COMP%]{z-index:0;position:relative}"]})};var wy=class n{constructor(e){this.http=e}apiUrl="http://localhost:3000";obtenerVentasPorFecha(e){return this.http.get(`${this.apiUrl}/ventas-por-fecha?tipo=${e}`)}static \u0275fac=function(t){return new(t||n)(Z(Nt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var LY=["canvasVentas"];function VY(n,e){n&1&&(A(0,"div",11),k(1,"Cargando datos..."),S())}function jY(n,e){if(n&1&&(A(0,"div",12),k(1),S()),n&2){let t=me();V(),je(t.error)}}ii.register(...al);var Ey=class n{constructor(e,t){this.ventasService=e;this.cdr=t}canvasRef;chart;tipo="dia";agrupacion="d\xEDa";cargando=!1;error=null;ngOnInit(){this.cargarGrafico()}cambiarAgrupacion(e){this.tipo!==e&&(this.tipo=e,this.agrupacion=this.formatearAgrupacion(e),this.cargarGrafico())}formatearAgrupacion(e){switch(e){case"dia":return"d\xEDa";case"semana":return"semana";case"mes":return"mes";default:return""}}cargarGrafico(){this.cargando=!0,this.error=null,setTimeout(()=>{this.ventasService.obtenerVentasPorFecha(this.tipo).subscribe({next:e=>{let t=e.map(i=>i.periodo.split("T")[0]),r=e.map(i=>i.cantidad);this.renderChart(t,r),this.cargando=!1},error:e=>{console.error("Error al obtener ventas:",e),this.error="No se pudo cargar el gr\xE1fico de ventas.",this.cargando=!1}})})}renderChart(e,t){this.chart&&this.chart.destroy(),this.chart=new ii(this.canvasRef.nativeElement,{type:"bar",data:{labels:e,datasets:[{label:`Cantidad de Ventas por ${this.tipo}`,data:t,backgroundColor:"rgba(0, 123, 255, 0.6)",borderColor:"rgba(0, 123, 255, 1)",borderWidth:1,barThickness:30}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Fecha"}},y:{title:{display:!0,text:"Cantidad de Ventas"},beginAtZero:!0}}}})}static \u0275fac=function(t){return new(t||n)(q(wy),q(cr))};static \u0275cmp=we({type:n,selectors:[["app-grafico-ventas"]],viewQuery:function(t,r){if(t&1&&ao(LY,5),t&2){let i;Ii(i=Ci())&&(r.canvasRef=i.first)}},decls:19,vars:3,consts:[["canvasVentas",""],[1,"container","py-3",2,"max-width","980px","position","relative","z-index","1"],[1,"text-center","mb-4"],[1,"d-inline-block","bg-primary","bg-opacity-75","text-white","px-4","py-2","rounded-3"],[1,"fw-semibold","m-0"],[1,"d-block","mt-1"],[1,"d-flex","flex-wrap","align-items-center","gap-2","mb-3","justify-content-center"],[1,"btn","btn-light","text-primary","border-primary",3,"click"],["class","alert alert-info text-center py-2",4,"ngIf"],["class","alert alert-danger text-center py-2",4,"ngIf"],[1,"card","p-3",2,"min-height","420px"],[1,"alert","alert-info","text-center","py-2"],[1,"alert","alert-danger","text-center","py-2"]],template:function(t,r){if(t&1){let i=St();A(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4),k(4,"Gr\xE1fico de Ventas"),S(),A(5,"small",5),k(6),S()()(),A(7,"div",6)(8,"button",7),ee("click",function(){return _e(i),be(r.cambiarAgrupacion("dia"))}),k(9," Por d\xEDa "),S(),A(10,"button",7),ee("click",function(){return _e(i),be(r.cambiarAgrupacion("semana"))}),k(11," Por semana "),S(),A(12,"button",7),ee("click",function(){return _e(i),be(r.cambiarAgrupacion("mes"))}),k(13," Por mes "),S()(),ne(14,VY,2,0,"div",8)(15,jY,2,1,"div",9),A(16,"div",10),se(17,"canvas",null,0),S()()}t&2&&(V(6),lt("Agrupado por ",r.agrupacion,""),V(8),W("ngIf",r.cargando),V(),W("ngIf",r.error))},dependencies:[Le,pt,fr,dr],encapsulation:2})};var UY=["canvasProductos"];ii.register(...al);var Iy=class n{constructor(e){this.http=e}canvasRef;chart;generarColores(e){let t=[],r=["#36A2EB","#FF6384","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#00A36C","#F94144","#43AA8B","#F3722C"];for(let i=0;i<e;i++)t.push(r[i%r.length]);return t}ngAfterViewInit(){this.http.get("http://localhost:3000/productos-mas-vendidos").subscribe(e=>{let t=e.map(i=>i.nombre),r=e.map(i=>i.cantidad_vendida);this.chart=new ii(this.canvasRef.nativeElement,{type:"pie",data:{labels:t,datasets:[{label:"Cantidad Vendida",data:r,backgroundColor:this.generarColores(e.length),borderColor:"#fff",borderWidth:2,hoverOffset:10,hoverBorderColor:"#000",hoverBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:10},plugins:{legend:{position:"top",labels:{color:"#333"}},title:{display:!0,text:"Productos M\xE1s Vendidos",color:"#111",font:{size:18}}}}})})}static \u0275fac=function(t){return new(t||n)(q(Nt))};static \u0275cmp=we({type:n,selectors:[["app-grafico-productos"]],viewQuery:function(t,r){if(t&1&&ao(UY,5),t&2){let i;Ii(i=Ci())&&(r.canvasRef=i.first)}},decls:5,vars:0,consts:[["canvasProductos",""],[1,"container","py-3",2,"max-width","980px"],[1,"text-center","mb-4"],[1,"card","p-3",2,"min-height","420px"]],template:function(t,r){t&1&&(A(0,"div",1),se(1,"div",2),A(2,"div",3),se(3,"canvas",null,0),S()())},dependencies:[Le,dr],styles:[".grafico-container[_ngcontent-%COMP%]{background-color:#fff!important;max-width:900px;margin:2rem auto;border-radius:8px;padding:2rem;box-shadow:0 0 10px #0000001a;z-index:9999}canvas[_ngcontent-%COMP%]{width:100%!important;height:400px!important;background-color:#fff!important}"]})};var Un=(n,e)=>{let t=$(Qe),r=localStorage.getItem("usuario");if(!r)return t.parseUrl("/iniciar-sesion");let i=JSON.parse(r),o=n.data?.rol;return Array.isArray(o)?o.includes(i.rol_id)?!0:t.parseUrl("/gestion"):i.rol_id===o?!0:t.parseUrl("/gestion")};var kL=[{path:"",component:Ed},{path:"iniciar-sesion",component:Ed},{path:"registrar-usuario",component:Em},{path:"gestion",component:Cm,canActivate:[Un],data:{rol:[1,2]}},{path:"gestion-producto",component:Dm,canActivate:[Un],data:{rol:2}},{path:"gestion-producto/alta",component:Tm,canActivate:[Un],data:{rol:2}},{path:"gestion-producto/listado",component:Sm,canActivate:[Un],data:{rol:2}},{path:"gestion-producto/modificar",component:xm,canActivate:[Un],data:{rol:2}},{path:"editar-producto/:id",component:Am,canActivate:[Un],data:{rol:2}},{path:"gestion-producto/baja",component:Mm,canActivate:[Un],data:{rol:2}},{path:"factura-carrito",component:km,canActivate:[Un],data:{rol:[1,2]}},{path:"factura",component:Wc,canActivate:[Un],data:{rol:1}},{path:"grafico-dolar",component:by,canActivate:[Un],data:{rol:2}},{path:"grafico-ventas",component:Ey,canActivate:[Un],data:{rol:2}},{path:"grafico-productos",component:Iy,canActivate:[Un],data:{rol:2}},{path:"**",component:Im}];var OL={providers:[oM({eventCoalescing:!0}),E0(kL),ep()]};function BY(n,e){n&1&&(A(0,"li",10)(1,"a",11),k(2,"Gesti\xF3n de Productos"),S()())}function HY(n,e){n&1&&(A(0,"li",10)(1,"a",12),k(2,"Gesti\xF3n de Facturaci\xF3n"),S()())}function $Y(n,e){n&1&&(A(0,"li",10)(1,"a",13),k(2,"Gr\xE1fico del D\xF3lar"),S()())}function zY(n,e){n&1&&(A(0,"li",10)(1,"a",14),k(2,"Gr\xE1fico de Ventas"),S()())}function qY(n,e){n&1&&(A(0,"li",10)(1,"a",15),k(2,"Gr\xE1fico de Productos"),S()())}function WY(n,e){if(n&1){let t=St();A(0,"li")(1,"button",16),ee("click",function(){_e(t);let i=me();return be(i.cerrarSesion())}),k(2,"Cerrar sesi\xF3n"),S()()}}var Cy=class n{constructor(e,t){this.router=e;this.autenticacion=t}usuario=null;get esCliente(){return this.usuario?.rol_id===1}get esAdministrador(){return this.usuario?.rol_id===2}ngOnInit(){this.usuario=this.autenticacion.obtenerUsuario()}cerrarSesion(){this.autenticacion.logout()}static \u0275fac=function(t){return new(t||n)(q(Qe),q(Uo))};static \u0275cmp=we({type:n,selectors:[["app-menu"]],decls:15,vars:6,consts:[[2,"height","80px"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","bg-opacity-75","shadow","fixed-top",2,"z-index","9999"],[1,"container"],["routerLink","/gestion",1,"navbar-brand","fw-bold"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav","gap-2"],["class","nav-item",4,"ngIf"],[4,"ngIf"],[1,"nav-item"],["routerLink","/gestion-producto",1,"btn","btn-outline-light"],["routerLink","/factura-carrito",1,"btn","btn-outline-light"],["routerLink","/grafico-dolar",1,"btn","btn-outline-light"],["routerLink","/grafico-ventas",1,"btn","btn-outline-light"],["routerLink","/grafico-productos",1,"btn","btn-outline-light"],[1,"btn","btn-outline-light",3,"click"]],template:function(t,r){t&1&&(se(0,"div",0),A(1,"nav",1)(2,"div",2)(3,"a",3),k(4,"Gesti\xF3n"),S(),A(5,"button",4),se(6,"span",5),S(),A(7,"div",6)(8,"ul",7),ne(9,BY,3,0,"li",8)(10,HY,3,0,"li",8)(11,$Y,3,0,"li",8)(12,zY,3,0,"li",8)(13,qY,3,0,"li",8)(14,WY,3,0,"li",9),S()()()()),t&2&&(V(9),W("ngIf",r.esAdministrador),V(),W("ngIf",r.esAdministrador||r.esCliente),V(),W("ngIf",r.esAdministrador),V(),W("ngIf",r.esAdministrador),V(),W("ngIf",r.esAdministrador),V(),W("ngIf",r.usuario))},dependencies:[kt,Le,pt],encapsulation:2})};function GY(n,e){n&1&&se(0,"app-menu")}var Dy=class n{constructor(e,t){this.router=e;this.autenticacion=t;this.router.events.pipe(Ht(r=>r instanceof In)).subscribe(r=>{let i=r.url,o=["/iniciar-sesion","/registrar-usuario"];this.mostrarMenu=this.autenticacion.estaAutenticado()&&!o.includes(i)})}title="PrimerParcial";mostrarMenu=!1;static \u0275fac=function(t){return new(t||n)(q(Qe),q(Uo))};static \u0275cmp=we({type:n,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(t,r){t&1&&(ne(0,GY,1,0,"app-menu",0),se(1,"router-outlet")),t&2&&W("ngIf",r.mostrarMenu)},dependencies:[wu,Cy,Le,pt],encapsulation:2})};$b(Dy,OL).catch(n=>console.error(n));
